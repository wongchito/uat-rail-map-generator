(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[96],[,,function(n,e,t){"use strict";t.d(e,"g",(function(){return a})),t.d(e,"k",(function(){return i})),t.d(e,"c",(function(){return c})),t.d(e,"a",(function(){return j})),t.d(e,"n",(function(){return m})),t.d(e,"d",(function(){return s})),t.d(e,"m",(function(){return u})),t.d(e,"b",(function(){return l})),t.d(e,"h",(function(){return d})),t.d(e,"l",(function(){return h})),t.d(e,"e",(function(){return f})),t.d(e,"i",(function(){return b})),t.d(e,"j",(function(){return g})),t.d(e,"f",(function(){return p}));var r,a,i,c,o=t(4);!function(n){n.init="init",n.loading="loading",n.loaded="loaded",n.failed="failed"}(a||(a={})),function(n){n.MTR="mtr",n.GZMTR="gzmtr",n.SHMetro="shmetro"}(i||(i={})),function(n){n.Destination="destination",n.RunIn="runin",n.RailMap="railmap",n.Indoor="indoor"}(c||(c={}));var s,u,l,d,h,f,b,g,p,j="all",m=(r={},Object(o.a)(r,i.MTR,[c.Destination,c.RailMap]),Object(o.a)(r,i.GZMTR,[c.RunIn,c.RailMap]),Object(o.a)(r,i.SHMetro,[c.Destination,c.RunIn,c.RailMap,c.Indoor]),r);!function(n){n.left="left",n.right="right"}(s||(s={})),function(n){n.left="l",n.right="r"}(u||(u={})),function(n){n.through="through",n.nonThrough="nonthrough"}(l||(l={})),function(n){n.black="#000",n.white="#fff"}(d||(d={})),function(n){n.local="local",n.express="express",n.direct="direct"}(h||(h={})),function(n){n.airport="airport",n.disney="disney",n.hsr="hsr",n.railway="railway",n.none=""}(f||(f={})),function(n){n.gz1="gz1",n.gz28="gz28",n.gz2otis="gz2otis",n.gz3="gz3",n.gz4="gz4",n.gz5="gz5",n.gz1421="gz1421",n.gz6="gz6",n.gzgf="gzgf"}(b||(b={})),function(n){n.sh="sh",n.sh2020="sh2020"}(g||(g={})),function(n){n.Azerbaijani="az",n.Catalan="ca",n.Chinese="zh",n.ChineseCN="zh-CN",n.ChineseSimp="zh-Hans",n.ChineseTrad="zh-Hant",n.ChineseHK="zh-HK",n.ChineseTW="zh-TW",n.English="en",n.French="fr",n.Gaelic="ga",n.German="de",n.Hindi="hi",n.Japanese="ja",n.Korean="ko",n.Norwegian="no",n.Spanish="es",n.Persian="fa",n.Portuguese="pt",n.Russian="ru",n.Swedish="sv",n.Turkish="tr"}(p||(p={}))},function(n,e){n.exports=MaterialUI},,function(n,e){n.exports=React},,function(n,e,t){"use strict";t.d(e,"g",(function(){return c})),t.d(e,"r",(function(){return o})),t.d(e,"s",(function(){return s})),t.d(e,"t",(function(){return u})),t.d(e,"v",(function(){return l})),t.d(e,"a",(function(){return d})),t.d(e,"l",(function(){return h})),t.d(e,"e",(function(){return f})),t.d(e,"f",(function(){return b})),t.d(e,"u",(function(){return g})),t.d(e,"h",(function(){return p})),t.d(e,"d",(function(){return j})),t.d(e,"n",(function(){return m})),t.d(e,"i",(function(){return O})),t.d(e,"o",(function(){return v})),t.d(e,"m",(function(){return y})),t.d(e,"k",(function(){return _})),t.d(e,"j",(function(){return S})),t.d(e,"c",(function(){return w})),t.d(e,"b",(function(){return x})),t.d(e,"p",(function(){return T})),t.d(e,"q",(function(){return z})),t.d(e,"L",(function(){return k})),t.d(e,"U",(function(){return N})),t.d(e,"V",(function(){return E})),t.d(e,"T",(function(){return H})),t.d(e,"X",(function(){return R})),t.d(e,"G",(function(){return M})),t.d(e,"O",(function(){return I})),t.d(e,"J",(function(){return C})),t.d(e,"K",(function(){return P})),t.d(e,"W",(function(){return D})),t.d(e,"M",(function(){return B})),t.d(e,"I",(function(){return F})),t.d(e,"Q",(function(){return A})),t.d(e,"N",(function(){return G})),t.d(e,"R",(function(){return W})),t.d(e,"P",(function(){return L})),t.d(e,"x",(function(){return U})),t.d(e,"bb",(function(){return Z})),t.d(e,"D",(function(){return J})),t.d(e,"Y",(function(){return V})),t.d(e,"B",(function(){return Y})),t.d(e,"Z",(function(){return Q})),t.d(e,"z",(function(){return $})),t.d(e,"H",(function(){return nn})),t.d(e,"S",(function(){return tn})),t.d(e,"F",(function(){return rn})),t.d(e,"fb",(function(){return an})),t.d(e,"jb",(function(){return cn})),t.d(e,"gb",(function(){return on})),t.d(e,"w",(function(){return sn})),t.d(e,"C",(function(){return un})),t.d(e,"ab",(function(){return ln})),t.d(e,"hb",(function(){return dn})),t.d(e,"kb",(function(){return hn})),t.d(e,"ib",(function(){return fn})),t.d(e,"db",(function(){return bn})),t.d(e,"cb",(function(){return gn})),t.d(e,"A",(function(){return pn})),t.d(e,"eb",(function(){return jn})),t.d(e,"y",(function(){return mn})),t.d(e,"E",(function(){return On}));var r=t(4),a=t(1),i=t(13),c="SET_FULL_PARAM",o="SET_STYLE",s="SET_SVG_HEIGHT",u="SET_SVG_WIDTH",l="SET_Y_PERCENTAGE",d="SET_BRANCH_SPACING",h="SET_PADDING_PERCENTAGE",f="SET_DIRECTION_INDICATOR_X",b="SET_DIRECTION_INDICATOR_Y",g="SET_THEME",p="SET_LINE_NAME",j="SET_DIRECTION",m="SET_PLATFORM",O="SET_LINE_NUM",v="SET_PSD_NUM",y="SET_PANEL_TYPE",_="SET_NOTES",S="SET_NAME_POSITION",w="SET_CUSTOMISED_MTR_DESTINATION",x="SET_CURRENT_STATION",T="SET_STATION",z="SET_STATIONS_BULK",k=function(n){return function(e){e({type:c,fullParam:n}),e(Object(i.e)())}},N=function(n){return{type:s,svgHeight:n}},E=function(n,e){return{type:u,svgWidth:n,canvas:e}},H=function(n){return{type:o,style:n}},R=function(n){return{type:l,yPercentage:n}},M=function(n){return{type:d,branchSpacing:n}},I=function(n){return{type:h,paddingPercentage:n}},C=function(n){return{type:f,directionIndicatorX:n}},P=function(n){return{type:b,directionIndicatorY:n}},D=function(n){return{type:g,theme:n}},B=function(n){return{type:p,lineName:n}},F=function(n){return{type:j,direction:n}},A=function(n){return{type:m,platform:n}},G=function(n){return{type:O,lineNum:n}},W=function(n){return{type:v,psdNum:n}},L=function(n){return{type:y,panelType:n}},K=function(n){return{type:_,notes:n}},U=function(){return function(n,e){var t=e().param.notesGZMTR;n(K(t.concat([["","",0,0,!1]])))}},Z=function(n,e){return function(t,r){var a=r().param.notesGZMTR;t(K(a.map((function(t,r){return r===n?e:t}))))}},J=function(n){return function(e,t){var r=t().param.notesGZMTR;e(K(r.filter((function(e,t){return t!==n}))))}},X=function(n){return{type:S,namePosition:n}},V=function(n){return function(e,t){var r=t().param.namePosMTR;e(X(Object(a.a)(Object(a.a)({},r),{},{isStagger:n})))}},Y=function(){return function(n,e){var t=e().param.namePosMTR;n(X(Object(a.a)(Object(a.a)({},t),{},{isFlip:!t.isFlip})))}},q=function(n){return{type:w,customisedMtrDestination:n}},Q=function(n){return function(e,t){var r=t().param.customiseMTRDest;e(q(Object(a.a)(Object(a.a)({},r),{},{isLegacy:n})))}},$=function(n){return function(e,t){var r=t().param.customiseMTRDest;e(q(Object(a.a)(Object(a.a)({},r),{},{terminal:n})))}},nn=function(n){return{type:x,currentStation:n}},en=function(n,e){return function(t){t({type:T,stationId:n,station:e}),t(Object(i.e)())}},tn=function(n){return function(e){e({type:z,stations:n}),e(Object(i.e)())}},rn=function(){return function(n,e){var t=e().param.stn_list,i=Object.keys(t).reduce((function(n,e){return Object(a.a)(Object(a.a)({},n),{},Object(r.a)({},e,function(n){switch(n){case"linestart":return Object(a.a)(Object(a.a)({},t.lineend),{},{parents:[],children:t.lineend.parents.slice().reverse(),branch:{left:[],right:t.lineend.branch.left}});case"lineend":return Object(a.a)(Object(a.a)({},t.linestart),{},{parents:t.linestart.children.slice().reverse(),children:[],branch:{left:t.linestart.branch.right,right:[]}});default:return Object(a.a)(Object(a.a)({},t[n]),{},{parents:t[n].children.map((function(n){return"linestart"===n?"lineend":"lineend"===n?"linestart":n})).reverse(),children:t[n].parents.map((function(n){return"linestart"===n?"lineend":"lineend"===n?"linestart":n})).reverse(),branch:{left:t[n].branch.right,right:t[n].branch.left}})}}(e)))}),{});n(tn(i))}},an=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{name:e})))}},cn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{secondaryName:e})))}},on=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{num:e})))}},sn=function(n,e,t){return function(r,i){var c=i().param.stn_list[n],o=c.transfer.info.map((function(n){return n.slice()}));if(o.length>e)o[e].push(t);else{for(var s=o.length;s<e;s++)o[s]=[];o[e]=[t]}r(en(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{info:o})})))}},un=function(n,e,t){return function(r,i){var c=i().param.stn_list[n];if(c.transfer.info.length>e&&c.transfer.info[e].length>t){var o=c.transfer.info.map((function(n,r){return r===e?n.filter((function(n,e){return e!==t})):n}));r(en(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{info:o})})))}}},ln=function(n,e,t,r){return function(i,c){var o=c().param.stn_list[n];if(o.transfer.info.length>e&&o.transfer.info[e].length>t){var s=o.transfer.info.map((function(n,a){return a===e?n.map((function(n,e){return e===t?[0,1,2,3,4,5].map((function(e){return void 0===r[e]?n[e]:r[e]})):n})):n}));i(en(n,Object(a.a)(Object(a.a)({},o),{},{transfer:Object(a.a)(Object(a.a)({},o.transfer),{},{info:s})})))}}},dn=function(n,e,t){return function(r,i){var c=i().param.stn_list[n],o=c.transfer.osi_names.map((function(n){return n.slice()}));if(o.length>e)o[e]=t;else{for(var s=o.length;s<e;s++)o[s]=["\u8eca\u7ad9\u540d","Stn Name"];o[e]=t}r(en(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{osi_names:o})})))}},hn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{transfer:Object(a.a)(Object(a.a)({},i.transfer),{},{tick_direc:e})})))}},fn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{transfer:Object(a.a)(Object(a.a)({},i.transfer),{},{paid_area:e})})))}},bn=function(n,e,t){return function(i,c){var o=c().param.stn_list[n];i(en(n,Object(a.a)(Object(a.a)({},o),{},{branch:Object(a.a)(Object(a.a)({},o.branch),{},Object(r.a)({},e,[t,o.branch[e][1]]))})))}},gn=function(n){return function(e,t){var i,c=t().param.stn_list;e(tn(Object(a.a)(Object(a.a)({},c),{},(i={},Object(r.a)(i,n[0].stnId,Object(a.a)(Object(a.a)({},c[n[0].stnId]),{},{branch:Object(a.a)(Object(a.a)({},c[n[0].stnId].branch),{},Object(r.a)({},n[0].direction,[c[n[0].stnId].branch[n[0].direction][0],n[0].first]))})),Object(r.a)(i,n[1].stnId,Object(a.a)(Object(a.a)({},c[n[1].stnId]),{},{branch:Object(a.a)(Object(a.a)({},c[n[1].stnId].branch),{},Object(r.a)({},n[1].direction,[c[n[1].stnId].branch[n[1].direction][0],n[1].first]))})),i))))}},pn=function(n,e){return function(t,i){var c,o=i().param.stn_list;t(tn(Object(a.a)(Object(a.a)({},o),{},(c={},Object(r.a)(c,n,Object(a.a)(Object(a.a)({},o[n]),{},{parents:o[n].parents.slice().reverse()})),Object(r.a)(c,e,Object(a.a)(Object(a.a)({},o[e]),{},{children:o[e].children.slice().reverse()})),c))))}},jn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{facility:e})))}},mn=function(n,e){return function(t,r){var i=r().param.stn_list[n];i.services.includes(e)||t(en(n,Object(a.a)(Object(a.a)({},i),{},{services:i.services.concat(e)})))}},On=function(n,e){return function(t,r){var i=r().param.stn_list[n];i.services.includes(e)&&t(en(n,Object(a.a)(Object(a.a)({},i),{},{services:i.services.filter((function(n){return n!==e}))})))}}},function(n,e,t){"use strict";t.d(e,"b",(function(){return m})),t.d(e,"c",(function(){return O}));var r=t(21),a=t(31),i=t.n(a),c=t(1),o=t(2),s=t(10),u={rmgStyle:o.k.MTR,canvasScale:1,canvasScaleStatus:o.g.init,canvasToShow:o.a,canvasToShowStatus:o.g.init};var l=t(25),d=t(7),h={svgWidth:{destination:100,runin:100,railmap:100,indoor:100},svg_height:100,style:o.k.MTR,y_pc:50,padding:10,branch_spacing:10,direction:o.m.left,platform_num:"1",theme:[l.a.HongKong,"twl","#E2231A",o.h.white],line_name:["\u7dda","line"],current_stn_idx:"",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:o.i.gz1,notesGZMTR:[],direction_gz_x:0,direction_gz_y:0};var f=t(13),b={depsStr:"",branches:[],routes:[],tpo:[]};var g=t(18),p=Object(r.combineReducers)({app:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s.a:n.canvasScale=e.canvasScale;break;case s.b:n.canvasScaleStatus=e.canvasScaleStatus;break;case s.c:n.canvasToShow=e.canvasToShow;break;case s.d:n.canvasToShowStatus=e.canvasToShowStatus}return Object(c.a)({},n)},param:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d.g:return e.fullParam;case d.r:n.style=e.style;break;case d.s:n.svg_height=e.svgHeight;break;case d.t:n.svgWidth[e.canvas]=e.svgWidth;break;case d.v:n.y_pc=e.yPercentage;break;case d.a:n.branch_spacing=e.branchSpacing;break;case d.l:n.padding=e.paddingPercentage;break;case d.e:n.direction_gz_x=e.directionIndicatorX;break;case d.f:n.direction_gz_y=e.directionIndicatorY;break;case d.u:n.theme=e.theme;break;case d.h:n.line_name=e.lineName;break;case d.d:n.direction=e.direction;break;case d.n:n.platform_num=e.platform;break;case d.i:n.line_num=e.lineNum;break;case d.o:n.psd_num=e.psdNum;break;case d.m:n.info_panel_type=e.panelType;break;case d.k:n.notesGZMTR=e.notes;break;case d.j:n.namePosMTR=e.namePosition;break;case d.c:n.customiseMTRDest=e.customisedMtrDestination;break;case d.b:n.current_stn_idx=e.currentStation;break;case d.p:n.stn_list[e.stationId]=e.station;break;case d.q:n.stn_list=e.stations}return Object(c.a)({},n)},helper:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f.b:n.depsStr=e.depsStr;break;case f.a:n.branches=e.branches;break;case f.c:n.routes=e.routes;break;case f.d:n.tpo=e.tpo}return Object(c.a)({},n)}}),j=Object(r.createStore)(p,Object(r.applyMiddleware)(i.a)),m=(e.a=j,function(){return Object(g.useDispatch)()}),O=g.useSelector},,function(n,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return s})),t.d(e,"c",(function(){return u})),t.d(e,"d",(function(){return l})),t.d(e,"f",(function(){return d})),t.d(e,"h",(function(){return f})),t.d(e,"i",(function(){return b})),t.d(e,"g",(function(){return g})),t.d(e,"e",(function(){return j}));var r=t(6),a=t.n(r),i=t(9),c=t(2),o="SET_CANVAS_SCALE",s="SET_CANVAS_SCALE_STATUS",u="SET_CANVAS_TO_SHOW",l="SET_CANVAS_TO_SHOW_STATUS",d=function(n){return{type:o,canvasScale:n}},h=function(n){return{type:s,canvasScaleStatus:n}},f=function(){return function(){var n=Object(i.a)(a.a.mark((function n(e,t){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(h(c.g.loading)),n.prev=1,r=Number((t().app.canvasScale+.1).toFixed(1)),e(d(r)),n.next=6,window.rmgStorage.writeFile("rmgScale",r.toString());case 6:e(h(c.g.loaded)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),e(h(c.g.failed));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}()},b=function(){return function(){var n=Object(i.a)(a.a.mark((function n(e,t){var r,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(h(c.g.loading)),n.prev=1,r=t().app.canvasScale,i=Number(r.toFixed(1))<=.1?Number(r.toFixed(1)):Number((r-.1).toFixed(1)),e(d(i)),n.next=7,window.rmgStorage.writeFile("rmgScale",i.toString());case 7:e(h(c.g.loaded)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),e(h(c.g.failed));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}()},g=function(n){return{type:u,canvasToShow:n}},p=function(n){return{type:l,canvasToShowStatus:n}},j=function(n){return function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(p(c.g.loading)),e.prev=1,t(g(n)),e.next=5,window.rmgStorage.writeFile("rmgCanvas",n);case 5:t(p(c.g.loaded)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(p(c.g.failed));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}()}},,,function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"a",(function(){return c})),t.d(e,"c",(function(){return o})),t.d(e,"d",(function(){return s})),t.d(e,"e",(function(){return h}));var r=t(11),a=t(12),i="SET_DEPS_STR",c="SET_BRANCHES",o="SET_ROUTES",s="SET_TPO",u=function(){return function(n,e){var t=e().param.stn_list,a=Object.entries(t).map((function(n){var e=Object(r.a)(n,2),t=e[0],a=e[1];return t+a.parents.toString()+a.children.toString()+JSON.stringify(a.branch)})).join("");return n({type:i,depsStr:a}),a}},l=function(){return function(n,e){console.log("Re-calculating branches...");var t=function(n){for(var e=["linestart"],t=[["linestart"]],r=0;e.length;){var a=e.shift(),i=t[r].slice(-1)[0]||null;for(i&&"linestart"!==a?t[r].push(a):t[r]=[a];"lineend"!==a;){var c=n[i=a].children;if(function(){switch(c.length){case 1:a=c[0];break;case 2:var o=n[i].branch.right[1];"through"===n[i].branch.right[0]?(t.push([a]),e.push(o)):0===r&&(t.push([i]),e.push(o)),a=c.filter((function(n){return n!==o}))[0]}}(),t[r].push(a),i===n[a].branch.left[1])break}r++}return t}(e().param.stn_list);return n({type:c,branches:t}),t}},d=function(){return function(n,e){console.log("Re-calculating routes...");var t,r=e().param.stn_list;n((t=function(n){for(var e=["linestart"],t=[["linestart"]],r=0;e.length;){var a=e.shift(),i=t[r].slice(-1)[0]||null;for(i&&"linestart"!==a?t[r].push(a):t[r]=[a];"lineend"!==a;){var c=n[i=a].children;if(function(){switch(c.length){case 1:a=c[0];break;case 2:var o=n[i].branch.right[1];"through"===n[i].branch.right[0]?(t.push(t[r].slice()),e.push(o)):0===r&&(t.push([i]),e.push(o)),a=c.filter((function(n){return n!==o}))[0]}}(),t[r].push(a),i===n[a].branch.left[1]&&"nonthrough"===n[a].branch.left[0])break}r++}return t}(r),{type:o,routes:t}))}},h=function(){return function(n,e){var t,r;if(e().helper.depsStr!==n(u())){n(d());var i=e().helper.branches,c=n(l());i.toString()!==c.toString()&&(console.log("Re-calculating topology ordering..."),n((t=1===(r=c).length?r[0].slice(1,-1):r.reduce((function(n,e){var t=n.indexOf(e[e.length-1]);return[].concat(Object(a.a)(n.slice(0,t)),Object(a.a)(e.slice(1)),Object(a.a)(n.slice(t+1)))}),["lineend"]).slice(0,-1),{type:s,tpo:t})))}}}},function(n,e){n.exports=ReactI18next},,function(n,e){n.exports=ReactRouterDOM},,function(n,e){n.exports=ReactRedux},,,function(n,e){n.exports=Redux},function(n,e,t){"use strict";t.d(e,"c",(function(){return c})),t.d(e,"b",(function(){return o})),t.d(e,"a",(function(){return s}));var r=t(24),a=t(11),i=t(2),c=function(n){var e;"line_name"in n||(n.line_name=["\u8def\u7dda\u540d","Name of Line"]),"dest_legacy"in n||(n.dest_legacy=!1),delete n.fontZH,delete n.fontEN,delete n.weightZH,delete n.weightEN;for(var t=0,r=Object.entries(n.stn_list);t<r.length;t++){var c=Object(a.a)(r[t],2),o=c[0],s=c[1];"branch"in s||(n.stn_list[o].branch={left:[],right:[]},2===s.children.length?n.stn_list[o].branch.right=["through",s.children[1]]:n.stn_list[o].branch.right=[],2===s.parents.length?n.stn_list[o].branch.left=["through",s.parents[1]]:n.stn_list[o].branch.left=[])}n.psd_num="psd_num"in n?n.psd_num.toString():"1","line_num"in n||(n.line_num="1"),3===n.theme.length&&n.theme.push("#fff");for(var u=0,l=Object.entries(n.stn_list);u<l.length;u++){var d=Object(a.a)(l[u],2),h=d[0],f=d[1];"num"in f||(n.stn_list[h].num="00"),"interchange"in f&&f.interchange.map((function(n){return n.forEach((function(n){5===n.length&&n.splice(3,0,"#fff")}))}))}for(var b=0,g=Object.entries(n.stn_list);b<g.length;b++){var p=Object(a.a)(g[b],2),j=p[0],m=p[1];"osi22_end_p"===m.change_type&&(n.stn_list[j].change_type="osi22_pr"),"osi22_end_u"===m.change_type&&(n.stn_list[j].change_type="osi22_ur")}for(var O=0,v=Object.entries(n.stn_list);O<v.length;O++){var y=Object(a.a)(v[O],2),_=y[0];"interchange"in y[1]||(n.stn_list[_].interchange=[[]])}n.info_panel_type="info_panel_type"in n?function(n){switch(n){case"gz_1":case"panasonic":return"gz28";case"gz_2":return"gz6";case"gz_3":return"gz3";default:return n}}(n.info_panel_type):"gz28","direction_gz_x"in n||(n.direction_gz_x=50),"direction_gz_y"in n||(n.direction_gz_y=70);for(var S=0,w=Object.entries(n.stn_list);S<w.length;S++){var x,T,z,k,N=Object(a.a)(w[S],2),E=N[0],H=N[1];if(!("transfer"in H))n.stn_list[E].transfer={tick_direc:"none"===H.change_type||"int2"===H.change_type?"r":null===(x=H.change_type)||void 0===x?void 0:x.split("_")[1].split("").slice().reverse()[0],paid_area:-1===(null===(T=H.change_type)||void 0===T?void 0:T.indexOf("osi"))||"p"===(null===(z=H.change_type)||void 0===z?void 0:z.split("_")[1][0]),osi_names:-1!==(null===(k=H.change_type)||void 0===k?void 0:k.indexOf("osi"))?[H.interchange[1][0]]:[],info:2===H.interchange.length?[H.interchange[0],H.interchange[1].slice(1)]:H.interchange};delete n.stn_list[E].change_type,delete n.stn_list[E].interchange}for(var R=0,M=Object.entries(n.stn_list);R<M.length;R++){var I=Object(a.a)(M[R],2),C=I[0],P=I[1];"services"in P||(n.stn_list[C].services=["local"]),"facility"in P||(n.stn_list[C].facility="usage"in P?P.usage:""),delete n.stn_list[C].usage}return"customiseMTRDest"in n||(n.customiseMTRDest={isLegacy:n.dest_legacy||!1,terminal:!1}),delete n.dest_legacy,"svgWidth"in n||(n.svgWidth={destination:n.svg_dest_width,runin:n.svg_dest_width,railmap:n.svg_width,indoor:n.svg_width}),"indoor"in n.svgWidth||(n.svgWidth.indoor=n.svgWidth.railmap),delete n.svg_width,delete n.svg_dest_width,"notesGZMTR"in n||(n.notesGZMTR=[]),n.notesGZMTR=null===(e=n.notesGZMTR)||void 0===e?void 0:e.map((function(n){return 4===n.length?n.concat([!1]):n})),delete n.char_form,delete n.show_outer,delete n.strip_pc,delete n.txt_bg_gap,"namePosMTR"in n||(n.namePosMTR={isStagger:!0,isFlip:n.txt_flip}),delete n.txt_flip,Object.keys(n.stn_list).forEach((function(e){"secondaryName"in n.stn_list[e]?!1!==n.stn_list[e].secondaryName&&","===n.stn_list[e].secondaryName.join()&&(n.stn_list[e].secondaryName=!1):n.stn_list[e].secondaryName=!1,"type"in n.stn_list[e].transfer&&delete n.stn_list[e].transfer.type})),n.style=void 0===n.style?i.k.MTR:n.style,n},o=function(n,e){var t,a=Object(r.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(n[c])return n[c]}}catch(o){a.e(o)}finally{a.f()}return n[i.f.English]},s=function(n,e){return(e===i.k.GZMTR?((null===n||void 0===n?void 0:n.num)||"-")+": ":"")+(null===n||void 0===n?void 0:n.name.join().replace("\\"," "))}},function(n,e){n.exports=i18next},,function(n,e,t){"use strict";var r;t.d(e,"a",(function(){return r})),t.d(e,"b",(function(){return a})),function(n){n.Baku="baku",n.Barcelona="barcelona",n.Beijing="beijing",n.Changsha="changsha",n.Chengdu="chengdu",n.Chongqing="chongqing",n.Delhi="delhi",n.Dongguan="dongguan",n.Dortmund="dortmund",n.Edinburgh="edinburgh",n.Foshan="foshan",n.Glasgow="glasgow",n.Guangzhou="guangzhou",n.Hangzhou="hangzhou",n.HongKong="hongkong",n.Kansai="kansai",n.Kaohsiung="kaohsiung",n.Istanbul="istanbul",n.London="london",n.Macao="macao",n.Madrid="madrid",n.Nanjing="nanjing",n.NewTaipei="newtaipei",n.Osaka="osaka",n.Oslo="oslo",n.Paris="paris",n.Qingdao="qingdao",n.SanFrancisco="sanfrancisco",n.SanktPeterburg="sanktpeterburg",n.SaoPaulo="saopaulo",n.Seoul="seoul",n.Shanghai="shanghai",n.Shenzhen="shenzhen",n.Singapore="singapore",n.Stockholm="stockholm",n.Taipei="taipei",n.Tehran="tehran",n.Tianjin="tianjin",n.Tokyo="tokyo",n.Toronto="toronto",n.TyneAndWear="tyneandwear",n.Xiamen="xiamen",n.Xian="xian",n.Other="other"}(r||(r={}));var a=[{id:r.Baku,country:"AZ",name:{en:"Baku",az:"Bak\u0131","zh-Hans":"\u5df4\u5e93","zh-Hant":"\u5df4\u5eab"}},{id:r.Barcelona,country:"ES",name:{en:"Barcelona",es:"Barcelona","zh-Hans":"\u5df4\u585e\u7f57\u90a3","zh-HK":"\u5df4\u585e\u9686\u62ff","zh-TW":"\u5df4\u585e\u9686\u7d0d"}},{id:r.Beijing,country:"CN",name:{en:"Beijing",zh:"\u5317\u4eac"}},{id:r.Changsha,country:"CN",name:{en:"Changsha","zh-Hans":"\u957f\u6c99","zh-Hant":"\u9577\u6c99"}},{id:r.Chengdu,country:"CN",name:{en:"Chengdu",zh:"\u6210\u90fd"}},{id:r.Chongqing,country:"CN",name:{en:"Chongqing","zh-Hans":"\u91cd\u5e86","zh-Hant":"\u91cd\u6176"}},{id:r.Delhi,country:"IN",name:{en:"Delhi",hi:"\u0926\u093f\u0932\u094d\u0932\u0940","zh-Hans":"\u5fb7\u91cc","zh-Hant":"\u5fb7\u91cc"}},{id:r.Dongguan,country:"CN",name:{en:"Dongguan","zh-Hans":"\u4e1c\u839e","zh-Hant":"\u6771\u839e"}},{id:r.Dortmund,country:"DE",name:{en:"Dortmund",de:"Dortmund","zh-Hans":"\u591a\u7279\u8499\u5fb7","zh-Hant":"\u591a\u7279\u8499\u5fb7"}},{id:r.Edinburgh,country:"GBSCT",name:{en:"Edinburgh",ga:"D\xf9n \xc8ideann","zh-Hans":"\u7231\u4e01\u5821","zh-Hant":"\u611b\u4e01\u5821"}},{id:r.Foshan,country:"CN",name:{en:"Foshan",zh:"\u4f5b\u5c71"}},{id:r.Glasgow,country:"GBSCT",name:{en:"Glasgow",ga:"Glaschu",zh:"\u683c\u62c9\u65af\u54e5"}},{id:r.Guangzhou,country:"CN",name:{en:"Guangzhou","zh-Hans":"\u5e7f\u5dde","zh-Hant":"\u5ee3\u5dde"}},{id:r.Hangzhou,country:"CN",name:{en:"Hangzhou",zh:"\u676d\u5dde"}},{id:r.HongKong,country:"HK",name:{en:"Hong Kong",zh:"\u9999\u6e2f"}},{id:r.Kansai,country:"JP",name:{en:"Kansai Area",ja:"\u8fd1\u757f\u5730\u65b9","zh-Hans":"\u8fd1\u757f\u5730\u65b9\uff08\u5173\u897f\u5730\u65b9\uff09","zh-Hant":"\u8fd1\u757f\u5730\u65b9\uff08\u95dc\u897f\u5730\u65b9\uff09"}},{id:r.Kaohsiung,country:"TW",name:{en:"Kaohsiung",zh:"\u9ad8\u96c4"}},{id:r.Istanbul,country:"TR",name:{en:"Istanbul",tr:"\u0130stanbul","zh-Hans":"\u4f0a\u65af\u5766\u5e03\u5c14","zh-Hant":"\u4f0a\u65af\u5766\u5e03\u723e"}},{id:r.London,country:"GBENG",name:{en:"London","zh-Hans":"\u4f26\u6566","zh-Hant":"\u502b\u6566"}},{id:r.Macao,country:"MO",name:{en:"Macao",pt:"Macau","zh-Hans":"\u6fb3\u95e8","zh-Hant":"\u6fb3\u9580"}},{id:r.Madrid,country:"ES",name:{en:"Madrid","zh-Hans":"\u9a6c\u5fb7\u91cc","zh-Hant":"\u99ac\u5fb7\u91cc"}},{id:r.Nanjing,country:"CN",name:{en:"Nanjing",zh:"\u5357\u4eac"}},{id:r.NewTaipei,country:"TW",name:{en:"New Taipei",zh:"\u65b0\u5317"}},{id:r.Osaka,country:"JP",name:{en:"Osaka",ja:"\u5927\u962a",zh:"\u5927\u962a"}},{id:r.Oslo,country:"NO",name:{en:"Oslo","zh-Hans":"\u5965\u65af\u9646","zh-Hant":"\u5967\u65af\u9678"}},{id:r.Paris,country:"FR",name:{en:"Paris",zh:"\u5df4\u9ece"}},{id:r.Qingdao,country:"CN",name:{en:"Qingdao","zh-Hans":"\u9752\u5c9b","zh-Hant":"\u9752\u5cf6"}},{id:r.SanFrancisco,country:"US",name:{en:"San Francisco","zh-Hans":"\u65e7\u91d1\u5c71","zh-HK":"\u4e09\u85e9\u5e02","zh-TW":"\u820a\u91d1\u5c71"}},{id:r.SanktPeterburg,country:"RU",name:{en:"Sankt-Peterburg",ru:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433","zh-Hans":"\u5723\u5f7c\u5f97\u5821","zh-Hant":"\u8056\u5f7c\u5f97\u5821"}},{id:r.SaoPaulo,country:"BR",name:{en:"Sao Paulo",pt:"S\xe3o Paulo","zh-Hans":"\u5723\u4fdd\u7f57","zh-Hant":"\u8056\u4fdd\u7f85"}},{id:r.Seoul,country:"KR",name:{en:"Seoul (Metropolitan Area)",ko:"\uc11c\uc6b8(\uc218\ub3c4\uad8c)","zh-Hans":"\u9996\u5c14\uff08\u9996\u90fd\u5708\uff09","zh-Hant":"\u9996\u723e\uff08\u9996\u90fd\u5708\uff09"}},{id:r.Shanghai,country:"CN",name:{en:"Shanghai",zh:"\u4e0a\u6d77"}},{id:r.Shenzhen,country:"CN",name:{en:"Shenzhen",zh:"\u6df1\u5733"}},{id:r.Xiamen,country:"CN",name:{en:"Xiamen","zh-Hans":"\u53a6\u95e8","zh-Hant":"\u5ec8\u9580"}},{id:r.Singapore,country:"SG",name:{en:"Singapore",zh:"\u65b0\u52a0\u5761"}},{id:r.Stockholm,country:"SE",name:{en:"Stockholm","zh-Hans":"\u65af\u5fb7\u54e5\u5c14\u6469","zh-Hant":"\u65af\u5fb7\u54e5\u723e\u6469"}},{id:r.Taipei,country:"TW",name:{en:"Taipei",zh:"\u53f0\u5317"}},{id:r.Tehran,country:"IR",name:{en:"Tehran",fa:"\u062a\u0647\u0631\u0627\u0646\u200e","zh-Hans":"\u5fb7\u9ed1\u5170","zh-Hant":"\u5fb7\u9ed1\u862d"}},{id:r.Tianjin,country:"CN",name:{en:"Tianjin",zh:"\u5929\u6d25"}},{id:r.Tokyo,country:"JP",name:{en:"Tokyo (Greater Tokyo Area)",ja:"\u6771\u4eac\uff08\u9996\u90fd\u570f\uff09","zh-Hans":"\u4e1c\u4eac\uff08\u9996\u90fd\u5708\uff09","zh-Hant":"\u6771\u4eac\uff08\u9996\u90fd\u5708\uff09"}},{id:r.Toronto,country:"CA",name:{en:"Toronto","zh-Hans":"\u591a\u4f26\u591a","zh-Hant":"\u591a\u502b\u591a"}},{id:r.TyneAndWear,country:"GBENG",name:{en:"Tyne and Wear","zh-Hans":"\u6cf0\u6069-\u5a01\u5c14","zh-HK":"\u6cf0\u5a01","zh-TW":"\u6cf0\u6069-\u5a01\u723e"}},{id:r.Xian,country:"CN",name:{en:"Xi'an",zh:"\u897f\u5b89"}},{id:r.Other,country:"UN",name:{en:"Customise","zh-Hans":"\u81ea\u5b9a\u4e49","zh-Hant":"\u81ea\u8a02"}}]},,,function(n,e){n.exports=ReactDOM},function(n,e){n.exports=i18nextXHRBackend},function(n,e){n.exports=i18nextBrowserLanguageDetector},function(n,e){n.exports=ReduxThunk},,function(n,e,t){},,function(n,e,t){"use strict";t.r(e);var r=t(6),a=t.n(r),i=t(9),c=t(12),o=t(5),s=t.n(o),u=t(28),l=(t(33),t(23)),d=t.n(l),h=t(14),f=t(29),b=t.n(f),g=t(30),p=t.n(g);d.a.use(b.a).use(p.a).use(h.initReactI18next).init({fallbackLng:{"zh-CN":["zh-Hans","en"],"zh-Hant":["zh-HK","en"],"zh-HK":["zh-Hant","en"],"zh-TW":["zh-HK","zh-Hant"],default:["en"]},backend:{loadPath:"/RailMapGenerator/locale/{{lng}}.json"},interpolation:{escapeValue:!1}}).then((function(n){document.title=n("title"),document.documentElement.setAttribute("lang",d.a.language)}));var j,m,O,v,y=t(16),_=t(11),S=t(3),w=t(2),x=t(8),T=t(10),z=t(0),k=Object(S.makeStyles)((function(n){return Object(S.createStyles)({rootLight:{backgroundColor:n.palette.primary.main},rootDark:{backgroundColor:n.palette.background.paper},title:{flexGrow:1,color:"#fff"},menuButton:{color:"#fff"}})})),N=function(){var n=Object(h.useTranslation)(),e=n.t,t=n.i18n,r=k(),a=Object(S.useMediaQuery)("(prefers-color-scheme: dark)");return s.a.useMemo((function(){return Object(z.jsx)(S.AppBar,{position:"sticky",className:a?r.rootDark:r.rootLight,children:Object(z.jsxs)(S.Toolbar,{variant:"dense",children:[Object(z.jsx)(S.Typography,{variant:"h6",className:r.title,color:"textPrimary",children:"/RailMapGenerator".includes("uat")?e("titleUAT"):e("title")}),Object(z.jsx)(E,{}),Object(z.jsx)(H,{})]})})}),[a,t.language])},E=function(){var n=Object(h.useTranslation)().t,e=k(),t=Object(x.b)(),r=Object(x.c)((function(n){return n.param.style})),a=s.a.useState(null),i=Object(_.a)(a,2),c=i[0],o=i[1],u=function(n){return function(){t(Object(T.e)(n)),o(null)}};return s.a.useMemo((function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(S.Tooltip,{title:n("toggle.tooltip"),children:Object(z.jsx)(S.IconButton,{onClick:function(n){return o(n.currentTarget)},className:e.menuButton,children:Object(z.jsx)(S.Icon,{children:"photo_library"})})}),Object(z.jsxs)(S.Menu,{anchorEl:c,open:Boolean(c),onClose:function(){return o(null)},children:[w.n[r].map((function(e){return Object(z.jsx)(S.MenuItem,{onClick:u(e),children:n("toggle."+e)},e)})),Object(z.jsx)(S.Divider,{style:{margin:"6px 0"}}),Object(z.jsx)(S.MenuItem,{onClick:u(w.a),children:n("toggle.all")})]})]})}),[r,c,e.menuButton])},H=function(){var n=Object(h.useTranslation)().t,e=k(),t=Object(x.b)();return s.a.useMemo((function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(S.Tooltip,{title:n("zoom.out"),children:Object(z.jsx)(S.IconButton,{onClick:function(){return t(Object(T.i)())},className:e.menuButton,children:Object(z.jsx)(S.Icon,{children:"zoom_out"})})}),Object(z.jsx)(S.Tooltip,{title:n("zoom.in"),children:Object(z.jsx)(S.IconButton,{onClick:function(){return t(Object(T.h)())},className:e.menuButton,children:Object(z.jsx)(S.Icon,{children:"zoom_in"})})})]})}),[e.menuButton])},R=t(1),M=t(4),I=t(19),C=t(20),P=t(27),D=t(26),B=function(n){Object(P.a)(t,n);var e=Object(D.a)(t);function t(n){var r;return Object(I.a)(this,t),(r=e.call(this,n)).state={hasError:!1},r}return Object(C.a)(t,[{key:"componentDidCatch",value:function(n,e){}},{key:"render",value:function(){return this.state.hasError?Object(z.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0}}}]),t}(s.a.Component),F=t(7),A=Object(S.makeStyles)((function(){return Object(S.createStyles)({root:{display:"flex",flexDirection:"row",overflowX:"scroll","&::before, &::after":{content:'""',margin:"auto"},"& > svg":{flex:"0 0 auto",border:"1px solid black"}}})})),G=function(){var n=A(),e=Object(x.c)((function(n){return n.app.canvasScale})),t=Object(x.c)((function(n){return n.param.svg_height})),r=Object(x.c)((function(n){return n.param.svgWidth})),a=Object(x.c)((function(n){return n.param.theme})),i=Object(o.useCallback)((function(n){var i;return{id:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",height:t*e,viewBox:"0 0 ".concat(r[n]," ").concat(t),colorInterpolationFilters:"sRGB",style:(i={},Object(M.a)(i,"--rmg-svg-width",r[n]+"px"),Object(M.a)(i,"--rmg-svg-height",t+"px"),Object(M.a)(i,"--rmg-theme-colour",a[2]),Object(M.a)(i,"--rmg-theme-fg",a[3]),i)}}),[t,JSON.stringify(r),a,e]),c=Object(x.c)((function(n){return n.param.style}));return Object(z.jsx)("div",{className:n.root,children:Object(z.jsxs)(y.Switch,{children:[Object.values(w.k).map((function(n){return Object(z.jsx)(y.Route,{path:"/".concat(n),children:Object(z.jsx)(W,{style:n,canvasAvailable:q[n],svgProps:i})},n)})),Object(z.jsx)(y.Redirect,{to:"/".concat(c)})]})})},W=Object(o.memo)((function(n){var e=Object(x.b)(),t=Object(x.c)((function(n){return n.app.canvasToShow}));return e(Object(F.T)(n.style)),Object(o.useEffect)((function(){["share"].concat(Object(c.a)(Object.values(w.c))).forEach((function(e){e in n.canvasAvailable||"share"===e?document.getElementById("css_"+e).href="/RailMapGenerator"+"/styles/".concat(e,"_").concat(n.style,".css"):document.getElementById("css_"+e).href=""})),![].concat(Object(c.a)(w.n[n.style]),[w.a]).includes(t)&&e(Object(T.e)(w.a))}),[]),Object(z.jsx)(z.Fragment,{children:Object.keys(n.canvasAvailable).map((function(e){return[w.a,e].includes(t)&&Object(z.jsx)(s.a.Suspense,{fallback:Object(z.jsx)(S.CircularProgress,{}),children:Object(z.jsx)(B,{children:Object(z.jsxs)("svg",Object(R.a)(Object(R.a)({},n.svgProps(e)),{},{children:[Object(z.jsx)("rect",{id:"canvas-bg",fill:"white",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}}),n.canvasAvailable[e],Object(z.jsx)("rect",{id:"canvas-border",fill:"none",strokeWidth:3,stroke:"none",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}})]}))})},e)}))})})),L=Object(o.lazy)((function(){return t.e(115).then(t.bind(null,161))})),K=Object(o.lazy)((function(){return t.e(112).then(t.bind(null,155))})),U=Object(o.lazy)((function(){return t.e(93).then(t.bind(null,141))})),Z=Object(o.lazy)((function(){return t.e(113).then(t.bind(null,156))})),J=Object(o.lazy)((function(){return t.e(94).then(t.bind(null,142))})),X=Object(o.lazy)((function(){return t.e(116).then(t.bind(null,143))})),V=Object(o.lazy)((function(){return t.e(114).then(t.bind(null,157))})),Y=Object(o.lazy)((function(){return t.e(95).then(t.bind(null,162))})),q=(v={},Object(M.a)(v,w.k.GZMTR,(j={},Object(M.a)(j,w.c.RunIn,Object(z.jsx)(L,{})),Object(M.a)(j,w.c.RailMap,Object(z.jsx)(K,{})),j)),Object(M.a)(v,w.k.MTR,(m={},Object(M.a)(m,w.c.Destination,Object(z.jsx)(U,{})),Object(M.a)(m,w.c.RailMap,Object(z.jsx)(Z,{})),m)),Object(M.a)(v,w.k.SHMetro,(O={},Object(M.a)(O,w.c.Destination,Object(z.jsx)(J,{})),Object(M.a)(O,w.c.RunIn,Object(z.jsx)(X,{})),Object(M.a)(O,w.c.RailMap,Object(z.jsx)(V,{})),Object(M.a)(O,w.c.Indoor,Object(z.jsx)(Y,{})),O)),v),Q=G,$=o.lazy((function(){return t.e(105).then(t.bind(null,154))})),nn=o.lazy((function(){return t.e(102).then(t.bind(null,158))})),en=o.lazy((function(){return t.e(97).then(t.bind(null,159))})),tn=o.lazy((function(){return t.e(107).then(t.bind(null,153))})),rn=o.lazy((function(){return t.e(101).then(t.bind(null,144))})),an=Object(S.makeStyles)((function(n){var e;return Object(S.createStyles)({root:Object(M.a)({display:"flex",flexDirection:"row",height:"100%"},n.breakpoints.down("xs"),{flexDirection:"column"}),typography:{background:n.palette.background.default},tab:(e={padding:"6px 24px",height:48,"& .MuiTab-wrapper":{flexDirection:"row"}},Object(M.a)(e,n.breakpoints.up("sm"),{"& .MuiTab-wrapper":{justifyContent:"flex-start"}}),Object(M.a)(e,n.breakpoints.down("xs"),{minWidth:"calc(100% / 5)"}),Object(M.a)(e,"&.MuiTab-labelIcon",{minHeight:"unset","& .MuiTab-wrapper":{"& > *:first-child":{marginBottom:0},"& > *:not(first-child)":{paddingLeft:8}}}),e),tabs:{overflow:"auto","&::-webkit-scrollbar":{width:0},scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},tabpanel:{overflow:"auto",flex:1,padding:n.spacing(3),paddingBottom:0,height:"calc(100% - ".concat(n.spacing(3),"px)"),display:"flex",justifyContent:"center",alignItems:"flex-start"}})}));function cn(){var n=Object(h.useTranslation)(),e=n.t,t=n.i18n,r=an(),a=Object(S.useTheme)(),i=Object(S.useMediaQuery)(a.breakpoints.down("xs")),c=o.useState(0),s=Object(_.a)(c,2),u=s[0],l=s[1],d=o.useMemo((function(){return Object(z.jsx)(S.Typography,{className:"".concat(r.typography," ").concat(r.tabs),component:"div",children:Object(z.jsx)(S.Tabs,{value:u,orientation:i?"horizontal":"vertical",indicatorColor:"primary",textColor:"primary",onChange:function(n,e){return l(e)},variant:"scrollable",scrollButtons:"off",children:[["file","insert_drive_file"],["layout","panorama"],["design","brush"],["stations","directions_transit"],["info","info"]].map((function(n,t){return Object(z.jsx)(S.Tab,{label:Object(z.jsx)("span",{children:e("tab."+n[0])}),icon:Object(z.jsx)(S.Icon,{children:n[1]}),className:r.tab},t)}))})})}),[u,t.language,r.tab,i]);return Object(z.jsxs)("div",{className:r.root,children:[d,Object(z.jsx)(S.Typography,{className:"".concat(r.typography," ").concat(r.tabpanel),component:"div",role:"tabpanel",children:Object(z.jsx)(o.Suspense,{fallback:Object(z.jsx)(S.CircularProgress,{}),children:function(n){switch(n){case 0:return Object(z.jsx)($,{});case 1:return Object(z.jsx)(nn,{});case 2:return Object(z.jsx)(en,{});case 3:return Object(z.jsx)(tn,{});case 4:return Object(z.jsx)(rn,{});default:return Object(z.jsx)($,{})}}(u)})})]})}function on(){return Object(z.jsx)(o.Suspense,{fallback:Object(z.jsx)(S.CircularProgress,{}),children:Object(z.jsx)(cn,{})})}var sn=Object(S.createMuiTheme)({palette:{type:"dark",primary:{main:"#bb86fc"},secondary:{main:"#018786"},error:{main:"#cf6679"}},overrides:{MuiDialog:{paper:{minWidth:280}}}}),un=Object(S.createMuiTheme)({palette:{primary:{light:"#bb86fc",main:"#6200ee"},secondary:{main:"#018786"},error:{main:"#b00020"}},overrides:{MuiDialog:{paper:{minWidth:280}}}});function ln(){var n=Object(S.useMediaQuery)("(prefers-color-scheme: dark)")?sn:un;return Object(z.jsx)(y.BrowserRouter,{basename:"/RailMapGenerator",children:Object(z.jsxs)(S.ThemeProvider,{theme:n,children:[Object(z.jsx)(s.a.Suspense,{fallback:Object(z.jsx)(S.LinearProgress,{}),children:Object(z.jsx)(N,{})}),Object(z.jsx)(dn,{})]})})}var dn=function(){var n=Object(x.c)((function(n){return n.param})),e=JSON.stringify(n);return Object(o.useEffect)((function(){window.rmgStorage.writeFile("rmgParam",e).then()}),[e]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{style:{overflowY:"auto"},children:Object(z.jsx)(Q,{})}),Object(z.jsx)("div",{style:{flex:1,overflow:"hidden"},children:Object(z.jsx)(on,{})}),Object(z.jsx)("canvas",{style:{display:"none"}})]})},hn=t(22);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fn=function(){function n(){Object(I.a)(this,n),this.currentBusyFilename=void 0,this.currentBusyFilename=!1}return Object(C.a)(n,[{key:"init",value:function(){var n=Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.warn("Using localStorage, please update your browser"),window.localStorage){n.next=4;break}throw alert("Local storage is not available! Please upgrade to a newer browser!"),new Error("LocalStorage unavailable");case 4:n.prev=4,window.localStorage.setItem("storage_test","1"),window.localStorage.removeItem("storage_test"),n.next=13;break;case 9:throw n.prev=9,n.t0=n.catch(4),alert("Local storage is not accessible! Please modify your browser's settings or try with another browser!"),new Error("LocalStorage no write permission");case 13:case"end":return n.stop()}}),n,null,[[4,9]])})));return function(){return n.apply(this,arguments)}}()},{key:"writeFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e,t){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.currentBusyFilename===e&&console.warn("Attempt to write",e,"while write process is not finished!"),this.currentBusyFilename=e,window.localStorage.setItem(e,t),this.currentBusyFilename=!1;case 4:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}()},{key:"readFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e){var t;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.currentBusyFilename===e&&console.warn("Attempt to read",e,"while write process is not finished!"),t=window.localStorage.getItem(e)){n.next=4;break}throw new Error("FILE_NOT_FOUND");case 4:return n.abrupt("return",t);case 5:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.currentBusyFilename===e&&console.warn("Attempt to delete",e,"while write process is not finished!"),this.currentBusyFilename=e,window.localStorage.removeItem(e),this.currentBusyFilename=!1;case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()}]),n}();function bn(){return(bn=Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.indexedDB){n.next=3;break}return console.log("IndexedDB not supported"),n.abrupt("return",new fn);case 3:return n.next=5,new Promise((function(n){try{var e=window.indexedDB.open("indexeddb_feature_detection",1);e.onerror=function(e){console.log("IndexedDB can NOT be accessed:",e),console.log("Fallback to LocalStorage"),n(new fn)},e.onsuccess=function(){console.log("IndexedDB can be accessed"),n(new fn)}}catch(t){console.warn("Error while opening IndexedDB:",t),n(new fn)}}));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var gn,pn=t(18);"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)})),(gn=document.head).append.apply(gn,Object(c.a)(["share"].concat(Object(c.a)(Object.values(w.c))).map((function(n){var e=document.createElement("link");return e.rel="stylesheet",e.id="css_"+n,e}))));(function(){return bn.apply(this,arguments)})().then(function(){var n=Object(i.a)(a.a.mark((function n(e){var r,i,c,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.init();case 2:return n.prev=2,n.next=5,e.readFile("rmgParam");case 5:return r=n.sent,i=Object(hn.c)(JSON.parse(r)),n.next=9,e.writeFile("rmgParam",JSON.stringify(i));case 9:n.next=20;break;case 11:return n.prev=11,n.t0=n.catch(2),console.warn("Error in reading rmgParam",n.t0),n.next=16,t.e(0).then(t.bind(null,90));case 16:return c=n.sent,o=Object(hn.c)(c.default),n.next=20,e.writeFile("rmgParam",JSON.stringify(o));case 20:return n.prev=20,window.rmgStorage=e,n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[2,11,20,23]])})));return function(e){return n.apply(this,arguments)}}()).then(Object(i.a)(a.a.mark((function n(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.rmgStorage.readFile("rmgParam");case 2:e=n.sent,x.a.dispatch(Object(F.L)(JSON.parse(e)));case 4:case"end":return n.stop()}}),n)})))).then(Object(i.a)(a.a.mark((function n(){var e,t,r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.rmgStorage.readFile("rmgScale");case 3:e=n.sent,(t=Number(e))>=.1&&x.a.dispatch(Object(T.f)(t)),n.next=15;break;case 8:return n.prev=8,n.t0=n.catch(0),console.warn("Error in reading rmgScale file",n.t0),console.log("Initiating rmgScale as 1"),n.next=14,window.rmgStorage.writeFile("rmgScale","1");case 14:x.a.dispatch(Object(T.f)(1));case 15:return n.prev=15,n.next=18,window.rmgStorage.readFile("rmgCanvas");case 18:r=n.sent,x.a.dispatch(Object(T.g)(r)),n.next=29;break;case 22:return n.prev=22,n.t1=n.catch(15),console.warn("Error in reading rmgCanvas file",n.t1),console.log('Initiating rmgCanvas as "all"'),n.next=28,window.rmgStorage.writeFile("rmgCanvas",w.a);case 28:x.a.dispatch(Object(T.g)(w.a));case 29:window.rmgStore=x.a;case 30:case"end":return n.stop()}}),n,null,[[0,8],[15,22]])})))).then((function(){u.render(Object(z.jsx)(pn.Provider,{store:x.a,children:Object(z.jsx)(ln,{})}),document.getElementById("root"))})).then((function(){setInterval(Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.rmgStorage.writeFile("rmgParamRedux",JSON.stringify(window.rmgStore.getState().param));case 2:console.log("Parameter auto saved!");case 3:case"end":return n.stop()}}),n)}))),6e4)}))}],[[35,117,118]]]);
//# sourceMappingURL=main.58835883.chunk.js.map