(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[84],{126:function(t,e,n){"use strict";n.r(e);var i=n(0),s=n(4),r=n.n(s),c=n(12),a=n(5),d=n(22),l=n(21),o=n(11),j=n(3),h=n(7),b=n(1),u=Object(a.makeStyles)((function(){return Object(a.createStyles)({select:{width:166}})}));e.default=function(t){var e=Object(c.useTranslation)().t;return Object(b.jsxs)(a.List,{children:[Object(b.jsx)(a.ListItem,{children:Object(b.jsx)(a.ListItemText,{children:Object(b.jsx)("h3",{style:{margin:0},children:e("stations.edit.branch.left")})})}),Object(b.jsx)(O,{stnId:t.stnId,direction:j.d.left}),Object(b.jsx)(a.Divider,{}),Object(b.jsx)(a.ListItem,{children:Object(b.jsx)(a.ListItemText,{children:Object(b.jsx)("h3",{style:{margin:0},children:e("stations.edit.branch.right")})})}),Object(b.jsx)(O,{stnId:t.stnId,direction:j.d.right})]})};var O=function(t){var e=Object(o.useSelector)((function(t){return t.app.rmgStyle})),n=Object(s.useContext)(l.a).param.stn_list[t.stnId].branch[t.direction];return r.a.useMemo((function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p,Object(i.a)({},t)),n[0]&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,Object(i.a)({},t)),e!==j.k.SHMetro&&Object(b.jsx)(I,Object(i.a)({},t))]})]})}),[t.stnId,t.direction,n[0]])},p=function(t){var e=Object(c.useTranslation)().t,n=u(),i=Object(o.useDispatch)(),s=r.a.useContext(l.a),d=s.param,j=s.dispatch,O=d.stn_list[t.stnId].branch[t.direction],p=function(e){var n=e.target.value;"na"!==n&&n!==O[0]&&(j({type:"UPDATE_STATION_BRANCH_TYPE",stnId:t.stnId,direction:t.direction,branchType:n}),i(Object(h.bb)(t.stnId,t.direction,n)))};return r.a.useMemo((function(){return Object(b.jsxs)(a.ListItem,{children:[Object(b.jsx)(a.ListItemIcon,{children:Object(b.jsx)(a.Icon,{children:"merge_type"})}),Object(b.jsx)(a.ListItemText,{primary:e("stations.edit.branch.type.title")}),Object(b.jsxs)(a.Select,{native:!0,onChange:p,value:O[0]||"na",className:n.select,children:[Object(b.jsx)("option",{value:"na",disabled:0!==O.length,children:e("stations.edit.branch.type.na")}),Object(b.jsx)("option",{value:"through",disabled:0===O.length,children:e("stations.edit.branch.type.through")}),Object(b.jsx)("option",{value:"nonthrough",disabled:0===O.length,children:e("stations.edit.branch.type.nonThrough")})]})]})}),[t.stnId,O[0]])},x=function(t){var e=Object(c.useTranslation)().t,n=u(),i=Object(o.useDispatch)(),O=Object(o.useSelector)((function(t){return t.app.rmgStyle})),p=Object(s.useContext)(l.a),x=p.param,I=p.dispatch,f=x.stn_list[t.stnId],m=f.branch[t.direction],g="left"===t.direction?f.parents:f.children,v=function(e){var n=e.target.value;if(m[1]!==n){var s,r=n,c=x.stn_list;if("right"===t.direction){for(;1===c[r].parents.length;)r=c[r].children[0];s=c[r].parents[g.indexOf(n)]}else{for(;1===c[r].children.length;)r=c[r].parents[0];s=c[r].children[g.indexOf(n)]}var a=[{stnId:t.stnId,direction:t.direction,first:n},{stnId:r,direction:t.direction===j.d.left?j.d.right:j.d.left,first:s}];I({type:"UPDATE_STATION_BRANCH_FIRST",branches:a}),i(Object(h.ab)(a))}};return r.a.useMemo((function(){return Object(b.jsxs)(a.ListItem,{children:[Object(b.jsx)(a.ListItemIcon,{children:Object(b.jsx)(a.Icon,{style:{transform:"left"===t.direction?"scale(-1)":"scale(1)"},children:"share"})}),Object(b.jsx)(a.ListItemText,{primary:e("stations.edit.branch.first")}),Object(b.jsx)(a.Select,{native:!0,onChange:v,value:m[1]||g[0],className:n.select,children:g.map((function(t){return Object(b.jsx)("option",{value:t,children:Object(d.a)(x.stn_list[t],O)},t)}))})]})}),[t.stnId,m[1],g.toString()])},I=function(t){var e=Object(c.useTranslation)().t,n=u(),i=Object(o.useDispatch)(),s=r.a.useContext(l.a),d=s.param,O=s.dispatch,p=d.stn_list[t.stnId],x=p.branch[t.direction],I="left"===t.direction?p.parents:p.children,f=function(e){var n="lower"===e.target.value?1:0;if(I.indexOf(x[1])!==n){var s=x[1],r=d.stn_list;if(t.direction===j.d.right){for(;1===r[s].parents.length;)s=r[s].children[0];O({type:"UPDATE_STATION_BRANCH_POS",right:t.stnId,left:s}),i(Object(h.z)(s,t.stnId))}else{for(;1===r[s].children.length;)s=r[s].parents[0];O({type:"UPDATE_STATION_BRANCH_POS",left:t.stnId,right:s}),i(Object(h.z)(t.stnId,s))}}};return r.a.useMemo((function(){return Object(b.jsxs)(a.ListItem,{children:[Object(b.jsx)(a.ListItemIcon,{children:Object(b.jsx)(a.Icon,{children:"swap_vert"})}),Object(b.jsx)(a.ListItemText,{primary:e("stations.edit.branch.pos.title")}),Object(b.jsx)(a.Select,{native:!0,onChange:f,value:1===I.indexOf(x[1])?"lower":"upper",className:n.select,children:["upper","lower"].map((function(t){return Object(b.jsx)("option",{value:t,children:e("stations.edit.branch.pos."+t)},t)}))})]})}),[t.stnId,x[1],I.toString()])}}}]);
//# sourceMappingURL=panelStationsBranch.741aa563.chunk.js.map