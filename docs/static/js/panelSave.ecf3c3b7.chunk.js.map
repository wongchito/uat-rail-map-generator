{"version":3,"sources":["../node_modules/@material-ui/core/esm/internal/SwitchBase.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@material-ui/core/esm/Switch/Switch.js","../node_modules/@material-ui/core/esm/DialogContentText/DialogContentText.js","../node_modules/@material-ui/core/esm/Card/Card.js","../node_modules/@material-ui/core/esm/internal/svg-icons/CheckBoxOutlineBlank.js","../node_modules/@material-ui/core/esm/internal/svg-icons/CheckBox.js","../node_modules/@material-ui/core/esm/internal/svg-icons/IndeterminateCheckBox.js","../node_modules/@material-ui/core/esm/Checkbox/Checkbox.js","../node_modules/react-i18next/dist/es/withTranslation.js","panels/save/upload-item.tsx","panels/save/export-diag/utils.ts","panels/save/export-diag/preview-diag.tsx","panels/save/export-diag/index.ts","panels/save/export-diag/dialog.tsx","panels/save/panel.tsx","panels/save/index.ts"],"names":["SwitchBase","React","props","ref","autoFocus","checkedProp","checked","checkedIcon","classes","className","defaultChecked","disabledProp","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value","other","_objectWithoutProperties","_useControlled","useControlled","controlled","default","Boolean","_useControlled2","_slicedToArray","setCheckedState","muiFormControl","useFormControl","hasLabelFor","IconButton","_extends","component","clsx","root","role","undefined","event","input","newChecked","target","withStyles","padding","cursor","position","opacity","width","height","top","left","margin","zIndex","objectWithoutPropertiesLoose","module","exports","source","excluded","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","__esModule","sourceKeys","keys","Switch","_props$color","color","_props$edge","edge","_props$size","size","thumb","edgeStart","edgeEnd","concat","capitalize","switchBase","track","theme","display","overflow","boxSizing","flexShrink","verticalAlign","marginLeft","marginRight","palette","grey","transition","transitions","create","duration","shortest","transform","colorPrimary","primary","main","backgroundColor","fade","action","hoverOpacity","common","black","white","colorSecondary","secondary","sizeSmall","boxShadow","shadows","borderRadius","DialogContentText","Typography","variant","marginBottom","Card","_props$raised","raised","Paper","elevation","createSvgIcon","d","defaultCheckedIcon","CheckBoxIcon","defaultIcon","CheckBoxOutlineBlankIcon","defaultIndeterminateIcon","IndeterminateCheckBoxIcon","Checkbox","_props$checkedIcon","_props$icon","_props$indeterminate","indeterminate","_props$indeterminateI","indeterminateIcon","fontSize","text","_excluded","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","UploadLi","t","useTranslation","useState","open","setOpen","importedParam","setImportedParam","ListItem","button","htmlFor","ListItemIcon","Icon","ListItemText","accept","style","console","log","files","Promise","resolve","reader","FileReader","onloadend","readAsText","then","e","JSON","parse","result","param","ImportDialog","onClose","a","document","getElementById","window","rmgStorage","writeFile","stringify","location","reload","error","content","Dialog","DialogTitle","DialogContent","dividers","whiteSpace","stn_list","entries","map","x","includes","join","trim","replace","DialogActions","Button","onClick","test","svgEl","scale","svgW","viewBox","baseVal","svgH","canvas","querySelectorAll","Number","devicePixelRatio","setAttribute","toString","ctx","getContext","clearRect","el","elStyle","getComputedStyle","fontFamily","fill","dominantBaseline","textAnchor","img","Image","onload","setTimeout","drawImage","uri","filename","link","createElement","download","href","body","appendChild","click","removeChild","saveAs","toDataURL","Date","toISOString","src","btoa","unescape","encodeURIComponent","outerHTML","useStyles","makeStyles","createStyles","contentWrapper","paddingTop","spacing","paddingBottom","paddingLeft","paddingRight","breakpoints","down","flexDirection","contentCanvas","flex","contentControl","flexGrow","minWidth","contentRoot","contentControlContent","justifyContent","formControlRoot","PreviewDialog","rmgStyle","useContext","CanvasContext","setSvgEl","isLoaded","setIsLoaded","showBorder","setShowBorder","isTransparent","setIsTransparent","setScale","format","setFormat","isAccept","setIsAccept","isTermsDialogOpen","setIsTermsDialogOpen","contentEl","useRef","useEffect","querySelector","getPropertyValue","match","thisSVGHeight","elem","cloneNode","setProperty","tag","l","sheet","cssRules","rule","cssText","txt","s","textContent","prepend","getBase64FontFace","response","all","uris","catch","err","alert","fonts","ready","handleClose","current","removeAttribute","maxWidth","dangerouslySetInnerHTML","__html","List","disablePadding","ListItemSecondaryAction","_","Divider","Select","native","nextScale","getAttribute","ratio","toFixed","TermsDialog","useMemo","ExportDialog","canvasAvailable","canvasToShown","previewDialogOpened","setPreviewDialogOpened","setCanvas","c","TemplateDialog","lazy","allLangs","en","SaveLists","i18n","isTempDialogOpen","setIsTempDialogOpen","isExportDialogOpen","setIsExportDialogOpen","isStyleDialogOpen","setIsStyleDialogOpen","isLangDialogOpen","setIsLangDialogOpen","localStorage","rmgParam","getTransText2","languages","Suspense","fallback","LinearProgress","StyleDialog","gtag","event_category","event_label","LangDialog","to","textDecoration","lang","language","changeLanguage","title","documentElement","Panel","TranslatedSaveLists","ns","options","WrappedComponent","I18nextWithTranslation","_ref","forwardedRef","rest","_useTranslation","_useTranslation2","passDownProps","tReady","withRef","displayName","getDisplayName","forwardRef","assign","withTranslation","Grid","container","justify","alignItems","item","xs","sm","md","lg"],"mappings":"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","file":"static/js/panelSave.ecf3c3b7.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport useControlled from '../utils/useControlled';\nimport useFormControl from '../FormControl/useFormControl';\nimport withStyles from '../styles/withStyles';\nimport IconButton from '../IconButton';\nexport var styles = {\n  root: {\n    padding: 9\n  },\n  checked: {},\n  disabled: {},\n  input: {\n    cursor: 'inherit',\n    position: 'absolute',\n    opacity: 0,\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n    margin: 0,\n    padding: 0,\n    zIndex: 1\n  }\n};\n/**\n * @ignore - internal component.\n */\n\nvar SwitchBase = React.forwardRef(function SwitchBase(props, ref) {\n  var autoFocus = props.autoFocus,\n      checkedProp = props.checked,\n      checkedIcon = props.checkedIcon,\n      classes = props.classes,\n      className = props.className,\n      defaultChecked = props.defaultChecked,\n      disabledProp = props.disabled,\n      icon = props.icon,\n      id = props.id,\n      inputProps = props.inputProps,\n      inputRef = props.inputRef,\n      name = props.name,\n      onBlur = props.onBlur,\n      onChange = props.onChange,\n      onFocus = props.onFocus,\n      readOnly = props.readOnly,\n      required = props.required,\n      tabIndex = props.tabIndex,\n      type = props.type,\n      value = props.value,\n      other = _objectWithoutProperties(props, [\"autoFocus\", \"checked\", \"checkedIcon\", \"classes\", \"className\", \"defaultChecked\", \"disabled\", \"icon\", \"id\", \"inputProps\", \"inputRef\", \"name\", \"onBlur\", \"onChange\", \"onFocus\", \"readOnly\", \"required\", \"tabIndex\", \"type\", \"value\"]);\n\n  var _useControlled = useControlled({\n    controlled: checkedProp,\n    default: Boolean(defaultChecked),\n    name: 'SwitchBase'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      checked = _useControlled2[0],\n      setCheckedState = _useControlled2[1];\n\n  var muiFormControl = useFormControl();\n\n  var handleFocus = function handleFocus(event) {\n    if (onFocus) {\n      onFocus(event);\n    }\n\n    if (muiFormControl && muiFormControl.onFocus) {\n      muiFormControl.onFocus(event);\n    }\n  };\n\n  var handleBlur = function handleBlur(event) {\n    if (onBlur) {\n      onBlur(event);\n    }\n\n    if (muiFormControl && muiFormControl.onBlur) {\n      muiFormControl.onBlur(event);\n    }\n  };\n\n  var handleInputChange = function handleInputChange(event) {\n    var newChecked = event.target.checked;\n    setCheckedState(newChecked);\n\n    if (onChange) {\n      onChange(event, newChecked);\n    }\n  };\n\n  var disabled = disabledProp;\n\n  if (muiFormControl) {\n    if (typeof disabled === 'undefined') {\n      disabled = muiFormControl.disabled;\n    }\n  }\n\n  var hasLabelFor = type === 'checkbox' || type === 'radio';\n  return /*#__PURE__*/React.createElement(IconButton, _extends({\n    component: \"span\",\n    className: clsx(classes.root, className, checked && classes.checked, disabled && classes.disabled),\n    disabled: disabled,\n    tabIndex: null,\n    role: undefined,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"input\", _extends({\n    autoFocus: autoFocus,\n    checked: checkedProp,\n    defaultChecked: defaultChecked,\n    className: classes.input,\n    disabled: disabled,\n    id: hasLabelFor && id,\n    name: name,\n    onChange: handleInputChange,\n    readOnly: readOnly,\n    ref: inputRef,\n    required: required,\n    tabIndex: tabIndex,\n    type: type,\n    value: value\n  }, inputProps)), checked ? checkedIcon : icon);\n}); // NB: If changed, please update Checkbox, Switch and Radio\n// so that the API documentation is updated.\n\nprocess.env.NODE_ENV !== \"production\" ? SwitchBase.propTypes = {\n  /**\n   * If `true`, the `input` element will be focused during the first mount.\n   */\n  autoFocus: PropTypes.bool,\n\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n\n  /**\n   * The icon to display when the component is checked.\n   */\n  checkedIcon: PropTypes.node.isRequired,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  defaultChecked: PropTypes.bool,\n\n  /**\n   * If `true`, the switch will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * The icon to display when the component is unchecked.\n   */\n  icon: PropTypes.node.isRequired,\n\n  /**\n   * The id of the `input` element.\n   */\n  id: PropTypes.string,\n\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Attributes) applied to the `input` element.\n   */\n  inputProps: PropTypes.object,\n\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n\n  /*\n   * @ignore\n   */\n  name: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  onBlur: PropTypes.func,\n\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {object} event The event source of the callback.\n   * You can pull out the new checked state by accessing `event.target.checked` (boolean).\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onFocus: PropTypes.func,\n\n  /**\n   * It prevents the user from changing the value of the field\n   * (not from interacting with the field).\n   */\n  readOnly: PropTypes.bool,\n\n  /**\n   * If `true`, the `input` element will be required.\n   */\n  required: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  tabIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /**\n   * The input component prop `type`.\n   */\n  type: PropTypes.string.isRequired,\n\n  /**\n   * The value of the component.\n   */\n  value: PropTypes.any\n} : void 0;\nexport default withStyles(styles, {\n  name: 'PrivateSwitchBase'\n})(SwitchBase);","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n// @inheritedComponent IconButton\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport { fade } from '../styles/colorManipulator';\nimport capitalize from '../utils/capitalize';\nimport SwitchBase from '../internal/SwitchBase';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      display: 'inline-flex',\n      width: 34 + 12 * 2,\n      height: 14 + 12 * 2,\n      overflow: 'hidden',\n      padding: 12,\n      boxSizing: 'border-box',\n      position: 'relative',\n      flexShrink: 0,\n      zIndex: 0,\n      // Reset the stacking context.\n      verticalAlign: 'middle' // For correct alignment with the text.\n\n    },\n\n    /* Styles applied to the root element if `edge=\"start\"`. */\n    edgeStart: {\n      marginLeft: -8\n    },\n\n    /* Styles applied to the root element if `edge=\"end\"`. */\n    edgeEnd: {\n      marginRight: -8\n    },\n\n    /* Styles applied to the internal `SwitchBase` component's `root` class. */\n    switchBase: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 1,\n      // Render above the focus ripple.\n      color: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[400],\n      transition: theme.transitions.create(['left', 'transform'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      '&$checked': {\n        transform: 'translateX(20px)'\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        opacity: 0.5\n      },\n      '&$disabled + $track': {\n        opacity: theme.palette.type === 'light' ? 0.12 : 0.1\n      }\n    },\n\n    /* Styles applied to the internal SwitchBase component's root element if `color=\"primary\"`. */\n    colorPrimary: {\n      '&$checked': {\n        color: theme.palette.primary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.primary.main, theme.palette.action.hoverOpacity),\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        backgroundColor: theme.palette.primary.main\n      },\n      '&$disabled + $track': {\n        backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white\n      }\n    },\n\n    /* Styles applied to the internal SwitchBase component's root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      '&$checked': {\n        color: theme.palette.secondary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.secondary.main, theme.palette.action.hoverOpacity),\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.type === 'light' ? theme.palette.grey[400] : theme.palette.grey[800]\n      },\n      '&$checked + $track': {\n        backgroundColor: theme.palette.secondary.main\n      },\n      '&$disabled + $track': {\n        backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white\n      }\n    },\n\n    /* Styles applied to the root element if `size=\"small\"`. */\n    sizeSmall: {\n      width: 40,\n      height: 24,\n      padding: 7,\n      '& $thumb': {\n        width: 16,\n        height: 16\n      },\n      '& $switchBase': {\n        padding: 4,\n        '&$checked': {\n          transform: 'translateX(16px)'\n        }\n      }\n    },\n\n    /* Pseudo-class applied to the internal `SwitchBase` component's `checked` class. */\n    checked: {},\n\n    /* Pseudo-class applied to the internal SwitchBase component's disabled class. */\n    disabled: {},\n\n    /* Styles applied to the internal SwitchBase component's input element. */\n    input: {\n      left: '-100%',\n      width: '300%'\n    },\n\n    /* Styles used to create the thumb passed to the internal `SwitchBase` component `icon` prop. */\n    thumb: {\n      boxShadow: theme.shadows[1],\n      backgroundColor: 'currentColor',\n      width: 20,\n      height: 20,\n      borderRadius: '50%'\n    },\n\n    /* Styles applied to the track element. */\n    track: {\n      height: '100%',\n      width: '100%',\n      borderRadius: 14 / 2,\n      zIndex: -1,\n      transition: theme.transitions.create(['opacity', 'background-color'], {\n        duration: theme.transitions.duration.shortest\n      }),\n      backgroundColor: theme.palette.type === 'light' ? theme.palette.common.black : theme.palette.common.white,\n      opacity: theme.palette.type === 'light' ? 0.38 : 0.3\n    }\n  };\n};\nvar Switch = React.forwardRef(function Switch(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'secondary' : _props$color,\n      _props$edge = props.edge,\n      edge = _props$edge === void 0 ? false : _props$edge,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"edge\", \"size\"]);\n\n  var icon = /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.thumb\n  });\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: clsx(classes.root, className, {\n      'start': classes.edgeStart,\n      'end': classes.edgeEnd\n    }[edge], size === \"small\" && classes[\"size\".concat(capitalize(size))])\n  }, /*#__PURE__*/React.createElement(SwitchBase, _extends({\n    type: \"checkbox\",\n    icon: icon,\n    checkedIcon: icon,\n    classes: {\n      root: clsx(classes.switchBase, classes[\"color\".concat(capitalize(color))]),\n      input: classes.input,\n      checked: classes.checked,\n      disabled: classes.disabled\n    },\n    ref: ref\n  }, other)), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.track\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? Switch.propTypes = {\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n\n  /**\n   * The icon to display when the component is checked.\n   */\n  checkedIcon: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['primary', 'secondary', 'default']),\n\n  /**\n   * @ignore\n   */\n  defaultChecked: PropTypes.bool,\n\n  /**\n   * If `true`, the switch will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the ripple effect will be disabled.\n   */\n  disableRipple: PropTypes.bool,\n\n  /**\n   * If given, uses a negative margin to counteract the padding on one\n   * side (this is often helpful for aligning the left or right\n   * side of the icon with content above or below, without ruining the border\n   * size and shape).\n   */\n  edge: PropTypes.oneOf(['start', 'end', false]),\n\n  /**\n   * The icon to display when the component is unchecked.\n   */\n  icon: PropTypes.node,\n\n  /**\n   * The id of the `input` element.\n   */\n  id: PropTypes.string,\n\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Attributes) applied to the `input` element.\n   */\n  inputProps: PropTypes.object,\n\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {object} event The event source of the callback.\n   * You can pull out the new checked state by accessing `event.target.checked` (boolean).\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * If `true`, the `input` element will be required.\n   */\n  required: PropTypes.bool,\n\n  /**\n   * The size of the switch.\n   * `small` is equivalent to the dense switch styling.\n   */\n  size: PropTypes.oneOf(['small', 'medium']),\n\n  /**\n   * The input component prop `type`.\n   */\n  type: PropTypes.string,\n\n  /**\n   * The value of the component. The DOM API casts this to a string.\n   * The browser uses \"on\" as the default value.\n   */\n  value: PropTypes.any\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiSwitch'\n})(Switch);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    marginBottom: 12\n  }\n};\nvar DialogContentText = React.forwardRef(function DialogContentText(props, ref) {\n  return /*#__PURE__*/React.createElement(Typography, _extends({\n    component: \"p\",\n    variant: \"body1\",\n    color: \"textSecondary\",\n    ref: ref\n  }, props));\n});\nprocess.env.NODE_ENV !== \"production\" ? DialogContentText.propTypes = {\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogContentText'\n})(DialogContentText);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport Paper from '../Paper';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    overflow: 'hidden'\n  }\n};\nvar Card = React.forwardRef(function Card(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$raised = props.raised,\n      raised = _props$raised === void 0 ? false : _props$raised,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"raised\"]);\n\n  return /*#__PURE__*/React.createElement(Paper, _extends({\n    className: clsx(classes.root, className),\n    elevation: raised ? 8 : 1,\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Card.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * If `true`, the card will use raised styling.\n   */\n  raised: PropTypes.bool\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCard'\n})(Card);","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n}), 'CheckBoxOutlineBlank');","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n}), 'CheckBox');","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z\"\n}), 'IndeterminateCheckBox');","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { refType } from '@material-ui/utils';\nimport SwitchBase from '../internal/SwitchBase';\nimport CheckBoxOutlineBlankIcon from '../internal/svg-icons/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '../internal/svg-icons/CheckBox';\nimport { fade } from '../styles/colorManipulator';\nimport IndeterminateCheckBoxIcon from '../internal/svg-icons/IndeterminateCheckBox';\nimport capitalize from '../utils/capitalize';\nimport withStyles from '../styles/withStyles';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      color: theme.palette.text.secondary\n    },\n\n    /* Pseudo-class applied to the root element if `checked={true}`. */\n    checked: {},\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Pseudo-class applied to the root element if `indeterminate={true}`. */\n    indeterminate: {},\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    colorPrimary: {\n      '&$checked': {\n        color: theme.palette.primary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.primary.main, theme.palette.action.hoverOpacity),\n          // Reset on touch devices, it doesn't add specificity\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.action.disabled\n      }\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    colorSecondary: {\n      '&$checked': {\n        color: theme.palette.secondary.main,\n        '&:hover': {\n          backgroundColor: fade(theme.palette.secondary.main, theme.palette.action.hoverOpacity),\n          // Reset on touch devices, it doesn't add specificity\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        }\n      },\n      '&$disabled': {\n        color: theme.palette.action.disabled\n      }\n    }\n  };\n};\nvar defaultCheckedIcon = /*#__PURE__*/React.createElement(CheckBoxIcon, null);\nvar defaultIcon = /*#__PURE__*/React.createElement(CheckBoxOutlineBlankIcon, null);\nvar defaultIndeterminateIcon = /*#__PURE__*/React.createElement(IndeterminateCheckBoxIcon, null);\nvar Checkbox = React.forwardRef(function Checkbox(props, ref) {\n  var _props$checkedIcon = props.checkedIcon,\n      checkedIcon = _props$checkedIcon === void 0 ? defaultCheckedIcon : _props$checkedIcon,\n      classes = props.classes,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'secondary' : _props$color,\n      _props$icon = props.icon,\n      icon = _props$icon === void 0 ? defaultIcon : _props$icon,\n      _props$indeterminate = props.indeterminate,\n      indeterminate = _props$indeterminate === void 0 ? false : _props$indeterminate,\n      _props$indeterminateI = props.indeterminateIcon,\n      indeterminateIcon = _props$indeterminateI === void 0 ? defaultIndeterminateIcon : _props$indeterminateI,\n      inputProps = props.inputProps,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      other = _objectWithoutProperties(props, [\"checkedIcon\", \"classes\", \"color\", \"icon\", \"indeterminate\", \"indeterminateIcon\", \"inputProps\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(SwitchBase, _extends({\n    type: \"checkbox\",\n    classes: {\n      root: clsx(classes.root, classes[\"color\".concat(capitalize(color))], indeterminate && classes.indeterminate),\n      checked: classes.checked,\n      disabled: classes.disabled\n    },\n    color: color,\n    inputProps: _extends({\n      'data-indeterminate': indeterminate\n    }, inputProps),\n    icon: React.cloneElement(indeterminate ? indeterminateIcon : icon, {\n      fontSize: size === 'small' ? 'small' : 'default'\n    }),\n    checkedIcon: React.cloneElement(indeterminate ? indeterminateIcon : checkedIcon, {\n      fontSize: size === 'small' ? 'small' : 'default'\n    }),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Checkbox.propTypes = {\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n\n  /**\n   * The icon to display when the component is checked.\n   */\n  checkedIcon: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['primary', 'secondary', 'default']),\n\n  /**\n   * If `true`, the checkbox will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the ripple effect will be disabled.\n   */\n  disableRipple: PropTypes.bool,\n\n  /**\n   * The icon to display when the component is unchecked.\n   */\n  icon: PropTypes.node,\n\n  /**\n   * The id of the `input` element.\n   */\n  id: PropTypes.string,\n\n  /**\n   * If `true`, the component appears indeterminate.\n   * This does not set the native input element to indeterminate due\n   * to inconsistent behavior across browsers.\n   * However, we set a `data-indeterminate` attribute on the input.\n   */\n  indeterminate: PropTypes.bool,\n\n  /**\n   * The icon to display when the component is indeterminate.\n   */\n  indeterminateIcon: PropTypes.node,\n\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Attributes) applied to the `input` element.\n   */\n  inputProps: PropTypes.object,\n\n  /**\n   * Pass a ref to the `input` element.\n   */\n  inputRef: refType,\n\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {object} event The event source of the callback.\n   * You can pull out the new checked state by accessing `event.target.checked` (boolean).\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * If `true`, the `input` element will be required.\n   */\n  required: PropTypes.bool,\n\n  /**\n   * The size of the checkbox.\n   * `small` is equivalent to the dense checkbox styling.\n   */\n  size: PropTypes.oneOf(['small', 'medium']),\n\n  /**\n   * The value of the component. The DOM API casts this to a string.\n   * The browser uses \"on\" as the default value.\n   */\n  value: PropTypes.any\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiCheckbox'\n})(Checkbox);","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"forwardedRef\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { useTranslation } from './useTranslation';\nimport { getDisplayName } from './utils';\nexport function withTranslation(ns) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function Extend(WrappedComponent) {\n    function I18nextWithTranslation(_ref) {\n      var forwardedRef = _ref.forwardedRef,\n          rest = _objectWithoutProperties(_ref, _excluded);\n\n      var _useTranslation = useTranslation(ns, rest),\n          _useTranslation2 = _slicedToArray(_useTranslation, 3),\n          t = _useTranslation2[0],\n          i18n = _useTranslation2[1],\n          ready = _useTranslation2[2];\n\n      var passDownProps = _objectSpread(_objectSpread({}, rest), {}, {\n        t: t,\n        i18n: i18n,\n        tReady: ready\n      });\n\n      if (options.withRef && forwardedRef) {\n        passDownProps.ref = forwardedRef;\n      } else if (!options.withRef && forwardedRef) {\n        passDownProps.forwardedRef = forwardedRef;\n      }\n\n      return React.createElement(WrappedComponent, passDownProps);\n    }\n\n    I18nextWithTranslation.displayName = \"withI18nextTranslation(\".concat(getDisplayName(WrappedComponent), \")\");\n    I18nextWithTranslation.WrappedComponent = WrappedComponent;\n\n    var forwardRef = function forwardRef(props, ref) {\n      return React.createElement(I18nextWithTranslation, Object.assign({}, props, {\n        forwardedRef: ref\n      }));\n    };\n\n    return options.withRef ? React.forwardRef(forwardRef) : I18nextWithTranslation;\n  };\n}","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    ListItem,\n    ListItemIcon,\n    Icon,\n    ListItemText,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogContentText,\n    DialogActions,\n    Button,\n} from '@material-ui/core';\n\nexport default function UploadLi() {\n    const { t } = useTranslation();\n\n    const [open, setOpen] = React.useState(false);\n    const [importedParam, setImportedParam] = React.useState({} as RMGParam);\n\n    const handleUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n        console.log(event.target.files![0]);\n        let filePromise = new Promise((resolve: (event: ProgressEvent<FileReader>) => void) => {\n            let reader = new FileReader();\n            reader.onloadend = resolve;\n            reader.readAsText(event.target.files![0]);\n        });\n        filePromise\n            .then(e => JSON.parse(e.target!.result as string))\n            .then(param => {\n                setImportedParam(param);\n                setOpen(true);\n            });\n    };\n\n    const handleClose = (action: string) => async () => {\n        if (action === 'close') {\n            (document.getElementById('upload-param') as HTMLInputElement).value = '';\n            setOpen(false);\n            return;\n        }\n        if (action === 'accept') {\n            try {\n                await window.rmgStorage.writeFile('rmgParam', JSON.stringify(importedParam));\n                window.location.reload(true);\n            } catch (err) {\n                console.error(err);\n            }\n        }\n    };\n\n    return (\n        <>\n            <ListItem button component=\"label\" htmlFor=\"upload-param\">\n                <ListItemIcon>\n                    <Icon>folder_open</Icon>\n                </ListItemIcon>\n                <ListItemText primary={t('file.open.button')} />\n            </ListItem>\n            <input\n                type=\"file\"\n                accept=\"application/json\"\n                style={{ display: 'none' }}\n                id=\"upload-param\"\n                onChange={handleUpload}\n            />\n            <ImportDialog open={open} onClose={handleClose} content={importedParam} />\n        </>\n    );\n}\n\ninterface ImportDialogProps {\n    onClose: (action: string) => () => void;\n    open: boolean;\n    content: {} | RMGParam;\n}\n\nfunction ImportDialog(props: ImportDialogProps) {\n    const { t } = useTranslation();\n\n    const describeParams = (param: RMGParam) => {\n        return `Number of stations: ${Object.keys(param.stn_list).length - 2}\n                ${Object.entries(param.stn_list)\n                    .map(x => (['linestart', 'lineend'].includes(x[0]) ? '' : x[1].name.join(' - ')))\n                    .join('\\r\\n')\n                    .trim()\n                    .replace(/\\\\/, ' ')}`;\n    };\n\n    return (\n        <Dialog onClose={props.onClose('close')} open={props.open}>\n            <DialogTitle>Your Configuration</DialogTitle>\n            <DialogContent dividers>\n                <DialogContentText style={{ whiteSpace: 'pre-line' }}>\n                    {Object.keys(props.content).length === 0 ? 'empty' : describeParams(props.content as RMGParam)}\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose('close')} color=\"primary\">\n                    {t('dialog.cancel')}\n                </Button>\n                <Button onClick={props.onClose('accept')} color=\"primary\" autoFocus>\n                    Import\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n","export function test(svgEl: SVGSVGElement, scale: number) {\n    let svgW = svgEl.viewBox.baseVal.width;\n    let svgH = svgEl.viewBox.baseVal.height;\n\n    // svgEl.removeAttribute('height');\n\n    let canvas = document.querySelectorAll('canvas')[0];\n    canvas.width = Number(svgW) * window.devicePixelRatio * scale;\n    canvas.height = Number(svgH) * window.devicePixelRatio * scale;\n\n    svgEl.setAttribute('width', canvas.width.toString());\n    svgEl.setAttribute('height', canvas.height.toString());\n\n    let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // bypass Chrome min font size (to be improved)\n\n    svgEl.querySelectorAll('.rmg-name__en.rmg-name__mtr--station').forEach(el => el.setAttribute('font-size', '11px'));\n\n    svgEl.querySelectorAll('.rmg-name__zh.IntName').forEach(el => el.setAttribute('font-size', '10px'));\n\n    svgEl.querySelectorAll('.rmg-name__en.rmg-name__mtr--osi').forEach(el => el.setAttribute('font-size', '9px'));\n\n    svgEl\n        .querySelectorAll('.rmg-name__en.rmg-name__gzmtr--next2-dest')\n        .forEach(el => el.setAttribute('font-size', '8.5px'));\n\n    svgEl.querySelectorAll('.rmg-name__en.IntName').forEach(el => el.setAttribute('font-size', '7px'));\n\n    // svgEl\n    //     .querySelectorAll('text:not([font-size]), tspan:not([font-size])')\n    //     .forEach((el) => el.setAttribute('font-size', window.getComputedStyle(el).fontSize));\n\n    svgEl.querySelectorAll('text, tspan').forEach(el => {\n        let elStyle = window.getComputedStyle(el);\n        el.setAttribute('font-family', elStyle.fontFamily);\n        el.setAttribute('fill', elStyle.fill);\n        el.setAttribute('dominant-baseline', elStyle.dominantBaseline);\n        el.setAttribute('text-anchor', elStyle.textAnchor || '');\n        // el.removeAttribute('class');\n    });\n\n    var img = new Image();\n    img.onload = () => {\n        setTimeout(() => {\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n            saveAs(canvas.toDataURL('image/png'), 'rmg.' + new Date().toISOString() + '.png');\n        }, 2000);\n    };\n    img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgEl.outerHTML)));\n}\n\nfunction saveAs(uri: string, filename: string) {\n    var link = document.createElement('a');\n\n    if (typeof link.download === 'string') {\n        link.href = uri;\n        link.download = filename;\n        //Firefox requires the link to be in the body\n        document.body.appendChild(link);\n        //simulate click\n        link.click();\n        //remove the link when done\n        document.body.removeChild(link);\n    } else {\n        window.open(uri);\n    }\n}\n","import React, { useEffect, useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Button,\n    Switch,\n    makeStyles,\n    createStyles,\n    Select,\n    List,\n    ListItem,\n    ListItemText,\n    ListItemSecondaryAction,\n    Divider,\n    Checkbox,\n    Typography,\n} from '@material-ui/core';\n\nimport { test } from './utils';\nimport { CanvasContext } from '../../../context';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        contentWrapper: {\n            display: 'flex',\n            overflow: 'hidden',\n            paddingTop: theme.spacing(1),\n            paddingBottom: theme.spacing(1),\n            paddingLeft: theme.spacing(3),\n            paddingRight: theme.spacing(3),\n            [theme.breakpoints.down('xs')]: {\n                flexDirection: 'column',\n            },\n        },\n        contentCanvas: {\n            flex: 1,\n        },\n        contentControl: {\n            flexGrow: 0,\n            flexShrink: 0,\n            display: 'flex',\n            flexDirection: 'column',\n            minWidth: 250,\n        },\n        contentRoot: {\n            padding: 'unset',\n            '&:first-child': {\n                paddingTop: 'unset',\n            },\n        },\n        contentControlContent: {\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'space-between',\n        },\n        formControlRoot: {\n            margin: 0,\n        },\n    })\n);\n\ninterface Props {\n    onClose: (action: string) => void;\n    open: boolean;\n    canvas: string;\n}\n\nexport default function PreviewDialog(props: Props) {\n    const { t } = useTranslation();\n    const classes = useStyles();\n\n    const { rmgStyle } = React.useContext(CanvasContext);\n\n    const [svgEl, setSvgEl] = useState((document.createElement('svg') as Element) as SVGSVGElement);\n    const [isLoaded, setIsLoaded] = useState(false);\n\n    const [showBorder, setShowBorder] = useState(false);\n    const [isTransparent, setIsTransparent] = useState(false);\n    const [scale, setScale] = useState(1);\n    const [format, setFormat] = useState('png');\n\n    const [isAccept, setIsAccept] = useState(false);\n    const [isTermsDialogOpen, setIsTermsDialogOpen] = useState(false);\n\n    const handleShowBorder = (_: React.ChangeEvent<HTMLInputElement>, checked: boolean) => {\n        svgEl.querySelector('rect#canvas-border')?.setAttribute('stroke', checked ? 'black' : 'none');\n        setShowBorder(checked);\n    };\n\n    const handleTransparent = (_: React.ChangeEvent<HTMLInputElement>, checked: boolean) => {\n        svgEl.querySelector('rect#canvas-bg')?.setAttribute('fill', checked ? 'none' : 'white');\n        setIsTransparent(checked);\n    };\n\n    const handleScaleChange = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\n        let nextScale = event.target.value as number;\n        svgEl.setAttribute('height', ((Number(svgEl.getAttribute('height')) / scale) * nextScale).toString());\n        setScale(nextScale);\n    };\n\n    const contentEl = React.useRef<HTMLDivElement | null>(null);\n\n    useEffect(\n        () => {\n            if (props.canvas === '') {\n                setSvgEl((document.createElement('svg') as Element) as SVGSVGElement);\n                setIsLoaded(false);\n                return;\n            }\n            let [, thisSVGHeight] = ['--rmg-svg-width', '--rmg-svg-height']\n                .map(\n                    key =>\n                        (document.querySelector(`svg#${props.canvas}`) as SVGSVGElement).style\n                            .getPropertyValue(key)\n                            .match(/\\d+/g)![0]\n                )\n                .map(Number);\n\n            // let MAX_WIDTH = Math.min(window.innerWidth, 1412) - 64 - 24 * 2;\n            // let MAX_HEIGHT = window.innerHeight - 64 - 64 - 52 - 8 * 2;\n            // let scaleFactor = Math.min(MAX_WIDTH / thisSVGWidth, MAX_HEIGHT / thisSVGHeight);\n\n            let elem = document.querySelector(`svg#${props.canvas}`)!.cloneNode(true) as SVGSVGElement;\n            // elem.setAttribute('width', (thisSVGWidth * scaleFactor).toString());\n            elem.setAttribute('height', (thisSVGHeight * scale).toString());\n            elem.style.setProperty('all', 'initial');\n\n            ['share', props.canvas]\n                .map(tag =>\n                    [\n                        ...([...document.querySelectorAll('link')].filter(l => l.id === 'css_' + tag)[0]\n                            ?.sheet as CSSStyleSheet).cssRules,\n                    ]\n                        .map(rule => rule.cssText)\n                        .join(' ')\n                )\n                .forEach(txt => {\n                    let s = document.createElement('style');\n                    s.textContent = txt;\n                    elem.prepend(s);\n                });\n\n            elem.querySelector('rect#canvas-border')?.setAttribute('stroke', showBorder ? 'black' : 'none');\n            elem.querySelector('rect#canvas-bg')?.setAttribute('fill', isTransparent ? 'none' : 'white');\n\n            if (rmgStyle === 'mtr') {\n                import(/* webpackChunkName: \"panelPreviewMTR\" */ './mtr-helper')\n                    .then(({ getBase64FontFace }) =>\n                        getBase64FontFace(elem)\n                            .then(async response => {\n                                let uris = await Promise.all(response);\n                                let s = document.createElement('style');\n                                s.textContent = uris.join(' ');\n                                elem.prepend(s);\n                            })\n                            .catch(err => {\n                                alert('Failed to fonts. Fonts in the exported PNG will be missing.');\n                                console.error(err);\n                            })\n                    )\n                    .then(() => {\n                        setSvgEl(elem);\n                        document.fonts.ready.then(() => setIsLoaded(true));\n                    });\n            } else {\n                setSvgEl(elem);\n                setIsLoaded(true);\n            }\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [props.canvas]\n    );\n\n    const handleClose = (action: 'close' | 'download') => () => {\n        if (action === 'close') {\n            props.onClose('close');\n        } else {\n            let svgEl = contentEl.current!.querySelector('svg') as SVGSVGElement;\n            if (format === 'png') {\n                test(svgEl, scale);\n            } else if (format === 'svg') {\n                svgEl.removeAttribute('height');\n                var link = document.createElement('a');\n                link.href = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgEl.outerHTML)));\n                link.download = 'rmg.' + new Date().toISOString() + '.svg';\n                link.click();\n            }\n            props.onClose('close');\n        }\n    };\n\n    return (\n        <Dialog onClose={handleClose('close')} open={props.open} maxWidth={false}>\n            <DialogTitle>{t('file.preview.title')}</DialogTitle>\n            <div className={classes.contentWrapper}>\n                <DialogContent\n                    dangerouslySetInnerHTML={{ __html: svgEl.outerHTML }}\n                    ref={contentEl}\n                    className={classes.contentCanvas}\n                    classes={{ root: classes.contentRoot }}\n                />\n                <div className={classes.contentControl}>\n                    <DialogContent classes={{ root: classes.contentRoot }} className={classes.contentControlContent}>\n                        <List component=\"div\" disablePadding>\n                            <ListItem>\n                                <ListItemText primary={t('file.preview.transparent')} />\n                                <ListItemSecondaryAction>\n                                    <Switch\n                                        color=\"primary\"\n                                        checked={isTransparent}\n                                        onChange={handleTransparent}\n                                        disabled={!isLoaded}\n                                    />\n                                </ListItemSecondaryAction>\n                            </ListItem>\n                            <Divider variant=\"middle\" />\n                            <ListItem>\n                                <ListItemText primary={t('file.preview.border')} />\n                                <ListItemSecondaryAction>\n                                    <Switch\n                                        color=\"primary\"\n                                        checked={showBorder}\n                                        onChange={handleShowBorder}\n                                        disabled={!isLoaded}\n                                    />\n                                </ListItemSecondaryAction>\n                            </ListItem>\n                            <Divider variant=\"middle\" />\n                            <ListItem>\n                                <ListItemText primary={t('file.preview.scale')} />\n                                <ListItemSecondaryAction>\n                                    <Select native value={scale} onChange={handleScaleChange} disabled={!isLoaded}>\n                                        {[\n                                            0.25,\n                                            0.33,\n                                            0.5,\n                                            0.67,\n                                            0.75,\n                                            0.8,\n                                            0.9,\n                                            1,\n                                            1.1,\n                                            1.25,\n                                            1.5,\n                                            1.75,\n                                            2,\n                                            2.5,\n                                            3,\n                                            4,\n                                            5,\n                                        ].map(ratio => (\n                                            <option key={ratio} value={ratio}>\n                                                {(ratio * 100).toFixed(0) + '%'}\n                                            </option>\n                                        ))}\n                                    </Select>\n                                </ListItemSecondaryAction>\n                            </ListItem>\n                            <Divider variant=\"middle\" />\n                            <ListItem>\n                                <ListItemText primary={t('file.preview.format')} />\n                                <ListItemSecondaryAction>\n                                    <Select\n                                        native\n                                        value={format}\n                                        onChange={e => setFormat(e.target.value as string)}\n                                        style={{ width: 65 }}\n                                        disabled={!isLoaded}\n                                    >\n                                        <option value=\"png\">PNG</option>\n                                        <option value=\"svg\">SVG (Web Use)</option>\n                                    </Select>\n                                </ListItemSecondaryAction>\n                            </ListItem>\n                        </List>\n                        <ListItem style={{ padding: 0 }}>\n                            <Checkbox\n                                color=\"primary\"\n                                size=\"small\"\n                                checked={isAccept}\n                                onChange={(_, checked) => setIsAccept(checked)}\n                            />\n                            <Typography variant=\"body2\">\n                                {t('file.preview.terms.accept')}\n                                <Typography\n                                    component=\"a\"\n                                    color=\"primary\"\n                                    variant=\"body2\"\n                                    style={{ cursor: 'pointer' }}\n                                    onClick={() => setIsTermsDialogOpen(true)}\n                                >\n                                    {t('file.preview.terms.tandc')}\n                                </Typography>\n                            </Typography>\n\n                            <TermsDialog open={isTermsDialogOpen} onClose={() => setIsTermsDialogOpen(false)} />\n                        </ListItem>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button variant=\"outlined\" onClick={handleClose('close')} color=\"primary\" autoFocus>\n                            {t('dialog.cancel')}\n                        </Button>\n                        <Button\n                            variant=\"contained\"\n                            onClick={handleClose('download')}\n                            color=\"primary\"\n                            disabled={!isLoaded || !isAccept}\n                        >\n                            {t('file.preview.download')}\n                        </Button>\n                    </DialogActions>\n                </div>\n            </div>\n        </Dialog>\n    );\n}\n\nconst TermsDialog = (props: { open: boolean; onClose: () => void }) => {\n    const { t } = useTranslation();\n    return useMemo(\n        () => (\n            <Dialog open={props.open} onClose={props.onClose}>\n                <DialogTitle>{t('file.preview.terms.tandc')}</DialogTitle>\n                <DialogContent dividers>\n                    <Typography component=\"p\">\n                        The downloaded image may be modified, published, or used for other purposes, under the following\n                        conditions.\n                    </Typography>\n                    <Typography component=\"ol\">\n                        <Typography component=\"li\">\n                            The layout of the elements on the sign or rail map, is designed by{' '}\n                            <Typography component=\"a\" color=\"primary\" href=\"http://www.gzmtr.com\" target=\"_blank\">\n                                Guangzhou Metro Corporation\n                            </Typography>\n                            ,{' '}\n                            <Typography component=\"a\" color=\"primary\" href=\"http://www.mtr.com.hk\" target=\"_blank\">\n                                MTR Corporation\n                            </Typography>{' '}\n                            or{' '}\n                            <Typography component=\"a\" color=\"primary\" href=\"http://www.shmetro.com\" target=\"_blank\">\n                                Shanghai Shentong Metro Group\n                            </Typography>\n                            , depending on your selection. You shall grant appropriate permit or license from the\n                            relevant company above before using the downloaded image for commercial purposes, if it is\n                            required to do so.\n                        </Typography>\n                        <Typography component=\"li\">\n                            The elements including shapes and lines on the image are drawn by{' '}\n                            <Typography\n                                component=\"a\"\n                                color=\"primary\"\n                                href=\"https://github.com/wongchito\"\n                                target=\"_blank\"\n                            >\n                                Chito Wong\n                            </Typography>{' '}\n                            and{' '}\n                            <Typography\n                                component=\"a\"\n                                color=\"primary\"\n                                href=\"https://github.com/thekingofcity\"\n                                target=\"_blank\"\n                            >\n                                thekingofcity\n                            </Typography>\n                            , based on the design standards or rules of the companies listed above. You may use them for\n                            any purposes, but it is recommended to state the name and the link of software alongside.\n                        </Typography>\n                        <Typography component=\"li\">\n                            The fonts of the Chinese characters in MTR style are provided by{' '}\n                            <Typography\n                                component=\"a\"\n                                color=\"primary\"\n                                href=\"https://www.google.com/get/noto/help/cjk/\"\n                                target=\"_blank\"\n                            >\n                                Google Inc.\n                            </Typography>{' '}\n                            while all others fonts are rendered from local files. You shall grant appropriate permit or\n                            license from the manufacturers before using the downloaded image for commercial purposes.\n                        </Typography>\n                    </Typography>\n                    <Typography component=\"p\">\n                        We reserve the rights, without notice, to modify, add, or remove these terms.\n                    </Typography>\n                    <Typography component=\"p\">本條款及細則暫只提供英文版，敬請原諒。</Typography>\n                    <Typography component=\"p\" variant=\"body2\">\n                        Last modified: 6 Apr 2020, 12:39 UTC\n                    </Typography>\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"outlined\" color=\"primary\" onClick={props.onClose}>\n                        {t('dialog.close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [props.open]\n    );\n};\n","import ExportDialog from './dialog';\n\nexport default ExportDialog;","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog, DialogTitle, DialogContent, List, ListItem, ListItemText } from '@material-ui/core';\n\nimport PreviewDialog from './preview-diag';\nimport { CanvasContext } from '../../../context';\n\ninterface Props {\n    onClose: (action: string) => void;\n    open: boolean;\n}\n\nexport default function ExportDialog(props: Props) {\n    const { t } = useTranslation();\n\n    const { canvasAvailable, canvasToShown } = React.useContext(CanvasContext);\n\n    const [previewDialogOpened, setPreviewDialogOpened] = React.useState(false);\n    const [canvas, setCanvas] = React.useState('');\n\n    const handleClose = (action: string) => () => {\n        if (action !== 'close') {\n            setPreviewDialogOpened(true);\n            setCanvas(action);\n        }\n        props.onClose('close');\n    };\n\n    const previewDialogClose = (action: string) => {\n        if (action === 'close') {\n            setPreviewDialogOpened(false);\n            setCanvas('');\n        }\n    };\n\n    return (\n        <>\n            <Dialog onClose={handleClose('close')} open={props.open}>\n                <DialogTitle>{t('file.export.title')}</DialogTitle>\n                <DialogContent dividers>\n                    <List>\n                        {(canvasToShown === 'all' ? canvasAvailable : [canvasToShown]).map(c => (\n                            <ListItem button key={c} onClick={handleClose(c)}>\n                                <ListItemText primary={t('file.export.' + c)} />\n                            </ListItem>\n                        ))}\n                    </List>\n                </DialogContent>\n            </Dialog>\n\n            <PreviewDialog open={previewDialogOpened} onClose={previewDialogClose} canvas={canvas} />\n        </>\n    );\n}\n","import React, { useState, useContext } from 'react';\nimport { useTranslation, withTranslation } from 'react-i18next';\n\nimport {\n    Grid,\n    Card,\n    List,\n    ListItem,\n    ListItemIcon,\n    Icon,\n    ListItemText,\n    Divider,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    LinearProgress,\n} from '@material-ui/core';\n\nimport { getTransText2 } from '../../utils';\n\nimport UploadListItem from './upload-item';\nimport ExportDialog from './export-diag';\nimport { CanvasContext } from '../../context';\nimport { Link } from 'react-router-dom';\n\nconst TemplateDialog = React.lazy(() => import(/* webpackChunkName: \"panelSaveTemplateDialog\" */ './template-diag'));\n\nexport default function PanelSave() {\n    let TranslatedSaveLists = withTranslation()(SaveLists);\n\n    return (\n        <Grid container spacing={3} justify=\"center\" alignItems=\"center\">\n            <Grid item xs={12} sm={8} md={6} lg={4}>\n                <TranslatedSaveLists />\n            </Grid>\n        </Grid>\n    );\n}\n\nconst allLangs = {\n    en: 'English',\n    'zh-Hans': '中文（简体）',\n    'zh-HK': '中文（香港）',\n};\n\nconst SaveLists = () => {\n    const { t, i18n } = useTranslation();\n\n    const { rmgStyle } = useContext(CanvasContext);\n\n    const [isTempDialogOpen, setIsTempDialogOpen] = useState(false);\n    const [isExportDialogOpen, setIsExportDialogOpen] = useState(false);\n    const [isStyleDialogOpen, setIsStyleDialogOpen] = useState(false);\n    const [isLangDialogOpen, setIsLangDialogOpen] = useState(false);\n\n    const saveClick = () => {\n        let link = document.createElement('a');\n        link.href = 'data:application/json;base64,' + btoa(unescape(encodeURIComponent(localStorage.rmgParam)));\n        link.download = 'rmg.param.' + new Date().toISOString() + '.json';\n        link.click();\n    };\n\n    const exportDialogClose = (action: string) => {\n        setIsExportDialogOpen(false);\n    };\n\n    const styleDialogClose = (action: 'close' | ProvidedStyles) => {\n        if (action === 'close' || action === rmgStyle) {\n        } else {\n            // setStyle(action);\n            // setIsStyleDialogOpen(false);\n\n            window.gtag('event', 'set', {\n                event_category: 'style',\n                event_label: action,\n            });\n            // window.location.href = process.env.PUBLIC_URL + '/' + action;\n        }\n        setIsStyleDialogOpen(false);\n\n        // TODO: how about integrity check?\n        // e.g. when user switch from guangzhou mtr to shanghai metro\n        // the info_panel_type will be invaild\n        // do we need to set info_panel_type to default or prompt up a dialog \n    };\n\n    return (\n        <div>\n            <Card>\n                <List component=\"nav\">\n                    <ListItem button onClick={() => setIsTempDialogOpen(true)}>\n                        <ListItemIcon>\n                            <Icon>note_add</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={t('file.new.button')} />\n                    </ListItem>\n                    <UploadListItem />\n                    <ListItem button onClick={saveClick}>\n                        <ListItemIcon>\n                            <Icon>save</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={t('file.save')} />\n                    </ListItem>\n                    <ListItem button onClick={() => setIsExportDialogOpen(true)}>\n                        <ListItemIcon>\n                            <Icon>cloud_download</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={t('file.export.button')} />\n                    </ListItem>\n                </List>\n                <Divider />\n                <List component=\"nav\">\n                    <ListItem button onClick={() => setIsStyleDialogOpen(true)}>\n                        <ListItemIcon>\n                            <Icon>style</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={t('file.style.button')} secondary={t('file.style.' + rmgStyle)} />\n                    </ListItem>\n                    <ListItem button onClick={() => setIsLangDialogOpen(true)}>\n                        <ListItemIcon>\n                            <Icon>translate</Icon>\n                        </ListItemIcon>\n                        <ListItemText\n                            primary={t('file.lang.button')}\n                            secondary={getTransText2(allLangs, i18n.languages)}\n                        />\n                    </ListItem>\n                </List>\n            </Card>\n\n            <React.Suspense fallback={<LinearProgress />}>\n                <TemplateDialog open={isTempDialogOpen} onClose={() => setIsTempDialogOpen(false)} />\n            </React.Suspense>\n\n            <ExportDialog open={isExportDialogOpen} onClose={exportDialogClose} />\n\n            <StyleDialog open={isStyleDialogOpen} onClose={styleDialogClose} />\n            <LangDialog open={isLangDialogOpen} onClose={() => setIsLangDialogOpen(false)} />\n        </div>\n    );\n};\n\ninterface StyleDialogProps {\n    onClose: (style: 'close' | ProvidedStyles) => void;\n    open: boolean;\n}\n\nfunction StyleDialog(props: StyleDialogProps) {\n    const { t } = useTranslation();\n\n    return (\n        <Dialog onClose={() => props.onClose('close')} open={props.open}>\n            <DialogTitle>{t('file.style.title')}</DialogTitle>\n            <DialogContent dividers>\n                <List>\n                    {(['gzmtr', 'mtr', 'shmetro'] as ProvidedStyles[]).map(key => (\n                        <Link to={'/' + key} key={key} style={{ textDecoration: 'none', color: 'unset' }}>\n                            <ListItem button onClick={() => props.onClose(key)}>\n                                <ListItemText primary={t('file.style.' + key)} />\n                            </ListItem>\n                        </Link>\n                    ))}\n                </List>\n            </DialogContent>\n        </Dialog>\n    );\n}\n\ninterface LangDialogProps {\n    onClose: () => void;\n    open: boolean;\n}\n\nfunction LangDialog(props: LangDialogProps) {\n    const { t, i18n } = useTranslation();\n\n    const handleClick = (lang: string) => {\n        if (lang === i18n.language) {\n            props.onClose();\n        } else {\n            i18n.changeLanguage(lang).then(t => (document.title = t('title')));\n            // history.pushState({url:window.location.href}, null, '?' + window.urlParams.toString());\n            window.gtag('event', 'set', {\n                event_category: 'language',\n                event_label: lang,\n            });\n            document.documentElement.setAttribute('lang', lang);\n            props.onClose();\n        }\n    };\n\n    return (\n        <Dialog onClose={props.onClose} open={props.open}>\n            <DialogTitle>{t('file.lang.title')}</DialogTitle>\n            <DialogContent dividers>\n                <List>\n                    {(Object.keys(allLangs) as (keyof typeof allLangs)[]).map(key => (\n                        <ListItem button onClick={() => handleClick(key)} key={key}>\n                            <ListItemText primary={allLangs[key]} />\n                        </ListItem>\n                    ))}\n                </List>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","import Panel from './panel';\n\nexport default Panel;"],"sourceRoot":""}