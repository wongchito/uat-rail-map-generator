{"version":3,"sources":["panels/stations/station-list.tsx","panels/stations/utils.ts","panels/stations/add-diag.tsx","panels/stations/edit-diag/dialog.tsx","panels/stations/edit-diag/index.ts","panels/stations/delete-diags.tsx","panels/stations/fabs.tsx","panels/stations/auto-num-diag.tsx","panels/stations/panel2.tsx","panels/stations/index.ts"],"names":["useStyles","makeStyles","theme","createStyles","listItemNum","marginRight","spacing","fontSize","listItemText","display","alignItems","whiteSpace","overflow","selectedItem","background","palette","action","hover","StationList","props","tpo","useContext","ParamContext","dense","disablePadding","map","stnId","Fragment","isSelected","selectedId","onAction","StationEntry","t","useTranslation","classes","rmgStyle","useSelector","store","app","param","dispatch","stn_list","linestart","name","num","useState","toggleEl","setToggleEl","handleAction","className","RmgStyle","GZMTR","primary","secondary","replace","size","onClick","e","currentTarget","anchorEl","open","Boolean","onClose","type","getRandomId","Math","floor","random","pow","toString","padStart","getNameFromId","numsZH","split","numsEN","char","parseInt","join","dialogContent","padding","select","width","marginLeft","React","memo","stnList","allLocs","centre","upper","lower","newupper","newlower","prep","setPrep","pivot","setPivot","Object","keys","loc","setLoc","Array","fill","locOK","setLocOK","end","setEnd","endList","setEndList","newLocs","useMemo","length","y","getYShareMTR","state","res","parents","unshift","pop","children","push","shift","newBranchPossibleEnd","newStnPossibleLoc","useEffect","p","indexOf","handleClick","newId","includes","newInfo","secondaryName","services","branch","left","right","transfer","info","tick_direc","paid_area","osi_names","facility","newStnList","JSON","parse","stringify","slice","forEach","par","child","parChildLen","lineend","addStation","component","native","onChange","target","value","variant","formatStnName","key","idx","disabled","style","color","autoFocus","prevProps","nextProps","NameTab","lazy","InterchangeTab","BranchTab","MoreTab","tab","height","minWidth","flexDirection","minHeight","marginBottom","paddingLeft","DialogWrapper","useTheme","isMobile","useMediaQuery","breakpoints","down","fullScreen","dividers","Dialog","tabIndex","setTabIndex","tabNav","indicatorColor","textColor","_","val","scrollButtons","i","label","icon","role","Suspense","fallback","StationDeleteDialog","isError","setIsError","isLastMainBranchStn","id","console","log","parId","childId","childIdxOfPar","parIdxOfChild","splice","removeStation","current_stn_idx","newCurrentId","filter","i18nKey","ErrorDialog","fab","position","bottom","StationFabs","fabEl","setFabEl","title","AutoNumDialog","branches","branch0","gridContainer","gridItem","PanelStations2","stnSelected","setStnSelected","isOpen","setIsOpen","isAddDialogOpen","setIsAddDialogOpen","isAutoNumDialogOpen","setIsAutoNumDialogOpen","stnToRemove","setStnToRemove","isDeleteDialogOpen","setIsDeleteDialogOpen","container","item","xs","md","Panel"],"mappings":"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","file":"static/js/panelStations.ec186f19.chunk.js","sourcesContent":["import React, { useContext, useState } from 'react';\nimport {\n    createStyles,\n    Divider,\n    Icon,\n    IconButton,\n    List,\n    ListItem,\n    ListItemSecondaryAction,\n    ListItemText,\n    makeStyles,\n    Menu,\n    MenuItem,\n    Paper,\n    Typography,\n} from '@material-ui/core';\nimport { ParamContext } from '../../context';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../redux';\nimport { RmgStyle } from '../../constants/constants';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        listItemNum: {\n            marginRight: theme.spacing(1),\n            fontSize: '1.2rem',\n        },\n        listItemText: {\n            display: 'flex',\n            alignItems: 'baseline',\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            '& .MuiListItemText-primary': {\n                marginRight: theme.spacing(1),\n            },\n        },\n        selectedItem: {\n            background: theme.palette.action.hover,\n        },\n    })\n);\n\ninterface Props {\n    selectedId: string;\n    onAction: (stnId: string) => (action: 'edit' | 'remove') => void;\n}\n\nconst StationList = (props: Props) => {\n    const { tpo } = useContext(ParamContext);\n\n    return (\n        <Paper>\n            <List dense disablePadding>\n                {tpo.map(stnId => (\n                    <React.Fragment key={stnId}>\n                        <StationEntry\n                            stnId={stnId}\n                            isSelected={stnId === props.selectedId}\n                            onAction={props.onAction(stnId)}\n                        />\n                        <Divider />\n                    </React.Fragment>\n                ))}\n            </List>\n        </Paper>\n    );\n};\n\nexport default StationList;\n\nconst StationEntry = (props: { stnId: string; isSelected: boolean; onAction: (action: 'edit' | 'remove') => void }) => {\n    const { t } = useTranslation();\n    const classes = useStyles();\n\n    const rmgStyle = useSelector((store: RootState) => store.app.rmgStyle);\n    const { param, dispatch } = useContext(ParamContext);\n\n    const { name, num } = param.stn_list[props.stnId] || param.stn_list.linestart;\n\n    const [toggleEl, setToggleEl] = useState<null | HTMLElement>(null);\n\n    const handleCurrent = () => {\n        dispatch({ type: 'SET_CURRENT_STATION', stnId: props.stnId });\n        setToggleEl(null);\n    };\n\n    const handleAction = (action: 'edit' | 'remove') => () => {\n        props.onAction(action);\n        setToggleEl(null);\n    };\n\n    return (\n        <ListItem className={props.isSelected ? classes.selectedItem : ''}>\n            {rmgStyle === RmgStyle.GZMTR && <Typography className={classes.listItemNum}>{num}</Typography>}\n            <ListItemText primary={name[0]} secondary={name[1].replace('\\\\', ' ')} className={classes.listItemText} />\n            <ListItemSecondaryAction>\n                <IconButton size=\"small\" onClick={e => setToggleEl(e.currentTarget)}>\n                    <Icon>more_vert</Icon>\n                </IconButton>\n                <Menu anchorEl={toggleEl} open={Boolean(toggleEl)} onClose={() => setToggleEl(null)}>\n                    <MenuItem onClick={handleCurrent}>{t('stations.current')}</MenuItem>\n                    <MenuItem onClick={handleAction('edit')}>{t('stations.edit.button')}</MenuItem>\n                    <MenuItem onClick={handleAction('remove')}>{t('stations.remove.button')}</MenuItem>\n                </Menu>\n            </ListItemSecondaryAction>\n        </ListItem>\n    );\n};\n","import { getYShareMTR } from '../../methods';\n\nexport const addStation = (\n    prep: 'before' | 'after',\n    stnId: string,\n    loc: 'centre' | 'upper' | 'lower' | 'newupper' | 'newlower',\n    end: string,\n    stnList: { [stnId: string]: StationInfo }\n): [string, StationDict] => {\n    // get new id\n    let newId = getRandomId();\n    while (Object.keys(stnList).includes(newId)) {\n        newId = getRandomId();\n    }\n    let newInfo: StationInfo = {\n        name: getNameFromId(newId),\n        secondaryName: false,\n        num: '00',\n        services: ['local'],\n        parents: [],\n        children: [],\n        branch: {\n            left: [],\n            right: [],\n        },\n        transfer: {\n            info: [[]],\n            // type: 'none',\n            tick_direc: 'r',\n            paid_area: true,\n            osi_names: [],\n        },\n        facility: '',\n    };\n\n    let newStnList = JSON.parse(JSON.stringify(stnList)) as StationDict;\n\n    if (prep === 'before') {\n        if (loc === 'centre') {\n            newInfo.parents = stnList[stnId].parents;\n            if (stnList[stnId].parents.length === 0 && getYShareMTR(stnId, stnList) !== 0) {\n                // todo: is this case really exist?\n                newInfo.children = stnList.linestart.children;\n            } else if (getYShareMTR(stnId, stnList) !== 0) {\n                // pivot on branch\n                newInfo.children = stnList[stnList[stnId].parents[0]].children.slice();\n                newInfo.branch.right = stnList[newInfo.parents[0]].branch.right;\n                newStnList[newInfo.parents[0]].branch.right = [];\n            } else {\n                // pivot on main\n                newInfo.children = [stnId];\n                newInfo.branch.left = stnList[stnId].branch.left;\n                newStnList[stnId].branch.left = [];\n            }\n            newInfo.parents.forEach(par => {\n                newStnList[par].children = [newId];\n            });\n            newInfo.children.forEach(child => {\n                newStnList[child].parents = [newId];\n            });\n        } else if (loc === 'upper') {\n            if (stnList[stnId].parents.length === 2) {\n                if (stnList[stnId].branch.left[1] === stnList[stnId].parents[0]) {\n                    newStnList[stnId].branch.left[1] = newId;\n                }\n\n                newInfo.parents = stnList[stnId].parents.slice(0, 1);\n                newInfo.children = [stnId];\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n                newStnList[stnId].parents[0] = newId;\n            } else {\n                // already on branch\n                newInfo.parents = stnList[stnId].parents;\n                newInfo.children = [stnId];\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children[0] = newId;\n\n                    if (stnList[par].branch.right[1] === stnId) {\n                        newStnList[par].branch.right[1] = newId;\n                    }\n                });\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n            }\n        } else if (loc === 'lower') {\n            if (stnList[stnId].parents.length === 2) {\n                if (stnList[stnId].branch.left[1] === stnList[stnId].parents[1]) {\n                    newStnList[stnId].branch.left[1] = newId;\n                }\n\n                newInfo.parents = stnList[stnId].parents.slice(1);\n                newInfo.children = [stnId];\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n                newStnList[stnId].parents[1] = newId;\n            } else {\n                // already on branch\n                newInfo.parents = stnList[stnId].parents;\n                newInfo.children = [stnId];\n                newInfo.parents.forEach(par => {\n                    let parChildLen = stnList[par].children.length;\n                    newStnList[par].children[parChildLen - 1] = newId;\n\n                    if (stnList[par].branch.right[1] === stnId) {\n                        newStnList[par].branch.right[1] = newId;\n                    }\n                });\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n            }\n        } else {\n            newStnList[stnId].branch.left = ['through', newId];\n            newStnList[end].branch.right = ['through', newId];\n            newInfo.parents = [end];\n            newInfo.children = [stnId];\n\n            if (loc === 'newupper') {\n                newStnList[end].children.unshift(newId);\n                newStnList[stnId].parents.unshift(newId);\n            } else {\n                newStnList[end].children.push(newId);\n                newStnList[stnId].parents.push(newId);\n            }\n        }\n    } else {\n        if (loc === 'centre') {\n            newInfo.children = stnList[stnId].children;\n            if (stnList[stnId].children.length === 0 && getYShareMTR(stnId, stnList) !== 0) {\n                newInfo.parents = stnList.lineend.parents;\n            } else if (getYShareMTR(stnId, stnList) !== 0) {\n                // pivot on branch\n                newInfo.parents = stnList[stnList[stnId].children[0]].parents;\n                newInfo.branch.left = stnList[newInfo.children[0]].branch.left;\n                newStnList[newInfo.children[0]].branch.left = [];\n            } else {\n                // pivot on main\n                newInfo.parents = [stnId];\n                newInfo.branch.right = stnList[stnId].branch.right;\n                newStnList[stnId].branch.right = [];\n            }\n            newInfo.children.forEach(child => {\n                newStnList[child].parents = [newId];\n            });\n            newInfo.parents.forEach(par => {\n                newStnList[par].children = [newId];\n            });\n        } else if (loc === 'upper') {\n            if (stnList[stnId].children.length === 2) {\n                if (stnList[stnId].branch.right[1] === stnList[stnId].children[0]) {\n                    newStnList[stnId].branch.right[1] = newId;\n                }\n\n                newInfo.children = stnList[stnId].children.slice(0, 1);\n                newInfo.parents = [stnId];\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n                newStnList[stnId].children[0] = newId;\n            } else {\n                // already on branch\n                newInfo.children = stnList[stnId].children;\n                newInfo.parents = [stnId];\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents[0] = newId;\n\n                    if (stnList[child].branch.left[1] === stnId) {\n                        newStnList[child].branch.left[1] = newId;\n                    }\n                });\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n            }\n        } else if (loc === 'lower') {\n            if (stnList[stnId].children.length === 2) {\n                if (stnList[stnId].branch.right[1] === stnList[stnId].children[1]) {\n                    newStnList[stnId].branch.right[1] = newId;\n                }\n\n                newInfo.children = stnList[stnId].children.slice(1);\n                newInfo.parents = [stnId];\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n                newStnList[stnId].children[1] = newId;\n            } else {\n                // already on branch\n                newInfo.children = stnList[stnId].children;\n                newInfo.parents = [stnId];\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents[stnList[child].parents.length === 1 ? 0 : 1] = newId;\n\n                    if (stnList[child].branch.left[1] === stnId) {\n                        newStnList[child].branch.left[1] = newId;\n                    }\n                });\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n            }\n        } else {\n            newStnList[stnId].branch.right = ['through', newId];\n            newStnList[end].branch.left = ['through', newId];\n\n            newInfo.children = [end];\n            newInfo.parents = [stnId];\n\n            if (loc === 'newupper') {\n                newStnList[end].parents.unshift(newId);\n                newStnList[stnId].children.unshift(newId);\n            } else {\n                newStnList[end].parents.push(newId);\n                newStnList[stnId].children.push(newId);\n            }\n        }\n    }\n\n    return [\n        newId,\n        {\n            ...newStnList,\n            [newId]: newInfo,\n        },\n    ];\n};\n\nconst getRandomId = () =>\n    Math.floor(Math.random() * Math.pow(36, 4))\n        .toString(36)\n        .padStart(4, '0');\n\nfunction getNameFromId(stnId: string): Name {\n    let numsZH = '癸甲乙丙丁戊己庚辛壬日月金木水火土竹戈十大中一弓人心手口尸廿山女田難卜重'.split('');\n    let numsEN = 'Zero One Two Three Four Five Six Seven Eight Nine Alfa Bravo Charlie Delta Echo Foxtrot Golf Hotel India Juliett Kilo Lima Mike November Oscar Papa Quebec Romeo Sierra Tango Uniform Victor Whiskey X-ray Yankee Zulu'.split(\n        ' '\n    );\n    return [\n        stnId\n            .split('')\n            .map(char => numsZH[parseInt(char, 36)])\n            .join(''),\n        stnId\n            .split('')\n            .map(char => numsEN[parseInt(char, 36)])\n            .join(' '),\n    ];\n}\n\n/**\n * Remove a station and update neighbour's parameters at the same time.\n * (All descriptions are based on MTR style. )\n */\nexport const removeStation = (stnId: string, stnList: StationDict) => {\n    let newStnList = JSON.parse(JSON.stringify(stnList)) as StationDict;\n    let parents = newStnList[stnId].parents;\n    let children = newStnList[stnId].children;\n\n    let isLastMainBranchStn = true;\n    for (let id in newStnList) {\n        if ([stnId, 'linestart', 'lineend'].includes(id)) continue;\n        if (getYShareMTR(id, newStnList) === 0) {\n            isLastMainBranchStn = false;\n            break;\n        }\n    }\n\n    if (parents.length === 2 && children.length === 2) {\n        // Todo: rewrite, join two branches rather than reject\n        return false;\n    } else if (isLastMainBranchStn) {\n        // Last main line station\n        return false;\n    } else if (Object.keys(newStnList).length === 4) {\n        // Last two stations\n        return false;\n    } else if (parents.length === 2 || children.length === 2) {\n        console.log('this case');\n        parents.forEach(parId => {\n            newStnList[parId].children = children;\n        });\n        children.forEach(childId => {\n            newStnList[childId].parents = parents;\n        });\n        if (parents.length === 1) {\n            newStnList[parents[0]].branch.right = newStnList[stnId].branch.right;\n        }\n        if (children.length === 1) {\n            newStnList[children[0]].branch.left = newStnList[stnId].branch.left;\n        }\n    } else if (newStnList[parents[0]].children.length === 2 && newStnList[children[0]].parents.length === 2) {\n        // 1 par 1 child, last station on upper/lower branch\n        // branch disappear\n        var childIdxOfPar = newStnList[parents[0]].children.indexOf(stnId);\n        var parIdxOfChild = newStnList[children[0]].parents.indexOf(stnId);\n        newStnList[parents[0]].children.splice(childIdxOfPar, 1);\n        newStnList[children[0]].parents.splice(parIdxOfChild, 1);\n\n        newStnList[parents[0]].branch.right = [];\n        newStnList[children[0]].branch.left = [];\n    } else {\n        // 1 par 1 child\n        parents.forEach(parId => {\n            var idx = newStnList[parId].children.indexOf(stnId);\n            if (children.length) {\n                newStnList[parId].children[idx] = children[0];\n            } else {\n                // Right dest\n                newStnList[parId].children.splice(idx, 1);\n            }\n\n            if (newStnList[parId].branch.right[1] === stnId) {\n                newStnList[parId].branch.right[1] = children[0];\n            }\n        });\n        children.forEach(childId => {\n            var idx = newStnList[childId].parents.indexOf(stnId);\n            if (parents.length) {\n                newStnList[childId].parents[idx] = parents[0];\n            } else {\n                // Left dest\n                newStnList[childId].parents.splice(idx, 1);\n            }\n\n            if (newStnList[childId].branch.left[1] === stnId) {\n                newStnList[childId].branch.left[1] = parents[0];\n            }\n        });\n    }\n\n    delete newStnList[stnId];\n\n    return newStnList;\n};\n","import React, { useContext, useMemo, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    List,\n    ListItem,\n    ListItemIcon,\n    Icon,\n    DialogActions,\n    Button,\n    makeStyles,\n    createStyles,\n    ListItemText,\n    Select,\n    Divider,\n} from '@material-ui/core';\nimport { formatStnName } from '../../utils';\nimport { getYShareMTR } from '../../methods';\nimport { addStation } from './utils';\nimport { ParamContext } from '../../context';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../redux';\n\nconst newBranchPossibleEnd = (prep: 'before' | 'after', pivot: string, stnList: StationDict) => {\n    let res: string[] = [];\n    if (prep === 'before') {\n        while (stnList[pivot].parents.length === 1) {\n            pivot = stnList[pivot].parents[0];\n            res.unshift(pivot);\n        }\n        res.pop();\n    } else {\n        while (stnList[pivot].children.length === 1) {\n            pivot = stnList[pivot].children[0];\n            res.push(pivot);\n        }\n        res.shift();\n    }\n    return res;\n};\n\nconst newStnPossibleLoc = (\n    prep: 'before' | 'after',\n    pivot: string,\n    stnList: { [stnId: string]: StationInfo }\n): [number, number, number, string[], string[]] => {\n    let deg = stnList[pivot] ? stnList[pivot][prep === 'before' ? 'parents' : 'children'].length : 0;\n    switch (deg) {\n        case 2:\n            // 1 -> 2\n            return [1, 1, 1, [], []];\n        case 1:\n            let y = getYShareMTR(pivot, stnList);\n            if (y === 0) {\n                // 1 -> 1\n                let state: string[] | 0 = newBranchPossibleEnd(prep, pivot, stnList);\n                state = state.length ? state : [];\n                return [1, 0, 0, state, state];\n                // [1,0,0,1,1];\n            } else if (y < 0) {\n                if (prep === 'before') {\n                    return [stnList[stnList[pivot].parents[0]].children.length - 1, 0, 1, [], []];\n                } else {\n                    return [stnList[stnList[pivot].children[0]].parents.length - 1, 0, 1, [], []];\n                }\n            } else {\n                if (prep === 'before') {\n                    return [stnList[stnList[pivot].parents[0]].children.length - 1, 1, 0, [], []];\n                } else {\n                    return [stnList[stnList[pivot].children[0]].parents.length - 1, 1, 0, [], []];\n                }\n            }\n    }\n    return [0, 0, 0, [], []];\n};\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        dialogContent: {\n            padding: 8,\n        },\n        select: {\n            width: 166,\n            marginLeft: 8,\n        },\n    })\n);\n\ninterface StationAddDialogProps {\n    open: boolean;\n    onClose: (action: 'close' | string) => void;\n}\n\nexport default React.memo(\n    function StationAddDialog(props: StationAddDialogProps) {\n        const { t } = useTranslation();\n        const classes = useStyles();\n\n        const rmgStyle = useSelector((store: RootState) => store.app.rmgStyle);\n        const { param, dispatch, tpo } = useContext(ParamContext);\n        const stnList = param.stn_list;\n\n        const allLocs = {\n            centre: t('stations.add.centre'),\n            upper: t('stations.add.upper'),\n            lower: t('stations.add.lower'),\n            newupper: t('stations.add.newUpper'),\n            newlower: t('stations.add.newLower'),\n        };\n\n        const [prep, setPrep] = React.useState('before' as 'before' | 'after');\n        const [pivot, setPivot] = React.useState(tpo[0]);\n        const [loc, setLoc] = React.useState(Object.keys(allLocs)[0]);\n        const [locOK, setLocOK] = React.useState(Array(5).fill(true) as boolean[]);\n\n        const [end, setEnd] = React.useState('');\n        const [endList, setEndList] = React.useState([] as string[]);\n\n        // Hook for updating loc list and end lists when pivot changed\n        const newLocs = useMemo(() => newStnPossibleLoc(prep, pivot, stnList), [prep, pivot, stnList]);\n        useEffect(\n            () => {\n                setLocOK(newLocs.map(p => (typeof p === 'number' ? Boolean(p) : Boolean(p.length))));\n                setEndList(newLocs[3]);\n            },\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            [newLocs.toString()]\n        );\n\n        // Hook for updating loc selection (first available) when locOK list changed\n        useEffect(\n            () => setLoc(Object.keys(allLocs)[locOK.indexOf(true)]),\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            [locOK]\n        );\n\n        // Hook for updating end selection when end list changed\n        useEffect(() => {\n            if (endList.length === 0) return;\n            setEnd(endList[0]);\n        }, [endList]);\n\n        // Hook for setting new pivot in case of previous one being deleted\n        useEffect(\n            () => {\n                if (!(pivot in stnList)) setPivot(tpo[0]);\n            },\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            [Object.keys(stnList).toString()]\n        );\n\n        const handleClick = (action: string) => {\n            if (action === 'close') {\n                props.onClose('close');\n            } else {\n                let [newId, res] = addStation(\n                    prep as 'before' | 'after',\n                    pivot,\n                    loc as 'centre' | 'upper' | 'lower' | 'newupper' | 'newlower',\n                    end as string,\n                    stnList\n                );\n                dispatch({ type: 'UPDATE_STATION_LIST', stnList: res });\n                props.onClose(newId);\n            }\n        };\n\n        return (\n            <Dialog open={props.open} onClose={() => handleClick('close')}>\n                <DialogTitle>{t('stations.add.title')}</DialogTitle>\n                <DialogContent className={classes.dialogContent}>\n                    <List component=\"div\" disablePadding>\n                        <ListItem>\n                            <ListItemIcon>\n                                <Icon>control_camera</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('stations.add.prep')} />\n                            <Select\n                                native\n                                onChange={e => setPrep(e.target.value as 'before' | 'after')}\n                                value={prep}\n                                className={classes.select}\n                            >\n                                {['before', 'after'].map(p => (\n                                    <option key={p} value={p}>\n                                        {t('stations.add.' + p)}\n                                    </option>\n                                ))}\n                            </Select>\n                        </ListItem>\n                        <Divider variant=\"middle\" />\n                        <ListItem>\n                            <ListItemIcon>\n                                <Icon>near_me</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('stations.add.pivot')} />\n                            <Select\n                                native\n                                onChange={e => setPivot(e.target.value as string)}\n                                value={pivot}\n                                className={classes.select}\n                            >\n                                {tpo.map(stnId => (\n                                    <option key={stnId} value={stnId}>\n                                        {formatStnName(stnList[stnId], rmgStyle)}\n                                    </option>\n                                ))}\n                            </Select>\n                        </ListItem>\n                        <Divider variant=\"middle\" />\n                        <ListItem>\n                            <ListItemIcon>\n                                <Icon>share</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('stations.add.loc')} />\n                            <Select\n                                native\n                                onChange={e => setLoc(e.target.value as string)}\n                                value={loc}\n                                className={classes.select}\n                            >\n                                {(Object.keys(allLocs) as (keyof typeof allLocs)[]).map((key, idx) => (\n                                    <option key={key} value={key} disabled={!locOK[idx]}>\n                                        {allLocs[key]}\n                                    </option>\n                                ))}\n                            </Select>\n                        </ListItem>\n                        <Divider\n                            variant=\"middle\"\n                            style={{ display: ['newupper', 'newlower'].includes(loc) ? 'flex' : 'none' }}\n                        />\n                        <ListItem style={{ display: ['newupper', 'newlower'].includes(loc) ? 'flex' : 'none' }}>\n                            <ListItemIcon>\n                                <Icon>undo</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('stations.add.end')} />\n                            <Select\n                                native\n                                onChange={e => setEnd(e.target.value as string)}\n                                value={end}\n                                className={classes.select}\n                            >\n                                {endList.map(stnId => (\n                                    <option key={stnId} value={stnId}>\n                                        {formatStnName(stnList[stnId], rmgStyle)}\n                                    </option>\n                                ))}\n                            </Select>\n                        </ListItem>\n                    </List>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => handleClick('close')} color=\"primary\">\n                        {t('dialog.cancel')}\n                    </Button>\n                    <Button onClick={() => handleClick('accept')} color=\"primary\" autoFocus>\n                        {t('dialog.ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    },\n    (prevProps, nextProps) => prevProps.open === nextProps.open\n);\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    Tabs,\n    Tab,\n    Icon,\n    Typography,\n    CircularProgress,\n    DialogActions,\n    Button,\n    useTheme,\n    useMediaQuery,\n    makeStyles,\n    createStyles,\n    Paper,\n} from '@material-ui/core';\n\nconst NameTab = React.lazy(() => import(/* webpackChunkName: \"panelStationsName\" */ './name-tab'));\nconst InterchangeTab = React.lazy(() => import(/* webpackChunkName: \"panelStationsInterchange\" */ './interchange-tab'));\nconst BranchTab = React.lazy(() => import(/* webpackChunkName: \"panelStationsBranch\" */ './branch-tab'));\nconst MoreTab = React.lazy(() => import(/* webpackChunkName: \"panelStationsMore\" */ './more-tab'));\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        tab: {\n            padding: '6px 24px',\n            height: 48,\n            minWidth: 'calc(100% / 4)',\n            '& .MuiTab-wrapper': {\n                flexDirection: 'row',\n            },\n            '&.MuiTab-labelIcon': {\n                minHeight: 'unset',\n                '& .MuiTab-wrapper': {\n                    '& > *:first-child': {\n                        marginBottom: 0,\n                    },\n                    '& > *:not(first-child)': {\n                        paddingLeft: 8,\n                    },\n                },\n            },\n        },\n    })\n);\n\ninterface StationEditDialogProps {\n    onClose: () => void;\n    open: boolean;\n    stnId: string;\n}\n\nexport default function StationEditDialog(props: StationEditDialogProps) {\n    const { t } = useTranslation();\n\n    const [tabIndex, setTabIndex] = React.useState(0);\n\n    const classes = useStyles();\n\n    const tabNav = React.useMemo(\n        () => (\n            <Tabs\n                value={tabIndex}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                onChange={(_, val) => setTabIndex(val)}\n                variant=\"scrollable\"\n                scrollButtons=\"off\"\n            >\n                {[\n                    ['name', 'title'],\n                    ['interchange', 'transfer_within_a_station'],\n                    ['branch', 'share'],\n                    ['more', 'more_horiz'],\n                ].map((val, i) => (\n                    <Tab\n                        label={<span>{t('stations.edit.tab.' + val[0])}</span>}\n                        icon={<Icon>{val[1]}</Icon>}\n                        key={i}\n                        className={classes.tab}\n                    />\n                ))}\n            </Tabs>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [tabIndex, classes.tab]\n    );\n\n    return (\n        <DialogWrapper {...props}>\n            {tabNav}\n            <Typography component=\"div\" role=\"tabpanel\">\n                <React.Suspense fallback={<CircularProgress />}>\n                    {(idx => {\n                        switch (idx) {\n                            case 0:\n                                return <NameTab stnId={props.stnId} />;\n                            case 1:\n                                return <InterchangeTab stnId={props.stnId} />;\n                            case 2:\n                                return <BranchTab stnId={props.stnId} />;\n                            case 3:\n                                return <MoreTab stnId={props.stnId} />;\n                        }\n                    })(tabIndex)}\n                </React.Suspense>\n            </Typography>\n        </DialogWrapper>\n    );\n}\n\nconst DialogWrapper = (props: { children: React.ReactNode } & StationEditDialogProps) => {\n    const { t } = useTranslation();\n\n    const theme = useTheme();\n    const isMobile = useMediaQuery(theme.breakpoints.down('xs'));\n    const isDialog = useMediaQuery(theme.breakpoints.down('sm'));\n\n    return isDialog ? (\n        <Dialog onClose={props.onClose} open={props.open} fullScreen={isMobile}>\n            <DialogTitle>{t('stations.edit.title')}</DialogTitle>\n            <DialogContent dividers style={{ padding: '0 16px' }}>\n                {props.children}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose} color=\"primary\">\n                    {t('dialog.done')}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    ) : (\n        <Paper>{props.children}</Paper>\n    );\n};\n","import Dialog from './dialog';\n\nexport default Dialog;","import React, { useContext, useState, memo } from 'react';\nimport { useTranslation, Trans } from 'react-i18next';\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@material-ui/core';\nimport { ParamContext } from '../../context';\nimport { removeStation } from './utils';\n\ninterface Props {\n    open: boolean;\n    onClose: () => void;\n}\n\nexport default function StationDeleteDialog(props: Props & { stnId: string }) {\n    const { t } = useTranslation();\n\n    const { param, dispatch } = useContext(ParamContext);\n    const stnList = param.stn_list;\n\n    const [isError, setIsError] = useState(false);\n\n    const handleClick = (action: 'close' | 'accept') => () => {\n        if (action === 'accept') {\n            let res = removeStation(props.stnId, stnList);\n            if (res === false) {\n                setIsError(true);\n            } else {\n                if (param.current_stn_idx === props.stnId) {\n                    let newCurrentId = Object.keys(res).filter(id => !['linestart', 'lineend'].includes(id))[0];\n                    dispatch({ type: 'SET_CURRENT_STATION', stnId: newCurrentId });\n                }\n                dispatch({ type: 'UPDATE_STATION_LIST', stnList: res });\n            }\n        }\n        props.onClose();\n    };\n    return (\n        <>\n            <Dialog open={props.open} onClose={handleClick('close')}>\n                <DialogTitle>{t('stations.remove.title')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        <Trans i18nKey=\"stations.remove.msg\">{{ name: stnList[props.stnId]?.name.join() }}</Trans>\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClick('close')} color=\"primary\" autoFocus>\n                        {t('dialog.cancel')}\n                    </Button>\n                    <Button onClick={handleClick('accept')} color=\"primary\">\n                        {t('stations.remove.button')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n            <ErrorDialog open={isError} onClose={() => setIsError(false)} />\n        </>\n    );\n}\n\nconst ErrorDialog = memo(\n    (props: Props) => {\n        const { t } = useTranslation();\n        return (\n            <Dialog open={props.open} onClose={props.onClose}>\n                <DialogTitle>{t('stations.remove.error.title')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{t('stations.remove.error.msg')}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={props.onClose} color=\"primary\" autoFocus>\n                        {t('dialog.ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    },\n    (prevProps, nextProps) => prevProps.open === nextProps.open\n);\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    createStyles,\n    Fab,\n    Icon,\n    ListItemIcon,\n    ListItemText,\n    makeStyles,\n    Menu,\n    MenuItem,\n    Tooltip,\n} from '@material-ui/core';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../redux';\nimport { RmgStyle } from '../../constants/constants';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        fab: {\n            position: 'fixed',\n            right: theme.spacing(2),\n            bottom: theme.spacing(2),\n        },\n    })\n);\n\ninterface Props {\n    onAction: (action: string) => void;\n}\n\nconst StationFabs = React.memo(\n    (props: Props) => {\n        const { t } = useTranslation();\n        const rmgStyle = useSelector((store: RootState) => store.app.rmgStyle);\n        const classes = useStyles();\n        const [fabEl, setFabEl] = React.useState<null | HTMLElement>(null);\n\n        const handleAction = (action: string) => () => {\n            setFabEl(null);\n            props.onAction(action);\n        };\n\n        return (\n            <>\n                <Tooltip title={t('stations.fabs.tooltip')} aria-label=\"options\">\n                    <Fab color=\"primary\" className={classes.fab} onClick={e => setFabEl(e.target as HTMLElement)}>\n                        <Icon>more_vert</Icon>\n                    </Fab>\n                </Tooltip>\n\n                <Menu anchorEl={fabEl} open={Boolean(fabEl)} onClose={() => setFabEl(null)}>\n                    <MenuItem onClick={handleAction('add')}>\n                        <ListItemIcon>\n                            <Icon>add_box</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={t('stations.fabs.add')} />\n                    </MenuItem>\n                    <MenuItem onClick={handleAction('reverse')}>\n                        <ListItemIcon>\n                            <Icon>cached</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={t('stations.fabs.reverse')} />\n                    </MenuItem>\n                    {rmgStyle === RmgStyle.GZMTR && (\n                        <MenuItem onClick={handleAction('autonum')}>\n                            <ListItemIcon>\n                                <Icon>filter_1</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('design.autoNum.button')} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </>\n        );\n    },\n    () => true\n);\n\nexport default StationFabs;\n","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@material-ui/core';\nimport { ParamContext } from '../../context';\n\ninterface Props {\n    open: boolean;\n    onClose: () => void;\n}\n\nconst AutoNumDialog = (props: Props) => {\n    const { t } = useTranslation();\n\n    const { dispatch, branches } = React.useContext(ParamContext);\n\n    const handleClick = (action: 'ascend' | 'descend') => {\n        let branch0 = branches[0];\n        branch0.forEach((stnId, i) => {\n            let num: string;\n            if (action === 'ascend') {\n                num = i.toString().padStart(2, '0');\n            } else {\n                num = (branch0.length - 1 - i).toString().padStart(2, '0');\n            }\n            dispatch({ type: 'UPDATE_STATION_NUM', stnId, num });\n            // (window.myLine as RMGLineGZ).updateStnNum(stnId, num);\n        });\n        // props.paramUpdate('stn_list', getParams().stn_list);\n        props.onClose();\n    };\n\n    return React.useMemo(\n        () => (\n            <Dialog onClose={props.onClose} open={props.open}>\n                <DialogTitle>{t('design.autoNum.title')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{t('design.autoNum.msg')}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={props.onClose} color=\"primary\" autoFocus>\n                        {t('dialog.cancel')}\n                    </Button>\n                    <Button onClick={() => handleClick('ascend')} color=\"primary\">\n                        {t('design.autoNum.ascend')}\n                    </Button>\n                    <Button onClick={() => handleClick('descend')} color=\"primary\">\n                        {t('design.autoNum.descend')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [props.open]\n    );\n};\n\nexport default AutoNumDialog;\n","import React, { useContext, useState } from 'react';\nimport { createStyles, Grid, makeStyles } from '@material-ui/core';\nimport { ParamContext } from '../../context';\n\nimport StationList from './station-list';\nimport StationAddDialog from './add-diag';\nimport StationEditDialog from './edit-diag';\nimport StationDeleteDialog from './delete-diags';\nimport StationFabs from './fabs';\nimport AutoNumDialog from './auto-num-diag';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../redux';\nimport { RmgStyle } from '../../constants/constants';\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        gridContainer: {\n            height: '100%',\n            overflow: 'hidden',\n        },\n        gridItem: {\n            height: '100%',\n            overflow: 'auto',\n        },\n    })\n);\n\nconst PanelStations2 = () => {\n    const classes = useStyles();\n\n    const rmgStyle = useSelector((store: RootState) => store.app.rmgStyle);\n    const { dispatch } = useContext(ParamContext);\n\n    const [stnSelected, setStnSelected] = useState('');\n    const [isOpen, setIsOpen] = useState(false);\n\n    const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n    const [isAutoNumDialogOpen, setIsAutoNumDialogOpen] = useState(false);\n\n    const [stnToRemove, setStnToRemove] = useState('');\n    const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n\n    const handleAction = (stnId: string) => (action: 'edit' | 'remove') => {\n        if (action === 'edit') {\n            setStnSelected(stnId);\n            setIsOpen(true);\n        }\n        if (action === 'remove') {\n            if (stnSelected === stnId) setStnSelected('');\n            setStnToRemove(stnId);\n            setIsDeleteDialogOpen(true);\n        }\n    };\n\n    const fabsAction = (action: string) => {\n        if (action === 'add') {\n            setIsAddDialogOpen(true);\n        }\n        if (action === 'reverse') {\n            dispatch({ type: 'REVERSE_STATIONS' });\n        }\n        if (action === 'autonum') {\n            setIsAutoNumDialogOpen(true);\n        }\n    };\n\n    const stnAddDialogClose = (action: 'close' | string) => {\n        setIsAddDialogOpen(false);\n        if (action !== 'close') {\n            setStnSelected(action);\n            setIsOpen(true);\n        }\n    };\n\n    return (\n        <>\n            <Grid container spacing={1} className={classes.gridContainer}>\n                <Grid item xs={12} md={4} className={classes.gridItem}>\n                    <StationList selectedId={stnSelected} onAction={handleAction} />\n                </Grid>\n                <Grid item xs={8} className={classes.gridItem}>\n                    {stnSelected && (\n                        <StationEditDialog open={isOpen} stnId={stnSelected} onClose={() => setIsOpen(false)} />\n                    )}\n                </Grid>\n            </Grid>\n\n            <StationFabs onAction={fabsAction} />\n\n            <StationAddDialog open={isAddDialogOpen} onClose={stnAddDialogClose} />\n            <StationDeleteDialog\n                open={isDeleteDialogOpen}\n                onClose={() => setIsDeleteDialogOpen(false)}\n                stnId={stnToRemove}\n            />\n            {rmgStyle === RmgStyle.GZMTR && (\n                <AutoNumDialog open={isAutoNumDialogOpen} onClose={() => setIsAutoNumDialogOpen(false)} />\n            )}\n        </>\n    );\n};\n\nexport default PanelStations2;\n","import Panel from './panel2';\n\nexport default Panel;\n"],"sourceRoot":""}