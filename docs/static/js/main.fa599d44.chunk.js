(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[122],{110:function(n,e,t){"use strict";var r;t.d(e,"a",(function(){return r})),t.d(e,"b",(function(){return a})),function(n){n.Baku="baku",n.Barcelona="barcelona",n.Beijing="beijing",n.Cairo="cairo",n.Changsha="changsha",n.Chengdu="chengdu",n.Chongqing="chongqing",n.Dalian="dalian",n.Delhi="delhi",n.Dongguan="dongguan",n.Dortmund="dortmund",n.Edinburgh="edinburgh",n.Foshan="foshan",n.Glasgow="glasgow",n.Guangzhou="guangzhou",n.Hangzhou="hangzhou",n.Harbin="harbin",n.HongKong="hongkong",n.KlangValley="klangvalley",n.Kansai="kansai",n.Kaohsiung="kaohsiung",n.Istanbul="istanbul",n.London="london",n.Macao="macao",n.Madrid="madrid",n.Nanjing="nanjing",n.NewTaipei="newtaipei",n.Osaka="osaka",n.Oslo="oslo",n.Paris="paris",n.Qingdao="qingdao",n.SanFrancisco="sanfrancisco",n.SanktPeterburg="sanktpeterburg",n.Santiago="santiago",n.SaoPaulo="saopaulo",n.Seoul="seoul",n.Shanghai="shanghai",n.Shenzhen="shenzhen",n.Singapore="singapore",n.Stockholm="stockholm",n.Suzhou="suzhou",n.Taipei="taipei",n.Tehran="tehran",n.Tianjin="tianjin",n.Tokyo="tokyo",n.Toronto="toronto",n.TyneAndWear="tyneandwear",n.Wuxi="wuxi",n.Xiamen="xiamen",n.Xian="xian",n.Other="other"}(r||(r={}));var a=[{id:r.Baku,country:"AZ",name:{en:"Baku",az:"Bak\u0131","zh-Hans":"\u5df4\u5e93","zh-Hant":"\u5df4\u5eab"}},{id:r.Barcelona,country:"ES",name:{en:"Barcelona",es:"Barcelona","zh-Hans":"\u5df4\u585e\u7f57\u90a3","zh-HK":"\u5df4\u585e\u9686\u62ff","zh-TW":"\u5df4\u585e\u9686\u7d0d"}},{id:r.Beijing,country:"CN",name:{en:"Beijing",zh:"\u5317\u4eac"}},{id:r.Cairo,country:"EG",name:{en:"Cairo (Greater Cairo Area)",ar:"\u0627\u0644\u0642\u0627\u0647\u0631\u0629 (\u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0642\u0627\u0647\u0631\u0629 \u0627\u0644\u0643\u0628\u0631\u0649)","zh-Hans":"\u5f00\u7f57\uff08\u5927\u5f00\u7f57\u5730\u533a\uff09","zh-Hant":"\u958b\u7f85\uff08\u5927\u958b\u7f85\u5730\u5340\uff09"}},{id:r.Changsha,country:"CN",name:{en:"Changsha","zh-Hans":"\u957f\u6c99","zh-Hant":"\u9577\u6c99"}},{id:r.Chengdu,country:"CN",name:{en:"Chengdu",zh:"\u6210\u90fd"}},{id:r.Chongqing,country:"CN",name:{en:"Chongqing","zh-Hans":"\u91cd\u5e86","zh-Hant":"\u91cd\u6176"}},{id:r.Dalian,country:"CN",name:{en:"Dalian","zh-Hans":"\u5927\u8fde","zh-Hant":"\u5927\u9023"}},{id:r.Delhi,country:"IN",name:{en:"Delhi",hi:"\u0926\u093f\u0932\u094d\u0932\u0940","zh-Hans":"\u5fb7\u91cc","zh-Hant":"\u5fb7\u91cc"}},{id:r.Dongguan,country:"CN",name:{en:"Dongguan","zh-Hans":"\u4e1c\u839e","zh-Hant":"\u6771\u839e"}},{id:r.Dortmund,country:"DE",name:{en:"Dortmund",de:"Dortmund","zh-Hans":"\u591a\u7279\u8499\u5fb7","zh-Hant":"\u591a\u7279\u8499\u5fb7"}},{id:r.Edinburgh,country:"GBSCT",name:{en:"Edinburgh",ga:"D\xf9n \xc8ideann","zh-Hans":"\u7231\u4e01\u5821","zh-Hant":"\u611b\u4e01\u5821"}},{id:r.Foshan,country:"CN",name:{en:"Foshan",zh:"\u4f5b\u5c71"}},{id:r.Glasgow,country:"GBSCT",name:{en:"Glasgow",ga:"Glaschu",zh:"\u683c\u62c9\u65af\u54e5"}},{id:r.Guangzhou,country:"CN",name:{en:"Guangzhou","zh-Hans":"\u5e7f\u5dde","zh-Hant":"\u5ee3\u5dde"}},{id:r.Hangzhou,country:"CN",name:{en:"Hangzhou",zh:"\u676d\u5dde"}},{id:r.Harbin,country:"CN",name:{en:"Harbin","zh-Hans":"\u54c8\u5c14\u6ee8","zh-Hant":"\u54c8\u723e\u6ff1"}},{id:r.HongKong,country:"HK",name:{en:"Hong Kong",zh:"\u9999\u6e2f"}},{id:r.KlangValley,country:"MY",name:{en:"Greater KL/Klang Valley",ms:"Greater KL/Klang Valley","zh-Hans":"\u5927\u5409\u9686\u5761/\u5df4\u751f\u8c37","zh-Hant":"\u5927\u5409\u9686\u5761/\u5df4\u751f\u8c37"}},{id:r.Kansai,country:"JP",name:{en:"Kansai Area",ja:"\u8fd1\u757f\u5730\u65b9","zh-Hans":"\u8fd1\u757f\u5730\u65b9\uff08\u5173\u897f\u5730\u65b9\uff09","zh-Hant":"\u8fd1\u757f\u5730\u65b9\uff08\u95dc\u897f\u5730\u65b9\uff09"}},{id:r.Kaohsiung,country:"TW",name:{en:"Kaohsiung",zh:"\u9ad8\u96c4"}},{id:r.Istanbul,country:"TR",name:{en:"Istanbul",tr:"\u0130stanbul","zh-Hans":"\u4f0a\u65af\u5766\u5e03\u5c14","zh-Hant":"\u4f0a\u65af\u5766\u5e03\u723e"}},{id:r.London,country:"GBENG",name:{en:"London","zh-Hans":"\u4f26\u6566","zh-Hant":"\u502b\u6566"}},{id:r.Macao,country:"MO",name:{en:"Macao",pt:"Macau","zh-Hans":"\u6fb3\u95e8","zh-Hant":"\u6fb3\u9580"}},{id:r.Madrid,country:"ES",name:{en:"Madrid","zh-Hans":"\u9a6c\u5fb7\u91cc","zh-Hant":"\u99ac\u5fb7\u91cc"}},{id:r.Nanjing,country:"CN",name:{en:"Nanjing",zh:"\u5357\u4eac"}},{id:r.NewTaipei,country:"TW",name:{en:"New Taipei",zh:"\u65b0\u5317"}},{id:r.Osaka,country:"JP",name:{en:"Osaka",ja:"\u5927\u962a",zh:"\u5927\u962a"}},{id:r.Oslo,country:"NO",name:{en:"Oslo","zh-Hans":"\u5965\u65af\u9646","zh-Hant":"\u5967\u65af\u9678"}},{id:r.Paris,country:"FR",name:{en:"Paris",zh:"\u5df4\u9ece"}},{id:r.Qingdao,country:"CN",name:{en:"Qingdao","zh-Hans":"\u9752\u5c9b","zh-Hant":"\u9752\u5cf6"}},{id:r.SanFrancisco,country:"US",name:{en:"San Francisco","zh-Hans":"\u65e7\u91d1\u5c71","zh-HK":"\u4e09\u85e9\u5e02","zh-TW":"\u820a\u91d1\u5c71"}},{id:r.SanktPeterburg,country:"RU",name:{en:"Sankt Peterburg",ru:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433","zh-Hans":"\u5723\u5f7c\u5f97\u5821","zh-Hant":"\u8056\u5f7c\u5f97\u5821"}},{id:r.Santiago,country:"CL",name:{en:"Santiago",es:"Santiago","zh-Hans":"\u5723\u5730\u4e9a\u54e5","zh-Hant":"\u8056\u5730\u4e9e\u54e5 "}},{id:r.SaoPaulo,country:"BR",name:{en:"Sao Paulo",pt:"S\xe3o Paulo","zh-Hans":"\u5723\u4fdd\u7f57","zh-Hant":"\u8056\u4fdd\u7f85"}},{id:r.Seoul,country:"KR",name:{en:"Seoul (Metropolitan Area)",ko:"\uc11c\uc6b8(\uc218\ub3c4\uad8c)","zh-Hans":"\u9996\u5c14\uff08\u9996\u90fd\u5708\uff09","zh-Hant":"\u9996\u723e\uff08\u9996\u90fd\u5708\uff09"}},{id:r.Shanghai,country:"CN",name:{en:"Shanghai",zh:"\u4e0a\u6d77"}},{id:r.Shenzhen,country:"CN",name:{en:"Shenzhen",zh:"\u6df1\u5733"}},{id:r.Singapore,country:"SG",name:{en:"Singapore",zh:"\u65b0\u52a0\u5761"}},{id:r.Stockholm,country:"SE",name:{en:"Stockholm","zh-Hans":"\u65af\u5fb7\u54e5\u5c14\u6469","zh-Hant":"\u65af\u5fb7\u54e5\u723e\u6469"}},{id:r.Suzhou,country:"CN",name:{en:"Suzhou","zh-Hans":"\u82cf\u5dde","zh-Hant":"\u8607\u5dde"}},{id:r.Taipei,country:"TW",name:{en:"Taipei",zh:"\u53f0\u5317"}},{id:r.Tehran,country:"IR",name:{en:"Tehran",fa:"\u062a\u0647\u0631\u0627\u0646\u200e","zh-Hans":"\u5fb7\u9ed1\u5170","zh-Hant":"\u5fb7\u9ed1\u862d"}},{id:r.Tianjin,country:"CN",name:{en:"Tianjin",zh:"\u5929\u6d25"}},{id:r.Tokyo,country:"JP",name:{en:"Tokyo (Greater Tokyo Area)",ja:"\u6771\u4eac\uff08\u9996\u90fd\u570f\uff09","zh-Hans":"\u4e1c\u4eac\uff08\u9996\u90fd\u5708\uff09","zh-Hant":"\u6771\u4eac\uff08\u9996\u90fd\u5708\uff09"}},{id:r.Toronto,country:"CA",name:{en:"Toronto","zh-Hans":"\u591a\u4f26\u591a","zh-Hant":"\u591a\u502b\u591a"}},{id:r.TyneAndWear,country:"GBENG",name:{en:"Tyne and Wear","zh-Hans":"\u6cf0\u6069-\u5a01\u5c14","zh-HK":"\u6cf0\u5a01","zh-TW":"\u6cf0\u6069-\u5a01\u723e"}},{id:r.Wuxi,country:"CN",name:{en:"Wuxi","zh-Hans":"\u65e0\u9521","zh-Hant":"\u7121\u932b"}},{id:r.Xiamen,country:"CN",name:{en:"Xiamen","zh-Hans":"\u53a6\u95e8","zh-Hant":"\u5ec8\u9580"}},{id:r.Xian,country:"CN",name:{en:"Xi'an",zh:"\u897f\u5b89"}},{id:r.Other,country:"UN",name:{en:"Customise","zh-Hans":"\u81ea\u5b9a\u4e49","zh-Hant":"\u81ea\u8a02"}}]},124:function(n){n.exports=JSON.parse('{"a":"5.0.0-0"}')},141:function(n,e,t){"use strict";t.r(e),t.d(e,"reRenderApp",(function(){return te}));var r=t(19),a=t.n(r),i=t(27),c=t(56),o=t(0),s=t.n(o),u=t(15),l=(t(178),t(104)),d=t(73),h=t(128),f=t(130);l.a.use(h.a).use(f.a).use(d.e).init({fallbackLng:{"zh-CN":["zh-Hans","en"],"zh-Hant":["zh-HK","en"],"zh-HK":["zh-Hant","en"],"zh-TW":["zh-HK","zh-Hant"],default:["en"]},backend:{loadPath:"/uat-rail-map-generator/locale/{{lng}}.json"},interpolation:{escapeValue:!1}}).then((function(n){document.title=n("title"),document.documentElement.setAttribute("lang",l.a.language)}));var b=t(99),g=t(13),j=t(24),p=t(200),m=t(225),O=t(246),v=t(228),y=t(229),x=t(230),S=t(231),_=t(245),w=t(234),z=t(235),T=t(201),k=t(237),E=t(238),N=t(8),H=t(22),C=t(25),R=t(4),I=Object(m.a)((function(n){return Object(O.a)({rootLight:{backgroundColor:n.palette.primary.main},rootDark:{backgroundColor:n.palette.background.paper},title:{flexGrow:1,color:"#fff"},menuButton:{color:"#fff"}})})),M=function(){var n=Object(p.a)(),e=n.t,t=n.i18n,r=I(),a=Object(v.a)("(prefers-color-scheme: dark)");return s.a.useMemo((function(){return Object(R.jsx)(y.a,{position:"sticky",className:a?r.rootDark:r.rootLight,children:Object(R.jsxs)(x.a,{variant:"dense",children:[Object(R.jsx)(S.a,{variant:"h6",className:r.title,color:"textPrimary",children:"/uat-rail-map-generator".includes("uat")?e("titleUAT"):e("title")}),Object(R.jsx)(D,{}),Object(R.jsx)(P,{})]})})}),[a,t.language])},D=function(){var n=Object(p.a)().t,e=I(),t=Object(H.b)(),r=Object(H.c)((function(n){return n.param.style})),a=s.a.useState(null),i=Object(j.a)(a,2),c=i[0],o=i[1],u=function(n){return function(){t(Object(C.g)(n)),o(null)}};return s.a.useMemo((function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(_.a,{title:n("toggle.tooltip")||"",children:Object(R.jsx)(w.a,{onClick:function(n){return o(n.currentTarget)},className:e.menuButton,children:Object(R.jsx)(z.a,{children:"photo_library"})})}),Object(R.jsxs)(T.a,{anchorEl:c,open:Boolean(c),onClose:function(){return o(null)},children:[N.p[r].map((function(e){return Object(R.jsx)(k.a,{onClick:u(e),children:n("toggle."+e)},e)})),Object(R.jsx)(E.a,{style:{margin:"6px 0"}}),Object(R.jsx)(k.a,{onClick:u(N.a),children:n("toggle.all")})]})]})}),[r,c,e.menuButton])},P=function(){var n=Object(p.a)().t,e=I(),t=Object(H.b)();return s.a.useMemo((function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(_.a,{title:n("zoom.out")||"",children:Object(R.jsx)(w.a,{onClick:function(){return t(Object(C.m)())},className:e.menuButton,children:Object(R.jsx)(z.a,{children:"zoom_out"})})}),Object(R.jsx)(_.a,{title:n("zoom.in")||"",children:Object(R.jsx)(w.a,{onClick:function(){return t(Object(C.l)())},className:e.menuButton,children:Object(R.jsx)(z.a,{children:"zoom_in"})})})]})}),[e.menuButton])},A=t(240),B=t(12),F=t(44),G=t(243),L=t(239),W=o.lazy((function(){return Promise.all([t.e(0),t.e(3),t.e(145),t.e(131)]).then(t.bind(null,432))})),K=o.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(117),t.e(128)]).then(t.bind(null,436))})),U=o.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(116),t.e(123)]).then(t.bind(null,441))})),Z=o.lazy((function(){return Promise.all([t.e(0),t.e(3),t.e(133)]).then(t.bind(null,430))})),V=o.lazy((function(){return t.e(127).then(t.bind(null,437))})),J=Object(m.a)((function(n){var e;return Object(O.a)({root:Object(B.a)({display:"flex",flexDirection:"row",height:"100%"},n.breakpoints.down("xs"),{flexDirection:"column"}),typography:{background:n.palette.background.default},tab:(e={padding:"6px 24px",height:48,"& .MuiTab-wrapper":{flexDirection:"row"}},Object(B.a)(e,n.breakpoints.up("sm"),{"& .MuiTab-wrapper":{justifyContent:"flex-start"}}),Object(B.a)(e,n.breakpoints.down("xs"),{minWidth:"calc(100% / 5)"}),Object(B.a)(e,"&.MuiTab-labelIcon",{minHeight:"unset","& .MuiTab-wrapper":{"& > *:first-child":{marginBottom:0},"& > *:not(first-child)":{paddingLeft:8}}}),e),tabs:{overflow:"auto","&::-webkit-scrollbar":{width:0},scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},tabpanel:{overflow:"auto",flex:1,padding:n.spacing(3),paddingBottom:0,height:"calc(100% - ".concat(n.spacing(3),"px)"),display:"flex",justifyContent:"center",alignItems:"flex-start"}})}));function X(){var n=Object(p.a)(),e=n.t,t=n.i18n,r=J(),a=Object(F.a)(),i=Object(v.a)(a.breakpoints.down("xs")),c=o.useState(0),s=Object(j.a)(c,2),u=s[0],l=s[1],d=o.useMemo((function(){return Object(R.jsx)(S.a,{className:"".concat(r.typography," ").concat(r.tabs),component:"div",children:Object(R.jsx)(G.a,{value:u,orientation:i?"horizontal":"vertical",indicatorColor:"primary",textColor:"primary",onChange:function(n,e){return l(e)},variant:"scrollable",scrollButtons:"off",children:[["file","insert_drive_file"],["layout","panorama"],["design","brush"],["stations","directions_transit"],["info","info"]].map((function(n,t){return Object(R.jsx)(L.a,{label:Object(R.jsx)("span",{children:e("tab."+n[0])}),icon:Object(R.jsx)(z.a,{children:n[1]}),className:r.tab},t)}))})})}),[u,t.language,r.tab,i]);return Object(R.jsxs)("div",{className:r.root,children:[d,Object(R.jsx)(S.a,{className:"".concat(r.typography," ").concat(r.tabpanel),component:"div",role:"tabpanel",children:Object(R.jsx)(o.Suspense,{fallback:Object(R.jsx)(A.a,{}),children:function(n){switch(n){default:return Object(R.jsx)(W,{});case 1:return Object(R.jsx)(K,{});case 2:return Object(R.jsx)(U,{});case 3:return Object(R.jsx)(Z,{});case 4:return Object(R.jsx)(V,{})}}(u)})})]})}function Y(){return Object(R.jsx)(o.Suspense,{fallback:Object(R.jsx)(A.a,{}),children:Object(R.jsx)(X,{})})}var q=t(137),Q=t(241),$=t(242),nn=t(76),en=t(78),tn=t(112),rn=t(111),an=function(n){Object(tn.a)(t,n);var e=Object(rn.a)(t);function t(n){var r;return Object(nn.a)(this,t),(r=e.call(this,n)).state={hasError:!1},r}return Object(en.a)(t,[{key:"componentDidCatch",value:function(n,e){}},{key:"render",value:function(){return this.state.hasError?Object(R.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0}}}]),t}(s.a.Component);function cn(n){var e,t=n.type,r=n.style,a=n.svgWidth,i=n.svgHeight,c=n.canvasScale,u=n.theme,l=n.children;return Object(o.useEffect)((function(){return document.getElementById("css_"+t).href="/uat-rail-map-generator"+"/styles/".concat(t,"_").concat(r,".css"),function(){document.getElementById("css_"+t).href=""}}),[r]),Object(R.jsxs)("svg",{id:t,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",height:i*c,viewBox:"0 0 ".concat(a," ").concat(i),colorInterpolationFilters:"sRGB",style:(e={},Object(B.a)(e,"--rmg-svg-width",a+"px"),Object(B.a)(e,"--rmg-svg-height",i+"px"),Object(B.a)(e,"--rmg-theme-colour",u[2]),Object(B.a)(e,"--rmg-theme-fg",u[3]),e),children:[Object(R.jsx)("rect",{id:"canvas-bg",fill:"white",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}}),Object(R.jsx)(s.a.Suspense,{fallback:Object(R.jsx)(A.a,{}),children:Object(R.jsx)(an,{children:l})}),Object(R.jsx)("rect",{id:"canvas-border",fill:"none",strokeWidth:3,stroke:"none",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}})]})}var on,sn,un,ln,dn=t(41),hn=t(17),fn=Object(m.a)((function(){return Object(O.a)({root:{display:"flex",flexDirection:"row",overflowX:"scroll","&::before, &::after":{content:'""',margin:"auto"},"& > svg":{flex:"0 0 auto",border:"1px solid black"}}})}));function bn(){var n=fn(),e=Object(g.e)(),t=Object(g.f)(),r=Object(dn.b)(),a=Object(H.c)((function(n){return n.app})),i=a.canvasToShow,c=a.canvasScale,s=Object(H.c)((function(n){return n.param})),u=s.svgWidth,l=s.svg_height,d=s.style,h=s.theme;if(e.pathname!=="/"+d&&e.pathname!=="/v5/"+d){var f=e.pathname.split("/").slice(-1)[0];Object.values(N.k).includes(f)?r(Object(hn.T)(f)):t(d)}Object(o.useEffect)((function(){document.getElementById("css_share").href="/uat-rail-map-generator"+"/styles/share_".concat(d,".css")}),[d]);var b=Object.keys(Sn[d]).filter((function(n){return"all"===i||i===n}));return Object(R.jsx)("div",{className:n.root,children:b.map((function(n){return Object(R.jsx)(cn,{type:n,style:d,svgWidth:u[n],svgHeight:l,canvasScale:c,theme:h,children:Sn[d][n]},n+d)}))})}var gn=Object(o.lazy)((function(){return t.e(141).then(t.bind(null,438))})),jn=Object(o.lazy)((function(){return t.e(138).then(t.bind(null,431))})),pn=Object(o.lazy)((function(){return t.e(119).then(t.bind(null,420))})),mn=Object(o.lazy)((function(){return t.e(139).then(t.bind(null,433))})),On=Object(o.lazy)((function(){return t.e(120).then(t.bind(null,421))})),vn=Object(o.lazy)((function(){return t.e(142).then(t.bind(null,422))})),yn=Object(o.lazy)((function(){return t.e(140).then(t.bind(null,439))})),xn=Object(o.lazy)((function(){return t.e(121).then(t.bind(null,444))})),Sn=(ln={},Object(B.a)(ln,N.k.GZMTR,(on={},Object(B.a)(on,N.c.RunIn,Object(R.jsx)(gn,{})),Object(B.a)(on,N.c.RailMap,Object(R.jsx)(jn,{})),on)),Object(B.a)(ln,N.k.MTR,(sn={},Object(B.a)(sn,N.c.Destination,Object(R.jsx)(pn,{})),Object(B.a)(sn,N.c.RailMap,Object(R.jsx)(mn,{})),sn)),Object(B.a)(ln,N.k.SHMetro,(un={},Object(B.a)(un,N.c.Destination,Object(R.jsx)(On,{})),Object(B.a)(un,N.c.RunIn,Object(R.jsx)(vn,{})),Object(B.a)(un,N.c.RailMap,Object(R.jsx)(yn,{})),Object(B.a)(un,N.c.Indoor,Object(R.jsx)(xn,{})),un)),ln),_n=t(117),wn=t(119),zn=t(120);function Tn(){var n=Object(dn.b)(),e=Object(H.c)((function(n){return n.app})),t=e.sidePanelMode,r=e.selectedStation,a=Object(H.c)((function(n){return n.param.stn_list[r]})).name;return Object(R.jsx)(_n.c,{as:"section",height:"100%",maxW:t!==N.n.CLOSE?320:0,visibility:t!==N.n.CLOSE?"initial":"hidden",position:"relative",boxShadow:"xl",shrink:0,direction:"column",transition:"0.3s",children:Object(R.jsx)(_n.b,{width:320,children:Object(R.jsxs)(wn.a,{status:"info",variant:"solid",size:"xs",pl:3,pr:1,pb:0,pt:0,children:[Object(R.jsx)(wn.b,{}),a[0]+" - "+a[1],Object(R.jsx)(zn.a,{ml:"auto",onClick:function(){n(Object(C.k)(N.n.CLOSE))}})]})})})}var kn=t(121),En=t(122);function Nn(){return Object(R.jsxs)(kn.a,{width:"unset",mt:-1,children:[Object(R.jsx)(kn.b,{size:"xs",sx:{fontSize:12,marginRight:0,marginBottom:-.5},children:"Canvas to show"}),Object(R.jsxs)(En.b,{size:"xs",isAttached:!0,variant:"outline",colorScheme:"teal",children:[Object(R.jsx)(En.a,{variant:"solid",children:"Destination"}),Object(R.jsx)(En.a,{children:"Rail map"})]})]})}var Hn=t(125),Cn=t(53);function Rn(){return Object(R.jsxs)(Hn.a,{children:[Object(R.jsx)(Hn.b,{as:En.a,variant:"ghost",size:"sm",rightIcon:Object(R.jsx)(Cn.a,{}),children:"Downloads"}),Object(R.jsxs)(Hn.d,{children:[Object(R.jsx)(Hn.c,{children:"Configuration file"}),Object(R.jsx)(Hn.c,{children:"Images"})]})]})}function In(){return Object(R.jsxs)(_n.d,{ml:"auto",children:[Object(R.jsx)(Rn,{}),Object(R.jsx)(En.a,{variant:"ghost",size:"sm",children:"Upload"}),Object(R.jsx)(En.a,{variant:"outline",size:"sm",colorScheme:"brand",leftIcon:Object(R.jsx)(Cn.d,{}),children:"Add station"})]})}function Mn(){return Object(R.jsxs)(_n.c,{align:"center",wrap:"wrap",pl:3,pr:3,pb:2,pt:2,children:[Object(R.jsx)(Nn,{}),Object(R.jsx)(In,{})]})}var Dn=t(70),Pn=t(123);function An(n){var e=n.data,t=n.fields,r=Object(Dn.c)("gray.50","gray.700"),a=e.map((function(n){return{data:n,display:t.reduce((function(e,t){var r=t.key?(n[t.key]||"").toString():t.displayHandler(n);return e[t.label]={value:r},e}),{})}}));return Object(R.jsx)(_n.b,{bg:r,children:Object(R.jsxs)(Pn.a,{size:"sm",children:[Object(R.jsx)(Pn.e,{children:Object(R.jsx)(Pn.f,{children:t.map((function(n,e){return Object(R.jsx)(Pn.d,{children:n.label},e)}))})}),Object(R.jsx)(Pn.b,{children:a.map((function(n){return Object(R.jsx)(Pn.f,{tabIndex:-1,selected:n.data.isSelected,hover:!0,children:t.map((function(e,t){return Object(R.jsx)(Pn.c,{children:n.display[e.label].value},n.data.id+"-"+t)}))},n.data.id)}))})]})})}function Bn(n){var e=n.stationId,t=Object(dn.b)();return Object(R.jsxs)(_n.d,{children:[Object(R.jsx)(En.c,{size:"xs","aria-label":"Set as current station",onClick:function(){return t(Object(hn.H)(e))},icon:Object(R.jsx)(Cn.e,{})}),Object(R.jsx)(En.c,{size:"xs","aria-label":"Edit this station",onClick:function(){t(Object(C.j)(e)),t(Object(C.k)(N.n.STATION))},icon:Object(R.jsx)(Cn.c,{})}),Object(R.jsx)(En.c,{size:"xs","aria-label":"Delete this station",onClick:function(){},icon:Object(R.jsx)(Cn.b,{})})]})}function Fn(){var n=Object(H.c)((function(n){return n.app.selectedStation})),e=Object(H.c)((function(n){return n.param.stn_list})),t=Object.entries(e).filter((function(n){var e=Object(j.a)(n,1)[0];return!["linestart","lineend"].includes(e)})).map((function(e){var t=Object(j.a)(e,2),r=t[0],a=t[1];return{id:r,chineseName:a.name[0],englishName:a.name[1],interchange:a.transfer.info.map((function(n){return n.length})).join("-"),isSelected:r===n}})),r=[{key:"chineseName",label:"Chinese name"},{key:"englishName",label:"English name"},{key:"interchange",label:"Interchange"},{label:"Actions",displayHandler:function(n){return Object(R.jsx)(Bn,{stationId:n.id})}}];return Object(R.jsx)(An,{data:t,fields:r})}var Gn,Ln=t(124);!function(n){n.DEV="DEV",n.UAT="UAT",n.PRD="PRD"}(Gn||(Gn={}));function Wn(){var n="localhost"===window.location.hostname?Gn.DEV:window.location.pathname.includes("uat")?Gn.UAT:Gn.PRD;return Object(R.jsx)(_n.c,{p:1,align:"center",justify:"space-between",children:Object(R.jsx)(_n.b,{ml:2,children:Object(R.jsxs)(_n.e,{as:"h4",size:"md",children:["Rail Map Generator",Object(R.jsx)(_n.a,{ml:1,colorScheme:function(n){switch(n){case Gn.DEV:return"red";case Gn.UAT:return"orange";case Gn.PRD:return"green"}}(n),children:n===Gn.PRD?Ln.a:n})]})})})}var Kn=t(37),Un=Object(Kn.b)({config:{initialColorMode:"light",useSystemColorMode:!0}});function Zn(){return Object(R.jsx)(Kn.a,{theme:Un,children:Object(R.jsxs)(_n.c,{direction:"column",height:"100%",overflow:"hidden",children:[Object(R.jsx)(Wn,{}),Object(R.jsxs)(_n.c,{direction:"column",flex:1,overflow:"hidden",children:[Object(R.jsx)(Mn,{}),Object(R.jsxs)(_n.c,{flex:1,overflow:"hidden",children:[Object(R.jsxs)(_n.c,{as:"section",direction:"column",flex:1,ml:1,mr:1,overflow:"hidden",children:[Object(R.jsx)(_n.b,{children:Object(R.jsx)(bn,{})}),Object(R.jsx)(_n.b,{flex:1,overflowY:"auto",children:Object(R.jsx)(Fn,{})})]}),Object(R.jsx)(Tn,{})]})]})]})})}var Vn=Object(q.a)({palette:{type:"dark",primary:{main:"#bb86fc"},secondary:{main:"#018786"},error:{main:"#cf6679"}},overrides:{MuiDialog:{paper:{minWidth:280}}}}),Jn=Object(q.a)({palette:{primary:{light:"#bb86fc",main:"#6200ee"},secondary:{main:"#018786"},error:{main:"#b00020"}},overrides:{MuiDialog:{paper:{minWidth:280}}}});function Xn(){var n=Object(v.a)("(prefers-color-scheme: dark)")?Vn:Jn;return Object(R.jsx)(b.a,{basename:"/uat-rail-map-generator",children:Object(R.jsxs)(g.c,{children:[Object(R.jsx)(g.a,{path:"/v5/*",element:Object(R.jsx)(Zn,{})}),Object(R.jsx)(g.a,{path:"*",element:Object(R.jsxs)(Q.a,{theme:n,children:[Object(R.jsx)(s.a.Suspense,{fallback:Object(R.jsx)($.a,{}),children:Object(R.jsx)(M,{})}),Object(R.jsx)(Yn,{})]})})]})})}var Yn=function(){var n=Object(H.c)((function(n){return n.param})),e=JSON.stringify(n);return Object(o.useEffect)((function(){window.rmgStorage.writeFile("rmgParam",e).then()}),[e]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{style:{overflowY:"auto"},children:Object(R.jsx)(bn,{})}),Object(R.jsx)("div",{style:{flex:1,overflow:"hidden"},children:Object(R.jsx)(Y,{})}),Object(R.jsx)("canvas",{style:{display:"none"}})]})},qn=t(95);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qn,$n=function(){function n(){Object(nn.a)(this,n),this.currentBusyFilename=void 0,this.currentBusyFilename=!1}return Object(en.a)(n,[{key:"init",value:function(){var n=Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.warn("Using localStorage, please update your browser"),window.localStorage){n.next=4;break}throw alert("Local storage is not available! Please upgrade to a newer browser!"),new Error("LocalStorage unavailable");case 4:n.prev=4,window.localStorage.setItem("storage_test","1"),window.localStorage.removeItem("storage_test"),n.next=13;break;case 9:throw n.prev=9,n.t0=n.catch(4),alert("Local storage is not accessible! Please modify your browser's settings or try with another browser!"),new Error("LocalStorage no write permission");case 13:case"end":return n.stop()}}),n,null,[[4,9]])})));return function(){return n.apply(this,arguments)}}()},{key:"writeFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e,t){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.currentBusyFilename===e&&console.warn("Attempt to write",e,"while write process is not finished!"),this.currentBusyFilename=e,window.localStorage.setItem(e,t),this.currentBusyFilename=!1;case 4:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}()},{key:"readFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e){var t;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.currentBusyFilename===e&&console.warn("Attempt to read",e,"while write process is not finished!"),t=window.localStorage.getItem(e)){n.next=4;break}throw new Error("FILE_NOT_FOUND");case 4:return n.abrupt("return",t);case 5:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.currentBusyFilename===e&&console.warn("Attempt to delete",e,"while write process is not finished!"),this.currentBusyFilename=e,window.localStorage.removeItem(e),this.currentBusyFilename=!1;case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()}]),n}();function ne(){return(ne=Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.indexedDB){n.next=3;break}return console.log("IndexedDB not supported"),n.abrupt("return",new $n);case 3:return n.next=5,new Promise((function(n){try{var e=window.indexedDB.open("indexeddb_feature_detection",1);e.onerror=function(e){console.log("IndexedDB can NOT be accessed:",e),console.log("Fallback to LocalStorage"),n(new $n)},e.onsuccess=function(){console.log("IndexedDB can be accessed"),n(new $n)}}catch(t){console.warn("Error while opening IndexedDB:",t),n(new $n)}}));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)})),(Qn=document.head).append.apply(Qn,Object(c.a)(["share"].concat(Object(c.a)(Object.values(N.c))).map((function(n){var e=document.createElement("link");return e.rel="stylesheet",e.id="css_"+n,e}))));var ee=function(){u.render(Object(R.jsx)(dn.a,{store:H.a,children:Object(R.jsx)(Xn,{})}),document.getElementById("root"))},te=function(n){u.unmountComponentAtNode(document.getElementById("root")),window.history.pushState({},"","/uat-rail-map-generator/"+n.style),H.a.dispatch(Object(hn.L)(n)),ee()};(function(){return ne.apply(this,arguments)})().then(function(){var n=Object(i.a)(a.a.mark((function n(e){var r,i,c,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.init();case 2:return n.prev=2,n.next=5,e.readFile("rmgParam");case 5:return r=n.sent,i=Object(qn.c)(JSON.parse(r)),n.next=9,e.writeFile("rmgParam",JSON.stringify(i));case 9:n.next=20;break;case 11:return n.prev=11,n.t0=n.catch(2),console.warn("Error in reading rmgParam",n.t0),n.next=16,t.e(2).then(t.bind(null,320));case 16:return c=n.sent,o=Object(qn.c)(c.default),n.next=20,e.writeFile("rmgParam",JSON.stringify(o));case 20:return n.prev=20,window.rmgStorage=e,n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[2,11,20,23]])})));return function(e){return n.apply(this,arguments)}}()).then(Object(i.a)(a.a.mark((function n(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.rmgStorage.readFile("rmgParam");case 2:e=n.sent,H.a.dispatch(Object(hn.L)(JSON.parse(e)));case 4:case"end":return n.stop()}}),n)})))).then(Object(i.a)(a.a.mark((function n(){var e,t,r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.rmgStorage.readFile("rmgScale");case 3:e=n.sent,(t=Number(e))>=.1&&H.a.dispatch(Object(C.h)(t)),n.next=15;break;case 8:return n.prev=8,n.t0=n.catch(0),console.warn("Error in reading rmgScale file",n.t0),console.log("Initiating rmgScale as 1"),n.next=14,window.rmgStorage.writeFile("rmgScale","1");case 14:H.a.dispatch(Object(C.h)(1));case 15:return n.prev=15,n.next=18,window.rmgStorage.readFile("rmgCanvas");case 18:r=n.sent,H.a.dispatch(Object(C.i)(r)),n.next=29;break;case 22:return n.prev=22,n.t1=n.catch(15),console.warn("Error in reading rmgCanvas file",n.t1),console.log('Initiating rmgCanvas as "all"'),n.next=28,window.rmgStorage.writeFile("rmgCanvas",N.a);case 28:H.a.dispatch(Object(C.i)(N.a));case 29:window.rmgStore=H.a;case 30:case"end":return n.stop()}}),n,null,[[0,8],[15,22]])})))).then((function(){ee()})).then((function(){setInterval(Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.rmgStorage.writeFile("rmgParamRedux",JSON.stringify(window.rmgStore.getState().param));case 2:console.log("Parameter auto saved!");case 3:case"end":return n.stop()}}),n)}))),6e4)}))},17:function(n,e,t){"use strict";t.d(e,"g",(function(){return c})),t.d(e,"r",(function(){return o})),t.d(e,"s",(function(){return s})),t.d(e,"t",(function(){return u})),t.d(e,"v",(function(){return l})),t.d(e,"a",(function(){return d})),t.d(e,"l",(function(){return h})),t.d(e,"e",(function(){return f})),t.d(e,"f",(function(){return b})),t.d(e,"u",(function(){return g})),t.d(e,"h",(function(){return j})),t.d(e,"d",(function(){return p})),t.d(e,"n",(function(){return m})),t.d(e,"i",(function(){return O})),t.d(e,"o",(function(){return v})),t.d(e,"m",(function(){return y})),t.d(e,"k",(function(){return x})),t.d(e,"j",(function(){return S})),t.d(e,"c",(function(){return _})),t.d(e,"b",(function(){return w})),t.d(e,"p",(function(){return z})),t.d(e,"q",(function(){return T})),t.d(e,"L",(function(){return k})),t.d(e,"U",(function(){return E})),t.d(e,"V",(function(){return N})),t.d(e,"T",(function(){return H})),t.d(e,"X",(function(){return C})),t.d(e,"G",(function(){return R})),t.d(e,"O",(function(){return I})),t.d(e,"J",(function(){return M})),t.d(e,"K",(function(){return D})),t.d(e,"W",(function(){return P})),t.d(e,"M",(function(){return A})),t.d(e,"I",(function(){return B})),t.d(e,"Q",(function(){return F})),t.d(e,"N",(function(){return G})),t.d(e,"R",(function(){return L})),t.d(e,"P",(function(){return W})),t.d(e,"x",(function(){return U})),t.d(e,"bb",(function(){return Z})),t.d(e,"D",(function(){return V})),t.d(e,"Y",(function(){return X})),t.d(e,"B",(function(){return Y})),t.d(e,"Z",(function(){return Q})),t.d(e,"z",(function(){return $})),t.d(e,"H",(function(){return nn})),t.d(e,"S",(function(){return tn})),t.d(e,"F",(function(){return rn})),t.d(e,"fb",(function(){return an})),t.d(e,"jb",(function(){return cn})),t.d(e,"gb",(function(){return on})),t.d(e,"w",(function(){return sn})),t.d(e,"C",(function(){return un})),t.d(e,"ab",(function(){return ln})),t.d(e,"hb",(function(){return dn})),t.d(e,"kb",(function(){return hn})),t.d(e,"ib",(function(){return fn})),t.d(e,"db",(function(){return bn})),t.d(e,"cb",(function(){return gn})),t.d(e,"A",(function(){return jn})),t.d(e,"eb",(function(){return pn})),t.d(e,"y",(function(){return mn})),t.d(e,"E",(function(){return On}));var r=t(12),a=t(5),i=t(48),c="SET_FULL_PARAM",o="SET_STYLE",s="SET_SVG_HEIGHT",u="SET_SVG_WIDTH",l="SET_Y_PERCENTAGE",d="SET_BRANCH_SPACING",h="SET_PADDING_PERCENTAGE",f="SET_DIRECTION_INDICATOR_X",b="SET_DIRECTION_INDICATOR_Y",g="SET_THEME",j="SET_LINE_NAME",p="SET_DIRECTION",m="SET_PLATFORM",O="SET_LINE_NUM",v="SET_PSD_NUM",y="SET_PANEL_TYPE",x="SET_NOTES",S="SET_NAME_POSITION",_="SET_CUSTOMISED_MTR_DESTINATION",w="SET_CURRENT_STATION",z="SET_STATION",T="SET_STATIONS_BULK",k=function(n){return function(e){e({type:c,fullParam:n}),e(Object(i.e)())}},E=function(n){return{type:s,svgHeight:n}},N=function(n,e){return{type:u,svgWidth:n,canvas:e}},H=function(n){return{type:o,style:n}},C=function(n){return{type:l,yPercentage:n}},R=function(n){return{type:d,branchSpacing:n}},I=function(n){return{type:h,paddingPercentage:n}},M=function(n){return{type:f,directionIndicatorX:n}},D=function(n){return{type:b,directionIndicatorY:n}},P=function(n){return{type:g,theme:n}},A=function(n){return{type:j,lineName:n}},B=function(n){return{type:p,direction:n}},F=function(n){return{type:m,platform:n}},G=function(n){return{type:O,lineNum:n}},L=function(n){return{type:v,psdNum:n}},W=function(n){return{type:y,panelType:n}},K=function(n){return{type:x,notes:n}},U=function(){return function(n,e){var t=e().param.notesGZMTR;n(K(t.concat([["","",0,0,!1]])))}},Z=function(n,e){return function(t,r){var a=r().param.notesGZMTR;t(K(a.map((function(t,r){return r===n?e:t}))))}},V=function(n){return function(e,t){var r=t().param.notesGZMTR;e(K(r.filter((function(e,t){return t!==n}))))}},J=function(n){return{type:S,namePosition:n}},X=function(n){return function(e,t){var r=t().param.namePosMTR;e(J(Object(a.a)(Object(a.a)({},r),{},{isStagger:n})))}},Y=function(){return function(n,e){var t=e().param.namePosMTR;n(J(Object(a.a)(Object(a.a)({},t),{},{isFlip:!t.isFlip})))}},q=function(n){return{type:_,customisedMtrDestination:n}},Q=function(n){return function(e,t){var r=t().param.customiseMTRDest;e(q(Object(a.a)(Object(a.a)({},r),{},{isLegacy:n})))}},$=function(n){return function(e,t){var r=t().param.customiseMTRDest;e(q(Object(a.a)(Object(a.a)({},r),{},{terminal:n})))}},nn=function(n){return function(e){return e({type:w,currentStation:n}),Promise.resolve()}},en=function(n,e){return function(t){t({type:z,stationId:n,station:e}),t(Object(i.e)())}},tn=function(n){return function(e){e({type:T,stations:n}),e(Object(i.e)())}},rn=function(){return function(n,e){var t=e().param.stn_list,i=Object.keys(t).reduce((function(n,e){return Object(a.a)(Object(a.a)({},n),{},Object(r.a)({},e,function(n){switch(n){case"linestart":return Object(a.a)(Object(a.a)({},t.lineend),{},{parents:[],children:t.lineend.parents.slice().reverse(),branch:{left:[],right:t.lineend.branch.left}});case"lineend":return Object(a.a)(Object(a.a)({},t.linestart),{},{parents:t.linestart.children.slice().reverse(),children:[],branch:{left:t.linestart.branch.right,right:[]}});default:return Object(a.a)(Object(a.a)({},t[n]),{},{parents:t[n].children.map((function(n){return"linestart"===n?"lineend":"lineend"===n?"linestart":n})).reverse(),children:t[n].parents.map((function(n){return"linestart"===n?"lineend":"lineend"===n?"linestart":n})).reverse(),branch:{left:t[n].branch.right,right:t[n].branch.left}})}}(e)))}),{});n(tn(i))}},an=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{name:e})))}},cn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{secondaryName:e})))}},on=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{num:e})))}},sn=function(n,e,t){return function(r,i){var c=i().param.stn_list[n],o=c.transfer.info.map((function(n){return n.slice()}));if(o.length>e)o[e].push(t);else{for(var s=o.length;s<e;s++)o[s]=[];o[e]=[t]}r(en(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{info:o})})))}},un=function(n,e,t){return function(r,i){var c=i().param.stn_list[n];if(c.transfer.info.length>e&&c.transfer.info[e].length>t){var o=c.transfer.info.map((function(n,r){return r===e?n.filter((function(n,e){return e!==t})):n}));r(en(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{info:o})})))}}},ln=function(n,e,t,r){return function(i,c){var o=c().param.stn_list[n];if(o.transfer.info.length>e&&o.transfer.info[e].length>t){var s=o.transfer.info.map((function(n,a){return a===e?n.map((function(n,e){return e===t?[0,1,2,3,4,5].map((function(e){return void 0===r[e]?n[e]:r[e]})):n})):n}));i(en(n,Object(a.a)(Object(a.a)({},o),{},{transfer:Object(a.a)(Object(a.a)({},o.transfer),{},{info:s})})))}}},dn=function(n,e,t){return function(r,i){var c=i().param.stn_list[n],o=c.transfer.osi_names.map((function(n){return n.slice()}));if(o.length>e)o[e]=t;else{for(var s=o.length;s<e;s++)o[s]=["\u8eca\u7ad9\u540d","Stn Name"];o[e]=t}r(en(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{osi_names:o})})))}},hn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{transfer:Object(a.a)(Object(a.a)({},i.transfer),{},{tick_direc:e})})))}},fn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{transfer:Object(a.a)(Object(a.a)({},i.transfer),{},{paid_area:e})})))}},bn=function(n,e,t){return function(i,c){var o=c().param.stn_list[n];i(en(n,Object(a.a)(Object(a.a)({},o),{},{branch:Object(a.a)(Object(a.a)({},o.branch),{},Object(r.a)({},e,[t,o.branch[e][1]]))})))}},gn=function(n){return function(e,t){var i,c=t().param.stn_list;e(tn(Object(a.a)(Object(a.a)({},c),{},(i={},Object(r.a)(i,n[0].stnId,Object(a.a)(Object(a.a)({},c[n[0].stnId]),{},{branch:Object(a.a)(Object(a.a)({},c[n[0].stnId].branch),{},Object(r.a)({},n[0].direction,[c[n[0].stnId].branch[n[0].direction][0],n[0].first]))})),Object(r.a)(i,n[1].stnId,Object(a.a)(Object(a.a)({},c[n[1].stnId]),{},{branch:Object(a.a)(Object(a.a)({},c[n[1].stnId].branch),{},Object(r.a)({},n[1].direction,[c[n[1].stnId].branch[n[1].direction][0],n[1].first]))})),i))))}},jn=function(n,e){return function(t,i){var c,o=i().param.stn_list;t(tn(Object(a.a)(Object(a.a)({},o),{},(c={},Object(r.a)(c,n,Object(a.a)(Object(a.a)({},o[n]),{},{parents:o[n].parents.slice().reverse()})),Object(r.a)(c,e,Object(a.a)(Object(a.a)({},o[e]),{},{children:o[e].children.slice().reverse()})),c))))}},pn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t(en(n,Object(a.a)(Object(a.a)({},i),{},{facility:e})))}},mn=function(n,e){return function(t,r){var i=r().param.stn_list[n];i.services.includes(e)||t(en(n,Object(a.a)(Object(a.a)({},i),{},{services:i.services.concat(e)})))}},On=function(n,e){return function(t,r){var i=r().param.stn_list[n];i.services.includes(e)&&t(en(n,Object(a.a)(Object(a.a)({},i),{},{services:i.services.filter((function(n){return n!==e}))})))}}},178:function(n,e,t){},22:function(n,e,t){"use strict";t.d(e,"b",(function(){return p})),t.d(e,"c",(function(){return m}));var r=t(94),a=t(133),i=t(5),c=t(8),o=t(25),s={rmgStyle:c.k.MTR,canvasScale:1,canvasScaleStatus:c.g.init,canvasToShow:c.a,canvasToShowStatus:c.g.init,sidePanelMode:c.n.CLOSE,selectedStation:"linestart"};var u=t(110),l=t(17),d={svgWidth:{destination:100,runin:100,railmap:100,indoor:100},svg_height:100,style:c.k.MTR,y_pc:50,padding:10,branch_spacing:10,direction:c.m.left,platform_num:"1",theme:[u.a.HongKong,"twl","#E2231A",c.h.white],line_name:["\u7dda","line"],current_stn_idx:"",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:c.i.gz1,notesGZMTR:[],direction_gz_x:0,direction_gz_y:0};var h=t(48),f={depsStr:"",branches:[],routes:[],tpo:[]};var b=t(41),g=Object(r.b)({app:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case o.a:n.canvasScale=e.canvasScale;break;case o.b:n.canvasScaleStatus=e.canvasScaleStatus;break;case o.c:n.canvasToShow=e.canvasToShow;break;case o.d:n.canvasToShowStatus=e.canvasToShowStatus;break;case o.f:n.sidePanelMode=e.sidePanelMode;break;case o.e:n.selectedStation=e.selectedStation}return Object(i.a)({},n)},param:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l.g:return e.fullParam;case l.r:n.style=e.style;break;case l.s:n.svg_height=e.svgHeight;break;case l.t:n.svgWidth[e.canvas]=e.svgWidth;break;case l.v:n.y_pc=e.yPercentage;break;case l.a:n.branch_spacing=e.branchSpacing;break;case l.l:n.padding=e.paddingPercentage;break;case l.e:n.direction_gz_x=e.directionIndicatorX;break;case l.f:n.direction_gz_y=e.directionIndicatorY;break;case l.u:n.theme=e.theme;break;case l.h:n.line_name=e.lineName;break;case l.d:n.direction=e.direction;break;case l.n:n.platform_num=e.platform;break;case l.i:n.line_num=e.lineNum;break;case l.o:n.psd_num=e.psdNum;break;case l.m:n.info_panel_type=e.panelType;break;case l.k:n.notesGZMTR=e.notes;break;case l.j:n.namePosMTR=e.namePosition;break;case l.c:n.customiseMTRDest=e.customisedMtrDestination;break;case l.b:n.current_stn_idx=e.currentStation;break;case l.p:n.stn_list[e.stationId]=e.station;break;case l.q:n.stn_list=e.stations}return Object(i.a)({},n)},helper:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h.b:n.depsStr=e.depsStr;break;case h.a:n.branches=e.branches;break;case h.c:n.routes=e.routes;break;case h.d:n.tpo=e.tpo}return Object(i.a)({},n)}}),j=Object(r.c)(g,Object(r.a)(a.a)),p=(e.a=j,function(){return Object(b.b)()}),m=b.c},25:function(n,e,t){"use strict";t.d(e,"a",(function(){return o})),t.d(e,"b",(function(){return s})),t.d(e,"c",(function(){return u})),t.d(e,"d",(function(){return l})),t.d(e,"f",(function(){return d})),t.d(e,"e",(function(){return h})),t.d(e,"h",(function(){return f})),t.d(e,"l",(function(){return g})),t.d(e,"m",(function(){return j})),t.d(e,"i",(function(){return p})),t.d(e,"g",(function(){return O})),t.d(e,"k",(function(){return v})),t.d(e,"j",(function(){return y}));var r=t(19),a=t.n(r),i=t(27),c=t(8),o="SET_CANVAS_SCALE",s="SET_CANVAS_SCALE_STATUS",u="SET_CANVAS_TO_SHOW",l="SET_CANVAS_TO_SHOW_STATUS",d="SET_SIDE_PANEL_MODE",h="SET_SELECTED_STATION",f=function(n){return{type:o,canvasScale:n}},b=function(n){return{type:s,canvasScaleStatus:n}},g=function(){return function(){var n=Object(i.a)(a.a.mark((function n(e,t){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(b(c.g.loading)),n.prev=1,r=Number((t().app.canvasScale+.1).toFixed(1)),e(f(r)),n.next=6,window.rmgStorage.writeFile("rmgScale",r.toString());case 6:e(b(c.g.loaded)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),e(b(c.g.failed));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}()},j=function(){return function(){var n=Object(i.a)(a.a.mark((function n(e,t){var r,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(b(c.g.loading)),n.prev=1,r=t().app.canvasScale,i=Number(r.toFixed(1))<=.1?Number(r.toFixed(1)):Number((r-.1).toFixed(1)),e(f(i)),n.next=7,window.rmgStorage.writeFile("rmgScale",i.toString());case 7:e(b(c.g.loaded)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),e(b(c.g.failed));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}()},p=function(n){return{type:u,canvasToShow:n}},m=function(n){return{type:l,canvasToShowStatus:n}},O=function(n){return function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(m(c.g.loading)),e.prev=1,t(p(n)),e.next=5,window.rmgStorage.writeFile("rmgCanvas",n);case 5:t(m(c.g.loaded)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(m(c.g.failed));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}()},v=function(n){return{type:d,sidePanelMode:n}},y=function(n){return{type:h,selectedStation:n}}},48:function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"a",(function(){return c})),t.d(e,"c",(function(){return o})),t.d(e,"d",(function(){return s})),t.d(e,"e",(function(){return h}));var r=t(24),a=t(56),i="SET_DEPS_STR",c="SET_BRANCHES",o="SET_ROUTES",s="SET_TPO",u=function(){return function(n,e){var t=e().param.stn_list,a=Object.entries(t).map((function(n){var e=Object(r.a)(n,2),t=e[0],a=e[1];return t+a.parents.toString()+a.children.toString()+JSON.stringify(a.branch)})).join("");return n({type:i,depsStr:a}),a}},l=function(){return function(n,e){console.log("Re-calculating branches...");var t=function(n){for(var e=["linestart"],t=[["linestart"]],r=0;e.length;){var a=e.shift(),i=t[r].slice(-1)[0]||null;for(i&&"linestart"!==a?t[r].push(a):t[r]=[a];"lineend"!==a;){var c=n[i=a].children;if(function(){switch(c.length){case 1:a=c[0];break;case 2:var o=n[i].branch.right[1];"through"===n[i].branch.right[0]?(t.push([a]),e.push(o)):0===r&&(t.push([i]),e.push(o)),a=c.filter((function(n){return n!==o}))[0]}}(),t[r].push(a),i===n[a].branch.left[1])break}r++}return t}(e().param.stn_list);return n({type:c,branches:t}),t}},d=function(){return function(n,e){console.log("Re-calculating routes...");var t,r=e().param.stn_list;n((t=function(n){for(var e=["linestart"],t=[["linestart"]],r=0;e.length;){var a=e.shift(),i=t[r].slice(-1)[0]||null;for(i&&"linestart"!==a?t[r].push(a):t[r]=[a];"lineend"!==a;){var c=n[i=a].children;if(function(){switch(c.length){case 1:a=c[0];break;case 2:var o=n[i].branch.right[1];"through"===n[i].branch.right[0]?(t.push(t[r].slice()),e.push(o)):0===r&&(t.push([i]),e.push(o)),a=c.filter((function(n){return n!==o}))[0]}}(),t[r].push(a),i===n[a].branch.left[1]&&"nonthrough"===n[a].branch.left[0])break}r++}return t}(r),{type:o,routes:t}))}},h=function(){return function(n,e){var t,r;if(e().helper.depsStr!==n(u())){n(d());var i=e().helper.branches,c=n(l());i.toString()!==c.toString()&&(console.log("Re-calculating topology ordering..."),n((t=1===(r=c).length?r[0].slice(1,-1):r.reduce((function(n,e){var t=n.indexOf(e[e.length-1]);return[].concat(Object(a.a)(n.slice(0,t)),Object(a.a)(e.slice(1)),Object(a.a)(n.slice(t+1)))}),["lineend"]).slice(0,-1),{type:s,tpo:t})))}}}},8:function(n,e,t){"use strict";t.d(e,"g",(function(){return a})),t.d(e,"k",(function(){return i})),t.d(e,"c",(function(){return c})),t.d(e,"a",(function(){return O})),t.d(e,"p",(function(){return v})),t.d(e,"n",(function(){return s})),t.d(e,"d",(function(){return u})),t.d(e,"m",(function(){return l})),t.d(e,"b",(function(){return d})),t.d(e,"h",(function(){return h})),t.d(e,"l",(function(){return f})),t.d(e,"e",(function(){return b})),t.d(e,"i",(function(){return g})),t.d(e,"j",(function(){return j})),t.d(e,"f",(function(){return p})),t.d(e,"o",(function(){return m}));var r,a,i,c,o=t(12);!function(n){n.init="init",n.loading="loading",n.loaded="loaded",n.failed="failed"}(a||(a={})),function(n){n.MTR="mtr",n.GZMTR="gzmtr",n.SHMetro="shmetro"}(i||(i={})),function(n){n.Destination="destination",n.RunIn="runin",n.RailMap="railmap",n.Indoor="indoor"}(c||(c={}));var s,u,l,d,h,f,b,g,j,p,m,O="all",v=(r={},Object(o.a)(r,i.MTR,[c.Destination,c.RailMap]),Object(o.a)(r,i.GZMTR,[c.RunIn,c.RailMap]),Object(o.a)(r,i.SHMetro,[c.Destination,c.RunIn,c.RailMap,c.Indoor]),r);!function(n){n.CLOSE="CLOSE",n.STATION="STATION",n.STYLE="STYLE"}(s||(s={})),function(n){n.left="left",n.right="right"}(u||(u={})),function(n){n.left="l",n.right="r"}(l||(l={})),function(n){n.through="through",n.nonThrough="nonthrough"}(d||(d={})),function(n){n.black="#000",n.white="#fff"}(h||(h={})),function(n){n.local="local",n.express="express",n.direct="direct"}(f||(f={})),function(n){n.airport="airport",n.disney="disney",n.hsr="hsr",n.railway="railway",n.none=""}(b||(b={})),function(n){n.gz1="gz1",n.gz28="gz28",n.gz2otis="gz2otis",n.gz3="gz3",n.gz4="gz4",n.gz5="gz5",n.gz1421="gz1421",n.gz6="gz6",n.gzgf="gzgf"}(g||(g={})),function(n){n.sh="sh",n.sh2020="sh2020"}(j||(j={})),function(n){n.Azerbaijani="az",n.Arabic="ar",n.Catalan="ca",n.Chinese="zh",n.ChineseCN="zh-CN",n.ChineseSimp="zh-Hans",n.ChineseTrad="zh-Hant",n.ChineseHK="zh-HK",n.ChineseTW="zh-TW",n.English="en",n.French="fr",n.Gaelic="ga",n.German="de",n.Hindi="hi",n.Japanese="ja",n.Korean="ko",n.Malay="ms",n.Norwegian="no",n.Spanish="es",n.Persian="fa",n.Portuguese="pt",n.Russian="ru",n.Swedish="sv",n.Turkish="tr"}(p||(p={})),function(n){n[n.PASSED=-1]="PASSED",n[n.CURRENT=0]="CURRENT",n[n.FUTURE=1]="FUTURE"}(m||(m={}))},95:function(n,e,t){"use strict";t.d(e,"c",(function(){return c})),t.d(e,"b",(function(){return o})),t.d(e,"a",(function(){return s}));var r=t(77),a=t(24),i=t(8),c=function(n){var e;"line_name"in n||(n.line_name=["\u8def\u7dda\u540d","Name of Line"]),"dest_legacy"in n||(n.dest_legacy=!1),delete n.fontZH,delete n.fontEN,delete n.weightZH,delete n.weightEN;for(var t=0,r=Object.entries(n.stn_list);t<r.length;t++){var c=Object(a.a)(r[t],2),o=c[0],s=c[1];"branch"in s||(n.stn_list[o].branch={left:[],right:[]},2===s.children.length?n.stn_list[o].branch.right=["through",s.children[1]]:n.stn_list[o].branch.right=[],2===s.parents.length?n.stn_list[o].branch.left=["through",s.parents[1]]:n.stn_list[o].branch.left=[])}n.psd_num="psd_num"in n?n.psd_num.toString():"1","line_num"in n||(n.line_num="1"),3===n.theme.length&&n.theme.push("#fff");for(var u=0,l=Object.entries(n.stn_list);u<l.length;u++){var d=Object(a.a)(l[u],2),h=d[0],f=d[1];"num"in f||(n.stn_list[h].num="00"),"interchange"in f&&f.interchange.map((function(n){return n.forEach((function(n){5===n.length&&n.splice(3,0,"#fff")}))}))}for(var b=0,g=Object.entries(n.stn_list);b<g.length;b++){var j=Object(a.a)(g[b],2),p=j[0],m=j[1];"osi22_end_p"===m.change_type&&(n.stn_list[p].change_type="osi22_pr"),"osi22_end_u"===m.change_type&&(n.stn_list[p].change_type="osi22_ur")}for(var O=0,v=Object.entries(n.stn_list);O<v.length;O++){var y=Object(a.a)(v[O],2),x=y[0];"interchange"in y[1]||(n.stn_list[x].interchange=[[]])}n.info_panel_type="info_panel_type"in n?function(n){switch(n){case"gz_1":case"panasonic":return"gz28";case"gz_2":return"gz6";case"gz_3":return"gz3";default:return n}}(n.info_panel_type):"gz28","direction_gz_x"in n||(n.direction_gz_x=50),"direction_gz_y"in n||(n.direction_gz_y=70);for(var S=0,_=Object.entries(n.stn_list);S<_.length;S++){var w,z,T,k,E=Object(a.a)(_[S],2),N=E[0],H=E[1];if(!("transfer"in H))n.stn_list[N].transfer={tick_direc:"none"===H.change_type||"int2"===H.change_type?"r":null===(w=H.change_type)||void 0===w?void 0:w.split("_")[1].split("").slice().reverse()[0],paid_area:-1===(null===(z=H.change_type)||void 0===z?void 0:z.indexOf("osi"))||"p"===(null===(T=H.change_type)||void 0===T?void 0:T.split("_")[1][0]),osi_names:-1!==(null===(k=H.change_type)||void 0===k?void 0:k.indexOf("osi"))?[H.interchange[1][0]]:[],info:2===H.interchange.length?[H.interchange[0],H.interchange[1].slice(1)]:H.interchange};delete n.stn_list[N].change_type,delete n.stn_list[N].interchange}for(var C=0,R=Object.entries(n.stn_list);C<R.length;C++){var I=Object(a.a)(R[C],2),M=I[0],D=I[1];"services"in D||(n.stn_list[M].services=["local"]),"facility"in D||(n.stn_list[M].facility="usage"in D?D.usage:""),delete n.stn_list[M].usage}return"customiseMTRDest"in n||(n.customiseMTRDest={isLegacy:n.dest_legacy||!1,terminal:!1}),delete n.dest_legacy,"svgWidth"in n||(n.svgWidth={destination:n.svg_dest_width,runin:n.svg_dest_width,railmap:n.svg_width,indoor:n.svg_width}),"indoor"in n.svgWidth||(n.svgWidth.indoor=n.svgWidth.railmap),delete n.svg_width,delete n.svg_dest_width,"notesGZMTR"in n||(n.notesGZMTR=[]),n.notesGZMTR=null===(e=n.notesGZMTR)||void 0===e?void 0:e.map((function(n){return 4===n.length?n.concat([!1]):n})),delete n.char_form,delete n.show_outer,delete n.strip_pc,delete n.txt_bg_gap,"namePosMTR"in n||(n.namePosMTR={isStagger:!0,isFlip:n.txt_flip}),delete n.txt_flip,Object.keys(n.stn_list).forEach((function(e){"secondaryName"in n.stn_list[e]?!1!==n.stn_list[e].secondaryName&&","===n.stn_list[e].secondaryName.join()&&(n.stn_list[e].secondaryName=!1):n.stn_list[e].secondaryName=!1,"type"in n.stn_list[e].transfer&&delete n.stn_list[e].transfer.type})),n.style=void 0!==n.style&&Object.values(i.k).includes(n.style)?n.style:i.k.MTR,n},o=function(n,e){var t,a=Object(r.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(n[c])return n[c]}}catch(o){a.e(o)}finally{a.f()}return n[i.f.English]},s=function(n,e){return(e===i.k.GZMTR?((null===n||void 0===n?void 0:n.num)||"-")+": ":"")+(null===n||void 0===n?void 0:n.name.join().replace("\\"," "))}}},[[141,143,144]]]);
//# sourceMappingURL=main.fa599d44.chunk.js.map