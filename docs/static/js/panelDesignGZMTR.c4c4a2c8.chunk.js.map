{"version":3,"sources":["panels/design/list-gzmtr.tsx"],"names":["useStyles","makeStyles","theme","createStyles","nestedList","paddingLeft","spacing","DesignListGZMTR","t","useTranslation","useContext","ParamContext","param","dispatch","primary","value","line_num","onChange","e","type","num","target","psd_num","PanelTypeLi","NotesLi","useMemo","style","transform","native","info_panel_type","variant","width","PanelTypesGZMTR","map","classes","useState","isCollapse","setIsCollapse","isDialogOpen","setIsDialogOpen","noteSelected","setNoteSelected","button","onClick","prevOpen","color","in","unmountOnExit","component","disablePadding","className","notesGZMTR","_","i","NotesEntry","idx","onEdit","disableTypography","cursor","length","NoteEditDialog","open","onClose","props","toggleEl","setToggleEl","handleEdit","handleSlide","_event","note","val","j","handleRemove","secondary","overflow","textOverflow","whiteSpace","size","currentTarget","anchorEl","Boolean","step","marks","label","marginLeft","marginRight","valueLabelDisplay","edge","checked","toString","noteZH","setNoteZH","noteEN","setNoteEN","handleClick","margin","multiline","autoFocus","helperText"],"mappings":"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","file":"static/js/panelDesignGZMTR.c4c4a2c8.chunk.js","sourcesContent":["import React, { useContext, useState, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport {\n    ListItem,\n    ListItemIcon,\n    Icon,\n    TextField,\n    ListItemText,\n    makeStyles,\n    createStyles,\n    Collapse,\n    Divider,\n    List,\n    ListItemSecondaryAction,\n    IconButton,\n    Typography,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Button,\n    Menu,\n    MenuItem,\n    Slider,\n    Switch,\n    Select,\n} from '@material-ui/core';\n\nimport { ParamContext } from '../../context';\nimport { PanelTypesGZMTR } from '../../constants/constants';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        nestedList: {\n            paddingLeft: theme.spacing(5),\n        },\n    })\n);\n\nconst DesignListGZMTR = () => {\n    const { t } = useTranslation();\n    const { param, dispatch } = useContext(ParamContext);\n\n    return (\n        <>\n            <ListItem>\n                <ListItemIcon>\n                    <Icon>looks_one</Icon>\n                </ListItemIcon>\n                <ListItemText primary={t('design.lineNum')} />\n                <TextField\n                    value={param.line_num}\n                    onChange={e => dispatch({ type: 'SET_LINE_NUM', num: e.target.value })}\n                />\n            </ListItem>\n            <Divider />\n            <ListItem>\n                <ListItemIcon>\n                    <Icon>looks_one</Icon>\n                </ListItemIcon>\n                <ListItemText primary={t('design.psd')} />\n                <TextField\n                    value={param.psd_num}\n                    onChange={e => dispatch({ type: 'SET_PSD_NUM', num: e.target.value })}\n                />\n            </ListItem>\n            <Divider />\n            <PanelTypeLi />\n            <Divider />\n            <NotesLi />\n        </>\n    );\n};\n\nexport default DesignListGZMTR;\n\nconst PanelTypeLi = () => {\n    const { t } = useTranslation();\n    const { param, dispatch } = useContext(ParamContext);\n\n    return useMemo(\n        () => (\n            <>\n                <ListItem>\n                    <ListItemIcon>\n                        <Icon style={{ transform: 'rotate(180deg)' }}>credit_card</Icon>\n                    </ListItemIcon>\n                    <ListItemText primary={t('design.panelType.button')} />\n                    <Select\n                        native\n                        value={param.info_panel_type}\n                        onChange={e => dispatch({ type: 'SET_PANEL_TYPE', variant: e.target.value as PanelTypeGZMTR })}\n                        style={{ width: 166 }}\n                    >\n                        {PanelTypesGZMTR.map(type => (\n                            <option key={type} value={type}>\n                                {t('design.panelType.' + type)}\n                            </option>\n                        ))}\n                    </Select>\n                </ListItem>\n            </>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [param.info_panel_type]\n    );\n};\n\nconst NotesLi = () => {\n    const { t } = useTranslation();\n    const classes = useStyles();\n    const { param, dispatch } = useContext(ParamContext);\n\n    const [isCollapse, setIsCollapse] = useState(false);\n    const [isDialogOpen, setIsDialogOpen] = useState(false);\n    const [noteSelected, setNoteSelected] = useState(0);\n\n    const handleAdd = () => {\n        setNoteSelected(param.notesGZMTR.length);\n        dispatch({ type: 'ADD_NOTE_GZMTR' });\n        setIsDialogOpen(true);\n    };\n\n    const handleUpdate = (idx: number) => () => {\n        setNoteSelected(idx);\n        setIsDialogOpen(true);\n    };\n\n    return (\n        <>\n            <ListItem button onClick={() => setIsCollapse(prevOpen => !prevOpen)}>\n                <ListItemIcon>\n                    <Icon>notes</Icon>\n                </ListItemIcon>\n                <ListItemText primary={t('design.notesGZMTR.text')} />\n                {isCollapse ? <Icon color=\"action\">expand_less</Icon> : <Icon color=\"action\">expand_more</Icon>}\n            </ListItem>\n            <Collapse in={isCollapse} unmountOnExit>\n                <List component=\"div\" disablePadding className={classes.nestedList}>\n                    {param.notesGZMTR.map((_, i) => (\n                        <NotesEntry key={i} idx={i} onEdit={handleUpdate(i)} />\n                    ))}\n                    <ListItem>\n                        <ListItemText disableTypography>\n                            <Typography color=\"primary\" style={{ cursor: 'pointer' }} onClick={handleAdd}>\n                                {t('design.notesGZMTR.addNote')}\n                            </Typography>\n                        </ListItemText>\n                    </ListItem>\n                    {isDialogOpen && (\n                        <NoteEditDialog open={isDialogOpen} onClose={() => setIsDialogOpen(false)} idx={noteSelected} />\n                    )}\n                </List>\n            </Collapse>\n        </>\n    );\n};\n\nconst NotesEntry = (props: { idx: number; onEdit: () => void }) => {\n    const { t } = useTranslation();\n    const { param, dispatch } = useContext(ParamContext);\n\n    const [toggleEl, setToggleEl] = useState<null | HTMLElement>(null);\n\n    const handleEdit = () => {\n        setToggleEl(null);\n        props.onEdit();\n    };\n\n    const handleSlide = (i: number) => (_event: React.ChangeEvent<{}>, value: number | number[]) =>\n        typeof value === 'number' &&\n        dispatch({\n            type: 'UPDATE_NOTE_GZMTR',\n            idx: props.idx,\n            note: param.notesGZMTR[props.idx].map((val, j) => (j === i ? value : val)) as Note,\n        });\n\n    const handleRemove = () => {\n        setToggleEl(null);\n        dispatch({ type: 'REMOVE_NOTE_GZMTR', idx: props.idx });\n    };\n\n    return useMemo(\n        () => (\n            <>\n                <ListItem>\n                    <ListItemText\n                        primary={param.notesGZMTR[props.idx][0]}\n                        secondary={param.notesGZMTR[props.idx][1]}\n                        style={{ overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}\n                    />\n                    <ListItemSecondaryAction>\n                        <IconButton size=\"small\" onClick={e => setToggleEl(e.currentTarget)}>\n                            <Icon>more_vert</Icon>\n                        </IconButton>\n                        <Menu anchorEl={toggleEl} open={Boolean(toggleEl)} onClose={() => setToggleEl(null)}>\n                            <MenuItem onClick={handleEdit}>{t('design.notesGZMTR.edit')}</MenuItem>\n\n                            <ListItem component=\"div\">\n                                <Slider\n                                    value={param.notesGZMTR[props.idx][2]}\n                                    onChange={handleSlide(2)}\n                                    step={0.01}\n                                    marks={[\n                                        { value: 0, label: t('layout.directionGZ.left') },\n                                        { value: 100, label: t('layout.directionGZ.right') },\n                                    ]}\n                                    style={{ width: 200, marginLeft: 5, marginRight: 5 }}\n                                    valueLabelDisplay=\"auto\"\n                                />\n                            </ListItem>\n                            <ListItem>\n                                <Slider\n                                    value={param.notesGZMTR[props.idx][3]}\n                                    onChange={handleSlide(3)}\n                                    step={0.01}\n                                    marks={[\n                                        { value: 0, label: t('layout.directionGZ.top') },\n                                        { value: 100, label: t('layout.directionGZ.bottom') },\n                                    ]}\n                                    style={{ width: 200, marginLeft: 5, marginRight: 5 }}\n                                    valueLabelDisplay=\"auto\"\n                                />\n                            </ListItem>\n                            <ListItem>\n                                <ListItemText primary={t('design.notesGZMTR.border')} />\n                                <ListItemSecondaryAction>\n                                    <Switch\n                                        edge=\"end\"\n                                        color=\"primary\"\n                                        checked={param.notesGZMTR[props.idx][4]}\n                                        onChange={(_, checked) =>\n                                            dispatch({\n                                                type: 'UPDATE_NOTE_GZMTR',\n                                                idx: props.idx,\n                                                note: param.notesGZMTR[props.idx].map((val, i) =>\n                                                    i === 4 ? checked : val\n                                                ) as Note,\n                                            })\n                                        }\n                                    />\n                                </ListItemSecondaryAction>\n                            </ListItem>\n\n                            <MenuItem onClick={handleRemove}>{t('design.notesGZMTR.remove')}</MenuItem>\n                        </Menu>\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <Divider variant=\"middle\" />\n            </>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [param.notesGZMTR[props.idx].toString(), toggleEl]\n    );\n};\n\ninterface AddNoteDialogProps {\n    open: boolean;\n    onClose: () => void;\n    idx: number;\n}\n\nconst NoteEditDialog = (props: AddNoteDialogProps) => {\n    const { t } = useTranslation();\n\n    const { param, dispatch } = useContext(ParamContext);\n    const note = param.notesGZMTR[props.idx] || ['', '', 0, 0];\n\n    const [noteZH, setNoteZH] = useState(note[0] || '');\n    const [noteEN, setNoteEN] = useState(note[1] || '');\n\n    const handleClick = () => {\n        dispatch({ type: 'UPDATE_NOTE_GZMTR', idx: props.idx, note: [noteZH, noteEN, note[2], note[3], note[4]] });\n        props.onClose();\n    };\n\n    return useMemo(\n        () => (\n            <Dialog open onClose={props.onClose}>\n                <DialogTitle>{t('design.notesGZMTR.editNote')}</DialogTitle>\n                <DialogContent>\n                    <TextField\n                        variant=\"outlined\"\n                        label={t('editor.zh')}\n                        margin=\"dense\"\n                        multiline\n                        autoFocus\n                        value={noteZH}\n                        onChange={e => setNoteZH(e.target.value)}\n                        style={{ width: '100%' }}\n                        helperText={t('editor.enterToWrap')}\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        label={t('editor.en')}\n                        margin=\"dense\"\n                        multiline\n                        value={noteEN}\n                        onChange={e => setNoteEN(e.target.value)}\n                        style={{ width: '100%' }}\n                        helperText={t('editor.enterToWrap')}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"contained\" onClick={handleClick} color=\"primary\">\n                        {t('dialog.done')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [noteZH, noteEN]\n    );\n};\n"],"sourceRoot":""}