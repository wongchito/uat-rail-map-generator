{"version":3,"sources":["methods.ts","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@material-ui/core/esm/DialogContentText/DialogContentText.js","../node_modules/void-elements/index.js","panels/stations/station-list.tsx","panels/stations/utils.ts","panels/stations/add-diag.tsx","panels/stations/edit-diag/dialog.tsx","panels/stations/edit-diag/index.ts","../../src/parse-tag.js","../../src/parse.js","../../src/stringify.js","../../src/index.js","../node_modules/react-i18next/dist/es/Trans.js","panels/stations/delete-diags.tsx","../node_modules/@material-ui/core/esm/Fab/Fab.js","panels/stations/fabs.tsx","panels/stations/auto-num-diag.tsx","panels/stations/panel2.tsx","panels/stations/index.ts"],"names":["getYShareMTR","stnId","stnList","includes","parents","length","children","stnPred","indexOf","objectWithoutPropertiesLoose","module","exports","source","excluded","key","i","target","Object","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","__esModule","sourceKeys","keys","DialogContentText","React","props","ref","Typography","_extends","component","variant","color","withStyles","root","marginBottom","name","useStyles","makeStyles","theme","createStyles","listItemNum","marginRight","spacing","fontSize","listItemText","display","alignItems","whiteSpace","overflow","selectedItem","background","palette","action","hover","StationList","tpo","useAppSelector","store","helper","Paper","List","dense","disablePadding","map","Fragment","isSelected","selectedId","onAction","Divider","StationEntry","t","useTranslation","classes","dispatch","useAppDispatch","rmgStyle","param","style","stationInfo","stn_list","num","useState","toggleEl","setToggleEl","handleAction","ListItem","className","RmgStyle","GZMTR","ListItemText","primary","secondary","replace","ListItemSecondaryAction","IconButton","size","onClick","e","currentTarget","Icon","Menu","anchorEl","open","Boolean","onClose","MenuItem","setCurrentStation","getRandomId","Math","floor","random","pow","toString","padStart","getNameFromId","numsZH","split","numsEN","char","parseInt","join","dialogContent","padding","select","width","marginLeft","memo","allLocs","centre","upper","lower","newupper","newlower","prep","setPrep","pivot","setPivot","loc","setLoc","Array","fill","locOK","setLocOK","end","setEnd","endList","setEndList","newLocs","useMemo","y","state","res","unshift","pop","push","shift","newBranchPossibleEnd","newStnPossibleLoc","useEffect","p","handleClick","newId","newInfo","secondaryName","services","Services","local","branch","left","right","transfer","info","tick_direc","ShortDirection","paid_area","osi_names","facility","Facilities","none","newStnList","JSON","parse","stringify","linestart","slice","forEach","par","child","parChildLen","BranchStyle","through","lineend","addStation","setStationsBulk","Dialog","DialogTitle","DialogContent","ListItemIcon","Select","native","onChange","value","formatStnName","idx","disabled","DialogActions","Button","autoFocus","prevProps","nextProps","NameTab","lazy","InterchangeTab","BranchTab","MoreTab","tab","height","minWidth","flexDirection","minHeight","paddingLeft","DialogWrapper","useTheme","isMobile","useMediaQuery","breakpoints","down","fullScreen","dividers","tabIndex","setTabIndex","tabNav","Tabs","indicatorColor","textColor","_","val","scrollButtons","Tab","label","icon","role","Suspense","fallback","CircularProgress","attrRE","tag","type","voidElement","attrs","tagMatch","match","lookup","charAt","startsWith","endIndex","comment","reg","RegExp","result","exec","trim","attr","arr","lastIndex","substring","tagRE","whitespaceRE","empty","create","buff","doc","content","reduce","html","options","components","current","level","inComponent","index","parent","isOpen","isComment","start","nextChar","parseTag","test","token","rootEl","_excluded","_excluded2","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","arguments","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","hasChildren","node","checkLength","base","getChildren","getAsArray","data","isArray","nodesToString","i18nOptions","stringNode","childrenArray","keepArray","transKeepBasicHtmlNodesFor","childIndex","concat","isValidElement","childPropsCount","shouldKeepChild","childChildren","i18nIsDynamicList","warn","_typeof","format","clone","_objectWithoutProperties","renderNodes","targetString","i18n","combinedTOpts","emptyChildrenButNeedsHandling","getData","childs","assign","ast","HTML","opts","renderInner","rootReactNode","mappedChildren","mapAST","every","hasValidReactChildren","pushTranslatedJSX","inner","mem","isVoid","dummy","cloneElement","undefined","reactNode","astNode","reactNodes","translationContent","interpolator","interpolate","language","tmp","newTarget","mergeProps","isElement","isValidTranslationWithChildren","isEmptyTransWithHTML","isKnownComponent","hasOwnProperty","_inner","Number","isNaN","parseFloat","transSupportBasicHtmlNodes","createElement","_inner3","_inner4","wrapTextNodes","transWrapTextNodes","_content","Trans","_ref","count","i18nKey","_ref$tOptions","tOptions","values","defaults","ns","i18nFromProps","tFromProps","additionalProps","_ref2","useContext","I18nContext","i18nFromContext","defaultNSFromContext","defaultNS","getI18n","warnOnce","bind","k","reactI18nextOptions","getDefaults","react","namespaces","defaultValue","transEmptyNodeValue","hashTransKey","interpolationOverride","interpolation","prefix","suffix","useAsParent","defaultTransParent","StationDeleteDialog","currentStationIndex","current_stn_idx","isError","setIsError","isLastMainBranchStn","id","console","log","parId","childId","childIdxOfPar","parIdxOfChild","splice","removeStation","newCurrentId","ErrorDialog","Fab","_props$color","_props$component","_props$disabled","_props$disableFocusRi","disableFocusRipple","focusVisibleClassName","_props$size","_props$variant","other","ButtonBase","clsx","capitalize","extended","colorInherit","focusRipple","focusVisible","typography","button","boxSizing","transition","transitions","duration","short","borderRadius","boxShadow","shadows","getContrastText","grey","backgroundColor","A100","disabledBackground","textDecoration","justifyContent","contrastText","main","dark","sizeSmall","sizeMedium","fab","position","bottom","StationFabs","fabEl","setFabEl","Tooltip","title","AutoNumDialog","branches","branch0","updateStationNum","gridContainer","gridItem","PanelStations2","stnSelected","setStnSelected","setIsOpen","isAddDialogOpen","setIsAddDialogOpen","isAutoNumDialogOpen","setIsAutoNumDialogOpen","stnToRemove","setStnToRemove","isDeleteDialogOpen","setIsDeleteDialogOpen","Grid","container","item","xs","md","reverseStations","Panel"],"mappings":"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","file":"static/js/panelStations.a239ac07.chunk.js","sourcesContent":["import { StationDict } from './constants/constants';\n\n/**\n * Vertical position (in shares) of station icon if using MTR style (for consistency of method `RMGLine.newStnPossibleLoc()`).\n */\nexport const getYShareMTR = (stnId: string, stnList: StationDict): -1 | 0 | 1 => {\n    if (\n        ['linestart', 'lineend'].includes(stnId) ||\n        stnList[stnId].parents.length > 1 ||\n        stnList[stnId].children.length > 1\n    ) {\n        return 0;\n    }\n    var stnPred = stnList[stnId].parents[0];\n    if (stnPred) {\n        // parent exist\n        if (stnList[stnPred].children.length === 1) {\n            // no sibling, then y same as parent\n            return getYShareMTR(stnPred, stnList);\n        } else {\n            // sibling exists, then y depends on its idx of being children\n            return stnList[stnPred].children.indexOf(stnId) === 0 ? 1 : -1;\n        }\n    } else {\n        // no parent, must be linestart\n        return 0;\n    }\n};\n","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '../styles/withStyles';\nimport Typography from '../Typography';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    marginBottom: 12\n  }\n};\nvar DialogContentText = /*#__PURE__*/React.forwardRef(function DialogContentText(props, ref) {\n  return /*#__PURE__*/React.createElement(Typography, _extends({\n    component: \"p\",\n    variant: \"body1\",\n    color: \"textSecondary\",\n    ref: ref\n  }, props));\n});\nprocess.env.NODE_ENV !== \"production\" ? DialogContentText.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiDialogContentText'\n})(DialogContentText);","/**\n * This file automatically generated from `pre-publish.js`.\n * Do not manually edit.\n */\n\nmodule.exports = {\n  \"area\": true,\n  \"base\": true,\n  \"br\": true,\n  \"col\": true,\n  \"embed\": true,\n  \"hr\": true,\n  \"img\": true,\n  \"input\": true,\n  \"link\": true,\n  \"meta\": true,\n  \"param\": true,\n  \"source\": true,\n  \"track\": true,\n  \"wbr\": true\n};\n","import React, { useState } from 'react';\nimport {\n    createStyles,\n    Divider,\n    Icon,\n    IconButton,\n    List,\n    ListItem,\n    ListItemSecondaryAction,\n    ListItemText,\n    makeStyles,\n    Menu,\n    MenuItem,\n    Paper,\n    Typography,\n} from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nimport { useAppDispatch, useAppSelector } from '../../redux';\nimport { RmgStyle } from '../../constants/constants';\nimport { setCurrentStation } from '../../redux/param/action';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        listItemNum: {\n            marginRight: theme.spacing(1),\n            fontSize: '1.2rem',\n        },\n        listItemText: {\n            display: 'flex',\n            alignItems: 'baseline',\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            '& .MuiListItemText-primary': {\n                marginRight: theme.spacing(1),\n            },\n        },\n        selectedItem: {\n            background: theme.palette.action.hover,\n        },\n    })\n);\n\ninterface Props {\n    selectedId: string;\n    onAction: (stnId: string) => (action: 'edit' | 'remove') => void;\n}\n\nconst StationList = (props: Props) => {\n    const tpo = useAppSelector(store => store.helper.tpo);\n\n    return (\n        <Paper>\n            <List dense disablePadding>\n                {tpo.map(stnId => (\n                    <React.Fragment key={stnId}>\n                        <StationEntry\n                            stnId={stnId}\n                            isSelected={stnId === props.selectedId}\n                            onAction={props.onAction(stnId)}\n                        />\n                        <Divider />\n                    </React.Fragment>\n                ))}\n            </List>\n        </Paper>\n    );\n};\n\nexport default StationList;\n\nconst StationEntry = (props: { stnId: string; isSelected: boolean; onAction: (action: 'edit' | 'remove') => void }) => {\n    const { stnId, isSelected, onAction } = props;\n    const { t } = useTranslation();\n    const classes = useStyles();\n    const dispatch = useAppDispatch();\n\n    const rmgStyle = useAppSelector(store => store.param.style);\n    const stationInfo = useAppSelector(store => store.param.stn_list[stnId]);\n\n    const name = stationInfo?.name || ['', ''];\n    const num = stationInfo?.num || '00';\n\n    const [toggleEl, setToggleEl] = useState<null | HTMLElement>(null);\n\n    const handleCurrent = () => {\n        dispatch(setCurrentStation(stnId));\n        setToggleEl(null);\n    };\n\n    const handleAction = (action: 'edit' | 'remove') => () => {\n        onAction(action);\n        setToggleEl(null);\n    };\n\n    return (\n        <ListItem className={isSelected ? classes.selectedItem : ''}>\n            {rmgStyle === RmgStyle.GZMTR && <Typography className={classes.listItemNum}>{num}</Typography>}\n            <ListItemText primary={name[0]} secondary={name[1].replace('\\\\', ' ')} className={classes.listItemText} />\n            <ListItemSecondaryAction>\n                <IconButton size=\"small\" onClick={e => setToggleEl(e.currentTarget)}>\n                    <Icon>more_vert</Icon>\n                </IconButton>\n                <Menu anchorEl={toggleEl} open={Boolean(toggleEl)} onClose={() => setToggleEl(null)}>\n                    <MenuItem onClick={handleCurrent}>{t('stations.current')}</MenuItem>\n                    <MenuItem onClick={handleAction('edit')}>{t('stations.edit.button')}</MenuItem>\n                    <MenuItem onClick={handleAction('remove')}>{t('stations.remove.button')}</MenuItem>\n                </Menu>\n            </ListItemSecondaryAction>\n        </ListItem>\n    );\n};\n","import { getYShareMTR } from '../../methods';\nimport {\n    BranchStyle,\n    Facilities,\n    Name,\n    Services,\n    ShortDirection,\n    StationDict,\n    StationInfo,\n} from '../../constants/constants';\n\nexport const addStation = (\n    prep: 'before' | 'after',\n    stnId: string,\n    loc: 'centre' | 'upper' | 'lower' | 'newupper' | 'newlower',\n    end: string,\n    stnList: StationDict\n): [string, StationDict] => {\n    // get new id\n    let newId = getRandomId();\n    while (Object.keys(stnList).includes(newId)) {\n        newId = getRandomId();\n    }\n    let newInfo: StationInfo = {\n        name: getNameFromId(newId),\n        secondaryName: false,\n        num: '00',\n        services: [Services.local],\n        parents: [],\n        children: [],\n        branch: {\n            left: [],\n            right: [],\n        },\n        transfer: {\n            info: [[]],\n            // type: 'none',\n            tick_direc: ShortDirection.right,\n            paid_area: true,\n            osi_names: [],\n        },\n        facility: Facilities.none,\n    };\n\n    let newStnList = JSON.parse(JSON.stringify(stnList)) as StationDict;\n\n    if (prep === 'before') {\n        if (loc === 'centre') {\n            newInfo.parents = stnList[stnId].parents;\n            if (stnList[stnId].parents.length === 0 && getYShareMTR(stnId, stnList) !== 0) {\n                // todo: is this case really exist?\n                newInfo.children = stnList.linestart.children;\n            } else if (getYShareMTR(stnId, stnList) !== 0) {\n                // pivot on branch\n                newInfo.children = stnList[stnList[stnId].parents[0]].children.slice();\n                newInfo.branch.right = stnList[newInfo.parents[0]].branch.right;\n                newStnList[newInfo.parents[0]].branch.right = [];\n            } else {\n                // pivot on main\n                newInfo.children = [stnId];\n                newInfo.branch.left = stnList[stnId].branch.left;\n                newStnList[stnId].branch.left = [];\n            }\n            newInfo.parents.forEach(par => {\n                newStnList[par].children = [newId];\n            });\n            newInfo.children.forEach(child => {\n                newStnList[child].parents = [newId];\n            });\n        } else if (loc === 'upper') {\n            if (stnList[stnId].parents.length === 2) {\n                if (stnList[stnId].branch.left[1] === stnList[stnId].parents[0]) {\n                    newStnList[stnId].branch.left[1] = newId;\n                }\n\n                newInfo.parents = stnList[stnId].parents.slice(0, 1);\n                newInfo.children = [stnId];\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n                newStnList[stnId].parents[0] = newId;\n            } else {\n                // already on branch\n                newInfo.parents = stnList[stnId].parents;\n                newInfo.children = [stnId];\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children[0] = newId;\n\n                    if (stnList[par].branch.right[1] === stnId) {\n                        newStnList[par].branch.right[1] = newId;\n                    }\n                });\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n            }\n        } else if (loc === 'lower') {\n            if (stnList[stnId].parents.length === 2) {\n                if (stnList[stnId].branch.left[1] === stnList[stnId].parents[1]) {\n                    newStnList[stnId].branch.left[1] = newId;\n                }\n\n                newInfo.parents = stnList[stnId].parents.slice(1);\n                newInfo.children = [stnId];\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n                newStnList[stnId].parents[1] = newId;\n            } else {\n                // already on branch\n                newInfo.parents = stnList[stnId].parents;\n                newInfo.children = [stnId];\n                newInfo.parents.forEach(par => {\n                    let parChildLen = stnList[par].children.length;\n                    newStnList[par].children[parChildLen - 1] = newId;\n\n                    if (stnList[par].branch.right[1] === stnId) {\n                        newStnList[par].branch.right[1] = newId;\n                    }\n                });\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n            }\n        } else {\n            newStnList[stnId].branch.left = [BranchStyle.through, newId];\n            newStnList[end].branch.right = [BranchStyle.through, newId];\n            newInfo.parents = [end];\n            newInfo.children = [stnId];\n\n            if (loc === 'newupper') {\n                newStnList[end].children.unshift(newId);\n                newStnList[stnId].parents.unshift(newId);\n            } else {\n                newStnList[end].children.push(newId);\n                newStnList[stnId].parents.push(newId);\n            }\n        }\n    } else {\n        if (loc === 'centre') {\n            newInfo.children = stnList[stnId].children;\n            if (stnList[stnId].children.length === 0 && getYShareMTR(stnId, stnList) !== 0) {\n                newInfo.parents = stnList.lineend.parents;\n            } else if (getYShareMTR(stnId, stnList) !== 0) {\n                // pivot on branch\n                newInfo.parents = stnList[stnList[stnId].children[0]].parents;\n                newInfo.branch.left = stnList[newInfo.children[0]].branch.left;\n                newStnList[newInfo.children[0]].branch.left = [];\n            } else {\n                // pivot on main\n                newInfo.parents = [stnId];\n                newInfo.branch.right = stnList[stnId].branch.right;\n                newStnList[stnId].branch.right = [];\n            }\n            newInfo.children.forEach(child => {\n                newStnList[child].parents = [newId];\n            });\n            newInfo.parents.forEach(par => {\n                newStnList[par].children = [newId];\n            });\n        } else if (loc === 'upper') {\n            if (stnList[stnId].children.length === 2) {\n                if (stnList[stnId].branch.right[1] === stnList[stnId].children[0]) {\n                    newStnList[stnId].branch.right[1] = newId;\n                }\n\n                newInfo.children = stnList[stnId].children.slice(0, 1);\n                newInfo.parents = [stnId];\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n                newStnList[stnId].children[0] = newId;\n            } else {\n                // already on branch\n                newInfo.children = stnList[stnId].children;\n                newInfo.parents = [stnId];\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents[0] = newId;\n\n                    if (stnList[child].branch.left[1] === stnId) {\n                        newStnList[child].branch.left[1] = newId;\n                    }\n                });\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n            }\n        } else if (loc === 'lower') {\n            if (stnList[stnId].children.length === 2) {\n                if (stnList[stnId].branch.right[1] === stnList[stnId].children[1]) {\n                    newStnList[stnId].branch.right[1] = newId;\n                }\n\n                newInfo.children = stnList[stnId].children.slice(1);\n                newInfo.parents = [stnId];\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n                newStnList[stnId].children[1] = newId;\n            } else {\n                // already on branch\n                newInfo.children = stnList[stnId].children;\n                newInfo.parents = [stnId];\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents[stnList[child].parents.length === 1 ? 0 : 1] = newId;\n\n                    if (stnList[child].branch.left[1] === stnId) {\n                        newStnList[child].branch.left[1] = newId;\n                    }\n                });\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n            }\n        } else {\n            newStnList[stnId].branch.right = [BranchStyle.through, newId];\n            newStnList[end].branch.left = [BranchStyle.through, newId];\n\n            newInfo.children = [end];\n            newInfo.parents = [stnId];\n\n            if (loc === 'newupper') {\n                newStnList[end].parents.unshift(newId);\n                newStnList[stnId].children.unshift(newId);\n            } else {\n                newStnList[end].parents.push(newId);\n                newStnList[stnId].children.push(newId);\n            }\n        }\n    }\n\n    return [\n        newId,\n        {\n            ...newStnList,\n            [newId]: newInfo,\n        } as StationDict,\n    ];\n};\n\nconst getRandomId = () =>\n    Math.floor(Math.random() * Math.pow(36, 4))\n        .toString(36)\n        .padStart(4, '0');\n\nfunction getNameFromId(stnId: string): Name {\n    let numsZH = '癸甲乙丙丁戊己庚辛壬日月金木水火土竹戈十大中一弓人心手口尸廿山女田難卜重'.split('');\n    let numsEN =\n        'Zero One Two Three Four Five Six Seven Eight Nine Alfa Bravo Charlie Delta Echo Foxtrot Golf Hotel India Juliett Kilo Lima Mike November Oscar Papa Quebec Romeo Sierra Tango Uniform Victor Whiskey X-ray Yankee Zulu'.split(\n            ' '\n        );\n    return [\n        stnId\n            .split('')\n            .map(char => numsZH[parseInt(char, 36)])\n            .join(''),\n        stnId\n            .split('')\n            .map(char => numsEN[parseInt(char, 36)])\n            .join(' '),\n    ];\n}\n\n/**\n * Remove a station and update neighbour's parameters at the same time.\n * (All descriptions are based on MTR style. )\n */\nexport const removeStation = (stnId: string, stnList: StationDict) => {\n    let newStnList = JSON.parse(JSON.stringify(stnList)) as StationDict;\n    let parents = newStnList[stnId].parents;\n    let children = newStnList[stnId].children;\n\n    let isLastMainBranchStn = true;\n    for (let id in newStnList) {\n        if ([stnId, 'linestart', 'lineend'].includes(id)) continue;\n        if (getYShareMTR(id, newStnList) === 0) {\n            isLastMainBranchStn = false;\n            break;\n        }\n    }\n\n    if (parents.length === 2 && children.length === 2) {\n        // Todo: rewrite, join two branches rather than reject\n        return false;\n    } else if (isLastMainBranchStn) {\n        // Last main line station\n        return false;\n    } else if (Object.keys(newStnList).length === 4) {\n        // Last two stations\n        return false;\n    } else if (parents.length === 2 || children.length === 2) {\n        console.log('this case');\n        parents.forEach(parId => {\n            newStnList[parId].children = children;\n        });\n        children.forEach(childId => {\n            newStnList[childId].parents = parents;\n        });\n        if (parents.length === 1) {\n            newStnList[parents[0]].branch.right = newStnList[stnId].branch.right;\n        }\n        if (children.length === 1) {\n            newStnList[children[0]].branch.left = newStnList[stnId].branch.left;\n        }\n    } else if (newStnList[parents[0]].children.length === 2 && newStnList[children[0]].parents.length === 2) {\n        // 1 par 1 child, last station on upper/lower branch\n        // branch disappear\n        var childIdxOfPar = newStnList[parents[0]].children.indexOf(stnId);\n        var parIdxOfChild = newStnList[children[0]].parents.indexOf(stnId);\n        newStnList[parents[0]].children.splice(childIdxOfPar, 1);\n        newStnList[children[0]].parents.splice(parIdxOfChild, 1);\n\n        newStnList[parents[0]].branch.right = [];\n        newStnList[children[0]].branch.left = [];\n    } else {\n        // 1 par 1 child\n        parents.forEach(parId => {\n            var idx = newStnList[parId].children.indexOf(stnId);\n            if (children.length) {\n                newStnList[parId].children[idx] = children[0];\n            } else {\n                // Right dest\n                newStnList[parId].children.splice(idx, 1);\n            }\n\n            if (newStnList[parId].branch.right[1] === stnId) {\n                newStnList[parId].branch.right[1] = children[0];\n            }\n        });\n        children.forEach(childId => {\n            var idx = newStnList[childId].parents.indexOf(stnId);\n            if (parents.length) {\n                newStnList[childId].parents[idx] = parents[0];\n            } else {\n                // Left dest\n                newStnList[childId].parents.splice(idx, 1);\n            }\n\n            if (newStnList[childId].branch.left[1] === stnId) {\n                newStnList[childId].branch.left[1] = parents[0];\n            }\n        });\n    }\n\n    delete newStnList[stnId];\n\n    return newStnList;\n};\n","import React, { useMemo, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    List,\n    ListItem,\n    ListItemIcon,\n    Icon,\n    DialogActions,\n    Button,\n    makeStyles,\n    createStyles,\n    ListItemText,\n    Select,\n    Divider,\n} from '@material-ui/core';\nimport { formatStnName } from '../../utils';\nimport { getYShareMTR } from '../../methods';\nimport { addStation } from './utils';\nimport { useAppDispatch, useAppSelector } from '../../redux';\nimport { StationDict, StationInfo } from '../../constants/constants';\nimport { setStationsBulk } from '../../redux/param/action';\n\nconst newBranchPossibleEnd = (prep: 'before' | 'after', pivot: string, stnList: StationDict) => {\n    let res: string[] = [];\n    if (prep === 'before') {\n        while (stnList[pivot].parents.length === 1) {\n            pivot = stnList[pivot].parents[0];\n            res.unshift(pivot);\n        }\n        res.pop();\n    } else {\n        while (stnList[pivot].children.length === 1) {\n            pivot = stnList[pivot].children[0];\n            res.push(pivot);\n        }\n        res.shift();\n    }\n    return res;\n};\n\nconst newStnPossibleLoc = (\n    prep: 'before' | 'after',\n    pivot: string,\n    stnList: { [stnId: string]: StationInfo }\n): [number, number, number, string[], string[]] => {\n    let deg = stnList[pivot] ? stnList[pivot][prep === 'before' ? 'parents' : 'children'].length : 0;\n    switch (deg) {\n        case 2:\n            // 1 -> 2\n            return [1, 1, 1, [], []];\n        case 1:\n            let y = getYShareMTR(pivot, stnList);\n            if (y === 0) {\n                // 1 -> 1\n                let state: string[] | 0 = newBranchPossibleEnd(prep, pivot, stnList);\n                state = state.length ? state : [];\n                return [1, 0, 0, state, state];\n                // [1,0,0,1,1];\n            } else if (y < 0) {\n                if (prep === 'before') {\n                    return [stnList[stnList[pivot].parents[0]].children.length - 1, 0, 1, [], []];\n                } else {\n                    return [stnList[stnList[pivot].children[0]].parents.length - 1, 0, 1, [], []];\n                }\n            } else {\n                if (prep === 'before') {\n                    return [stnList[stnList[pivot].parents[0]].children.length - 1, 1, 0, [], []];\n                } else {\n                    return [stnList[stnList[pivot].children[0]].parents.length - 1, 1, 0, [], []];\n                }\n            }\n    }\n    return [0, 0, 0, [], []];\n};\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        dialogContent: {\n            padding: 8,\n        },\n        select: {\n            width: 166,\n            marginLeft: 8,\n        },\n    })\n);\n\ninterface StationAddDialogProps {\n    open: boolean;\n    onClose: (action: 'close' | string) => void;\n}\n\nexport default React.memo(\n    function StationAddDialog(props: StationAddDialogProps) {\n        const { t } = useTranslation();\n        const classes = useStyles();\n        const dispatch = useAppDispatch();\n\n        const rmgStyle = useAppSelector(store => store.param.style);\n        const stnList = useAppSelector(store => store.param.stn_list);\n        const { tpo } = useAppSelector(store => store.helper)\n\n        const allLocs = {\n            centre: t('stations.add.centre'),\n            upper: t('stations.add.upper'),\n            lower: t('stations.add.lower'),\n            newupper: t('stations.add.newUpper'),\n            newlower: t('stations.add.newLower'),\n        };\n\n        const [prep, setPrep] = React.useState('before' as 'before' | 'after');\n        const [pivot, setPivot] = React.useState(tpo[0]);\n        const [loc, setLoc] = React.useState(Object.keys(allLocs)[0]);\n        const [locOK, setLocOK] = React.useState(Array(5).fill(true) as boolean[]);\n\n        const [end, setEnd] = React.useState('');\n        const [endList, setEndList] = React.useState([] as string[]);\n\n        // Hook for updating loc list and end lists when pivot changed\n        const newLocs = useMemo(() => newStnPossibleLoc(prep, pivot, stnList), [prep, pivot, stnList]);\n        useEffect(\n            () => {\n                setLocOK(newLocs.map(p => (typeof p === 'number' ? Boolean(p) : Boolean(p.length))));\n                setEndList(newLocs[3]);\n            },\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            [newLocs.toString()]\n        );\n\n        // Hook for updating loc selection (first available) when locOK list changed\n        useEffect(\n            () => setLoc(Object.keys(allLocs)[locOK.indexOf(true)]),\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            [locOK]\n        );\n\n        // Hook for updating end selection when end list changed\n        useEffect(() => {\n            if (endList.length === 0) return;\n            setEnd(endList[0]);\n        }, [endList]);\n\n        // Hook for setting new pivot in case of previous one being deleted\n        useEffect(\n            () => {\n                if (!(pivot in stnList)) setPivot(tpo[0]);\n            },\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            [Object.keys(stnList).toString()]\n        );\n\n        const handleClick = (action: string) => {\n            if (action === 'close') {\n                props.onClose('close');\n            } else {\n                let [newId, res] = addStation(\n                    prep as 'before' | 'after',\n                    pivot,\n                    loc as 'centre' | 'upper' | 'lower' | 'newupper' | 'newlower',\n                    end as string,\n                    stnList\n                );\n                dispatch(setStationsBulk(res));\n                props.onClose(newId);\n            }\n        };\n\n        return (\n            <Dialog open={props.open} onClose={() => handleClick('close')}>\n                <DialogTitle>{t('stations.add.title')}</DialogTitle>\n                <DialogContent className={classes.dialogContent}>\n                    <List component=\"div\" disablePadding>\n                        <ListItem>\n                            <ListItemIcon>\n                                <Icon>control_camera</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('stations.add.prep')} />\n                            <Select\n                                native\n                                onChange={e => setPrep(e.target.value as 'before' | 'after')}\n                                value={prep}\n                                className={classes.select}\n                            >\n                                {['before', 'after'].map(p => (\n                                    <option key={p} value={p}>\n                                        {t('stations.add.' + p)}\n                                    </option>\n                                ))}\n                            </Select>\n                        </ListItem>\n                        <Divider variant=\"middle\" />\n                        <ListItem>\n                            <ListItemIcon>\n                                <Icon>near_me</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('stations.add.pivot')} />\n                            <Select\n                                native\n                                onChange={e => setPivot(e.target.value as string)}\n                                value={pivot}\n                                className={classes.select}\n                            >\n                                {tpo.map(stnId => (\n                                    <option key={stnId} value={stnId}>\n                                        {formatStnName(stnList[stnId], rmgStyle)}\n                                    </option>\n                                ))}\n                            </Select>\n                        </ListItem>\n                        <Divider variant=\"middle\" />\n                        <ListItem>\n                            <ListItemIcon>\n                                <Icon>share</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('stations.add.loc')} />\n                            <Select\n                                native\n                                onChange={e => setLoc(e.target.value as string)}\n                                value={loc}\n                                className={classes.select}\n                            >\n                                {(Object.keys(allLocs) as (keyof typeof allLocs)[]).map((key, idx) => (\n                                    <option key={key} value={key} disabled={!locOK[idx]}>\n                                        {allLocs[key]}\n                                    </option>\n                                ))}\n                            </Select>\n                        </ListItem>\n                        <Divider\n                            variant=\"middle\"\n                            style={{ display: ['newupper', 'newlower'].includes(loc) ? 'flex' : 'none' }}\n                        />\n                        <ListItem style={{ display: ['newupper', 'newlower'].includes(loc) ? 'flex' : 'none' }}>\n                            <ListItemIcon>\n                                <Icon>undo</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('stations.add.end')} />\n                            <Select\n                                native\n                                onChange={e => setEnd(e.target.value as string)}\n                                value={end}\n                                className={classes.select}\n                            >\n                                {endList.map(stnId => (\n                                    <option key={stnId} value={stnId}>\n                                        {formatStnName(stnList[stnId], rmgStyle)}\n                                    </option>\n                                ))}\n                            </Select>\n                        </ListItem>\n                    </List>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => handleClick('close')} color=\"primary\">\n                        {t('dialog.cancel')}\n                    </Button>\n                    <Button onClick={() => handleClick('accept')} color=\"primary\" autoFocus>\n                        {t('dialog.ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    },\n    (prevProps, nextProps) => prevProps.open === nextProps.open\n);\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    Tabs,\n    Tab,\n    Icon,\n    Typography,\n    CircularProgress,\n    DialogActions,\n    Button,\n    useTheme,\n    useMediaQuery,\n    makeStyles,\n    createStyles,\n    Paper,\n} from '@material-ui/core';\n\nconst NameTab = React.lazy(() => import(/* webpackChunkName: \"panelStationsName\" */ './name-tab'));\nconst InterchangeTab = React.lazy(() => import(/* webpackChunkName: \"panelStationsInterchange\" */ './interchange-tab'));\nconst BranchTab = React.lazy(() => import(/* webpackChunkName: \"panelStationsBranch\" */ './branch-tab'));\nconst MoreTab = React.lazy(() => import(/* webpackChunkName: \"panelStationsMore\" */ './more-tab'));\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        tab: {\n            padding: '6px 24px',\n            height: 48,\n            minWidth: 'calc(100% / 4)',\n            '& .MuiTab-wrapper': {\n                flexDirection: 'row',\n            },\n            '&.MuiTab-labelIcon': {\n                minHeight: 'unset',\n                '& .MuiTab-wrapper': {\n                    '& > *:first-child': {\n                        marginBottom: 0,\n                    },\n                    '& > *:not(first-child)': {\n                        paddingLeft: 8,\n                    },\n                },\n            },\n        },\n    })\n);\n\ninterface StationEditDialogProps {\n    onClose: () => void;\n    open: boolean;\n    stnId: string;\n}\n\nexport default function StationEditDialog(props: StationEditDialogProps) {\n    const { t } = useTranslation();\n\n    const [tabIndex, setTabIndex] = React.useState(0);\n\n    const classes = useStyles();\n\n    const tabNav = React.useMemo(\n        () => (\n            <Tabs\n                value={tabIndex}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n                onChange={(_, val) => setTabIndex(val)}\n                variant=\"scrollable\"\n                scrollButtons=\"off\"\n            >\n                {[\n                    ['name', 'title'],\n                    ['interchange', 'transfer_within_a_station'],\n                    ['branch', 'share'],\n                    ['more', 'more_horiz'],\n                ].map((val, i) => (\n                    <Tab\n                        label={<span>{t('stations.edit.tab.' + val[0])}</span>}\n                        icon={<Icon>{val[1]}</Icon>}\n                        key={i}\n                        className={classes.tab}\n                    />\n                ))}\n            </Tabs>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [tabIndex, classes.tab]\n    );\n\n    return (\n        <DialogWrapper {...props}>\n            {tabNav}\n            <Typography component=\"div\" role=\"tabpanel\">\n                <React.Suspense fallback={<CircularProgress />}>\n                    {(idx => {\n                        switch (idx) {\n                            case 0:\n                                return <NameTab stnId={props.stnId} />;\n                            case 1:\n                                return <InterchangeTab stnId={props.stnId} />;\n                            case 2:\n                                return <BranchTab stnId={props.stnId} />;\n                            case 3:\n                                return <MoreTab stnId={props.stnId} />;\n                        }\n                    })(tabIndex)}\n                </React.Suspense>\n            </Typography>\n        </DialogWrapper>\n    );\n}\n\nconst DialogWrapper = (props: { children: React.ReactNode } & StationEditDialogProps) => {\n    const { t } = useTranslation();\n\n    const theme = useTheme();\n    const isMobile = useMediaQuery(theme.breakpoints.down('xs'));\n    const isDialog = useMediaQuery(theme.breakpoints.down('sm'));\n\n    return isDialog ? (\n        <Dialog onClose={props.onClose} open={props.open} fullScreen={isMobile}>\n            <DialogTitle>{t('stations.edit.title')}</DialogTitle>\n            <DialogContent dividers style={{ padding: '0 16px' }}>\n                {props.children}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose} color=\"primary\">\n                    {t('dialog.done')}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    ) : (\n        <Paper>{props.children}</Paper>\n    );\n};\n","import Dialog from './dialog';\n\nexport default Dialog;\n","import lookup from 'void-elements'\nconst attrRE = /\\s([^'\"/\\s><]+?)[\\s/>]|([^\\s=]+)=\\s?(\".*?\"|'.*?')/g\n\nexport default function stringify(tag) {\n  const res = {\n    type: 'tag',\n    name: '',\n    voidElement: false,\n    attrs: {},\n    children: [],\n  }\n\n  const tagMatch = tag.match(/<\\/?([^\\s]+?)[/\\s>]/)\n  if (tagMatch) {\n    res.name = tagMatch[1]\n    if (\n      lookup[tagMatch[1]] ||\n      tag.charAt(tag.length - 2) === '/'\n    ) {\n      res.voidElement = true\n    }\n\n    // handle comment tag\n    if (res.name.startsWith('!--')) {\n      const endIndex = tag.indexOf('-->')\n      return {\n        type: 'comment',\n        comment: endIndex !== -1 ? tag.slice(4, endIndex) : '',\n      }\n    }\n  }\n\n  const reg = new RegExp(attrRE)\n  let result = null\n  for (;;) {\n    result = reg.exec(tag)\n\n    if (result === null) {\n      break\n    }\n\n    if (!result[0].trim()) {\n      continue\n    }\n\n    if (result[1]) {\n      const attr = result[1].trim()\n      let arr = [attr, '']\n\n      if (attr.indexOf('=') > -1) {\n        arr = attr.split('=')\n      }\n\n      res.attrs[arr[0]] = arr[1]\n      reg.lastIndex--\n    } else if (result[2]) {\n      res.attrs[result[2]] = result[3].trim().substring(1, result[3].length - 1)\n    }\n  }\n\n  return res\n}\n","import parseTag from './parse-tag'\n\nconst tagRE = /<[a-zA-Z0-9\\-\\!\\/](?:\"[^\"]*\"|'[^']*'|[^'\">])*>/g\nconst whitespaceRE = /^\\s*$/\n\n// re-used obj for quick lookups of components\nconst empty = Object.create(null)\n\nexport default function parse(html, options) {\n  options || (options = {})\n  options.components || (options.components = empty)\n  const result = []\n  const arr = []\n  let current\n  let level = -1\n  let inComponent = false\n\n  // handle text at top level\n  if (html.indexOf('<') !== 0) {\n    var end = html.indexOf('<')\n    result.push({\n      type: 'text',\n      content: end === -1 ? html : html.substring(0, end),\n    })\n  }\n\n  html.replace(tagRE, function (tag, index) {\n    if (inComponent) {\n      if (tag !== '</' + current.name + '>') {\n        return\n      } else {\n        inComponent = false\n      }\n    }\n    const isOpen = tag.charAt(1) !== '/'\n    const isComment = tag.startsWith('<!--')\n    const start = index + tag.length\n    const nextChar = html.charAt(start)\n    let parent\n\n    if (isComment) {\n      const comment = parseTag(tag)\n\n      // if we're at root, push new base node\n      if (level < 0) {\n        result.push(comment)\n        return result\n      }\n      parent = arr[level]\n      parent.children.push(comment)\n      return result\n    }\n\n    if (isOpen) {\n      level++\n\n      current = parseTag(tag)\n      if (current.type === 'tag' && options.components[current.name]) {\n        current.type = 'component'\n        inComponent = true\n      }\n\n      if (\n        !current.voidElement &&\n        !inComponent &&\n        nextChar &&\n        nextChar !== '<'\n      ) {\n        current.children.push({\n          type: 'text',\n          content: html.slice(start, html.indexOf('<', start)),\n        })\n      }\n\n      // if we're at root, push new base node\n      if (level === 0) {\n        result.push(current)\n      }\n\n      parent = arr[level - 1]\n\n      if (parent) {\n        parent.children.push(current)\n      }\n\n      arr[level] = current\n    }\n\n    if (!isOpen || current.voidElement) {\n      if (\n        level > -1 &&\n        (current.voidElement || current.name === tag.slice(2, -1))\n      ) {\n        level--\n        // move current up a level to match the end tag\n        current = level === -1 ? result : arr[level]\n      }\n      if (!inComponent && nextChar !== '<' && nextChar) {\n        // trailing text node\n        // if we're at the root, push a base text node. otherwise add as\n        // a child to the current node.\n        parent = level === -1 ? result : arr[level].children\n\n        // calculate correct end of the content slice in case there's\n        // no tag after the text node.\n        const end = html.indexOf('<', start)\n        let content = html.slice(start, end === -1 ? undefined : end)\n        // if a node is nothing but whitespace, collapse it as the spec states:\n        // https://www.w3.org/TR/html4/struct/text.html#h-9.1\n        if (whitespaceRE.test(content)) {\n          content = ' '\n        }\n        // don't add whitespace-only text nodes if they would be trailing text nodes\n        // or if they would be leading whitespace-only text nodes:\n        //  * end > -1 indicates this is not a trailing text node\n        //  * leading node is when level is -1 and parent has length 0\n        if ((end > -1 && level + parent.length >= 0) || content !== ' ') {\n          parent.push({\n            type: 'text',\n            content: content,\n          })\n        }\n      }\n    }\n  })\n\n  return result\n}\n","function attrString(attrs) {\n  const buff = []\n  for (let key in attrs) {\n    buff.push(key + '=\"' + attrs[key] + '\"')\n  }\n  if (!buff.length) {\n    return ''\n  }\n  return ' ' + buff.join(' ')\n}\n\nfunction stringify(buff, doc) {\n  switch (doc.type) {\n    case 'text':\n      return buff + doc.content\n    case 'tag':\n      buff +=\n        '<' +\n        doc.name +\n        (doc.attrs ? attrString(doc.attrs) : '') +\n        (doc.voidElement ? '/>' : '>')\n      if (doc.voidElement) {\n        return buff\n      }\n      return buff + doc.children.reduce(stringify, '') + '</' + doc.name + '>'\n    case 'comment':\n      buff += '<!--' + doc.comment + '-->'\n      return buff\n  }\n}\n\nexport default function (doc) {\n  return doc.reduce(function (token, rootEl) {\n    return token + stringify('', rootEl)\n  }, '')\n}\n","import parse from './parse'\nimport stringify from './stringify'\n\nexport default {\n  parse,\n  stringify,\n}\n","import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"format\"],\n    _excluded2 = [\"children\", \"count\", \"parent\", \"i18nKey\", \"tOptions\", \"values\", \"defaults\", \"components\", \"ns\", \"i18n\", \"t\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext } from 'react';\nimport HTML from 'html-parse-stringify';\nimport { getI18n, I18nContext, getDefaults } from './context';\nimport { warn, warnOnce } from './utils';\n\nfunction hasChildren(node, checkLength) {\n  if (!node) return false;\n  var base = node.props ? node.props.children : node.children;\n  if (checkLength) return base.length > 0;\n  return !!base;\n}\n\nfunction getChildren(node) {\n  if (!node) return [];\n  return node && node.children ? node.children : node.props && node.props.children;\n}\n\nfunction hasValidReactChildren(children) {\n  if (Object.prototype.toString.call(children) !== '[object Array]') return false;\n  return children.every(function (child) {\n    return React.isValidElement(child);\n  });\n}\n\nfunction getAsArray(data) {\n  return Array.isArray(data) ? data : [data];\n}\n\nfunction mergeProps(source, target) {\n  var newTarget = _objectSpread({}, target);\n\n  newTarget.props = Object.assign(source.props, target.props);\n  return newTarget;\n}\n\nexport function nodesToString(children, i18nOptions) {\n  if (!children) return '';\n  var stringNode = '';\n  var childrenArray = getAsArray(children);\n  var keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];\n  childrenArray.forEach(function (child, childIndex) {\n    if (typeof child === 'string') {\n      stringNode += \"\".concat(child);\n    } else if (React.isValidElement(child)) {\n      var childPropsCount = Object.keys(child.props).length;\n      var shouldKeepChild = keepArray.indexOf(child.type) > -1;\n      var childChildren = child.props.children;\n\n      if (!childChildren && shouldKeepChild && childPropsCount === 0) {\n        stringNode += \"<\".concat(child.type, \"/>\");\n      } else if (!childChildren && (!shouldKeepChild || childPropsCount !== 0)) {\n        stringNode += \"<\".concat(childIndex, \"></\").concat(childIndex, \">\");\n      } else if (child.props.i18nIsDynamicList) {\n        stringNode += \"<\".concat(childIndex, \"></\").concat(childIndex, \">\");\n      } else if (shouldKeepChild && childPropsCount === 1 && typeof childChildren === 'string') {\n        stringNode += \"<\".concat(child.type, \">\").concat(childChildren, \"</\").concat(child.type, \">\");\n      } else {\n        var content = nodesToString(childChildren, i18nOptions);\n        stringNode += \"<\".concat(childIndex, \">\").concat(content, \"</\").concat(childIndex, \">\");\n      }\n    } else if (child === null) {\n      warn(\"Trans: the passed in value is invalid - seems you passed in a null child.\");\n    } else if (_typeof(child) === 'object') {\n      var format = child.format,\n          clone = _objectWithoutProperties(child, _excluded);\n\n      var keys = Object.keys(clone);\n\n      if (keys.length === 1) {\n        var value = format ? \"\".concat(keys[0], \", \").concat(format) : keys[0];\n        stringNode += \"{{\".concat(value, \"}}\");\n      } else {\n        warn(\"react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.\", child);\n      }\n    } else {\n      warn(\"Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.\", child);\n    }\n  });\n  return stringNode;\n}\n\nfunction renderNodes(children, targetString, i18n, i18nOptions, combinedTOpts) {\n  if (targetString === '') return [];\n  var keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];\n  var emptyChildrenButNeedsHandling = targetString && new RegExp(keepArray.join('|')).test(targetString);\n  if (!children && !emptyChildrenButNeedsHandling) return [targetString];\n  var data = {};\n\n  function getData(childs) {\n    var childrenArray = getAsArray(childs);\n    childrenArray.forEach(function (child) {\n      if (typeof child === 'string') return;\n      if (hasChildren(child)) getData(getChildren(child));else if (_typeof(child) === 'object' && !React.isValidElement(child)) Object.assign(data, child);\n    });\n  }\n\n  getData(children);\n  var ast = HTML.parse(\"<0>\".concat(targetString, \"</0>\"));\n\n  var opts = _objectSpread(_objectSpread({}, data), combinedTOpts);\n\n  function renderInner(child, node, rootReactNode) {\n    var childs = getChildren(child);\n    var mappedChildren = mapAST(childs, node.children, rootReactNode);\n    return hasValidReactChildren(childs) && mappedChildren.length === 0 ? childs : mappedChildren;\n  }\n\n  function pushTranslatedJSX(child, inner, mem, i, isVoid) {\n    if (child.dummy) child.children = inner;\n    mem.push(React.cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n      key: i\n    }), isVoid ? undefined : inner));\n  }\n\n  function mapAST(reactNode, astNode, rootReactNode) {\n    var reactNodes = getAsArray(reactNode);\n    var astNodes = getAsArray(astNode);\n    return astNodes.reduce(function (mem, node, i) {\n      var translationContent = node.children && node.children[0] && node.children[0].content && i18n.services.interpolator.interpolate(node.children[0].content, opts, i18n.language);\n\n      if (node.type === 'tag') {\n        var tmp = reactNodes[parseInt(node.name, 10)];\n        if (!tmp && rootReactNode.length === 1 && rootReactNode[0][node.name]) tmp = rootReactNode[0][node.name];\n        if (!tmp) tmp = {};\n        var child = Object.keys(node.attrs).length !== 0 ? mergeProps({\n          props: node.attrs\n        }, tmp) : tmp;\n        var isElement = React.isValidElement(child);\n        var isValidTranslationWithChildren = isElement && hasChildren(node, true) && !node.voidElement;\n        var isEmptyTransWithHTML = emptyChildrenButNeedsHandling && _typeof(child) === 'object' && child.dummy && !isElement;\n        var isKnownComponent = _typeof(children) === 'object' && children !== null && Object.hasOwnProperty.call(children, node.name);\n\n        if (typeof child === 'string') {\n          var value = i18n.services.interpolator.interpolate(child, opts, i18n.language);\n          mem.push(value);\n        } else if (hasChildren(child) || isValidTranslationWithChildren) {\n            var inner = renderInner(child, node, rootReactNode);\n            pushTranslatedJSX(child, inner, mem, i);\n          } else if (isEmptyTransWithHTML) {\n          var _inner = mapAST(reactNodes, node.children, rootReactNode);\n\n          mem.push(React.cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          }), _inner));\n        } else if (Number.isNaN(parseFloat(node.name))) {\n          if (isKnownComponent) {\n            var _inner2 = renderInner(child, node, rootReactNode);\n\n            pushTranslatedJSX(child, _inner2, mem, i, node.voidElement);\n          } else if (i18nOptions.transSupportBasicHtmlNodes && keepArray.indexOf(node.name) > -1) {\n            if (node.voidElement) {\n              mem.push(React.createElement(node.name, {\n                key: \"\".concat(node.name, \"-\").concat(i)\n              }));\n            } else {\n              var _inner3 = mapAST(reactNodes, node.children, rootReactNode);\n\n              mem.push(React.createElement(node.name, {\n                key: \"\".concat(node.name, \"-\").concat(i)\n              }, _inner3));\n            }\n          } else if (node.voidElement) {\n            mem.push(\"<\".concat(node.name, \" />\"));\n          } else {\n            var _inner4 = mapAST(reactNodes, node.children, rootReactNode);\n\n            mem.push(\"<\".concat(node.name, \">\").concat(_inner4, \"</\").concat(node.name, \">\"));\n          }\n        } else if (_typeof(child) === 'object' && !isElement) {\n          var content = node.children[0] ? translationContent : null;\n          if (content) mem.push(content);\n        } else if (node.children.length === 1 && translationContent) {\n          mem.push(React.cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          }), translationContent));\n        } else {\n          mem.push(React.cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          })));\n        }\n      } else if (node.type === 'text') {\n        var wrapTextNodes = i18nOptions.transWrapTextNodes;\n\n        var _content = i18n.services.interpolator.interpolate(node.content, opts, i18n.language);\n\n        if (wrapTextNodes) {\n          mem.push(React.createElement(wrapTextNodes, {\n            key: \"\".concat(node.name, \"-\").concat(i)\n          }, _content));\n        } else {\n          mem.push(_content);\n        }\n      }\n\n      return mem;\n    }, []);\n  }\n\n  var result = mapAST([{\n    dummy: true,\n    children: children || []\n  }], ast, getAsArray(children || []));\n  return getChildren(result[0]);\n}\n\nexport function Trans(_ref) {\n  var children = _ref.children,\n      count = _ref.count,\n      parent = _ref.parent,\n      i18nKey = _ref.i18nKey,\n      _ref$tOptions = _ref.tOptions,\n      tOptions = _ref$tOptions === void 0 ? {} : _ref$tOptions,\n      values = _ref.values,\n      defaults = _ref.defaults,\n      components = _ref.components,\n      ns = _ref.ns,\n      i18nFromProps = _ref.i18n,\n      tFromProps = _ref.t,\n      additionalProps = _objectWithoutProperties(_ref, _excluded2);\n\n  var _ref2 = useContext(I18nContext) || {},\n      i18nFromContext = _ref2.i18n,\n      defaultNSFromContext = _ref2.defaultNS;\n\n  var i18n = i18nFromProps || i18nFromContext || getI18n();\n\n  if (!i18n) {\n    warnOnce('You will need to pass in an i18next instance by using i18nextReactModule');\n    return children;\n  }\n\n  var t = tFromProps || i18n.t.bind(i18n) || function (k) {\n    return k;\n  };\n\n  var reactI18nextOptions = _objectSpread(_objectSpread({}, getDefaults()), i18n.options && i18n.options.react);\n\n  var namespaces = ns || t.ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;\n  namespaces = typeof namespaces === 'string' ? [namespaces] : namespaces || ['translation'];\n  var defaultValue = defaults || nodesToString(children, reactI18nextOptions) || reactI18nextOptions.transEmptyNodeValue || i18nKey;\n  var hashTransKey = reactI18nextOptions.hashTransKey;\n  var key = i18nKey || (hashTransKey ? hashTransKey(defaultValue) : defaultValue);\n  var interpolationOverride = values ? tOptions.interpolation : {\n    interpolation: _objectSpread(_objectSpread({}, tOptions.interpolation), {}, {\n      prefix: '#$?',\n      suffix: '?$#'\n    })\n  };\n\n  var combinedTOpts = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, tOptions), {}, {\n    count: count\n  }, values), interpolationOverride), {}, {\n    defaultValue: defaultValue,\n    ns: namespaces\n  });\n\n  var translation = key ? t(key, combinedTOpts) : defaultValue;\n  var content = renderNodes(components || children, translation, i18n, reactI18nextOptions, combinedTOpts);\n  var useAsParent = parent !== undefined ? parent : reactI18nextOptions.defaultTransParent;\n  return useAsParent ? React.createElement(useAsParent, additionalProps, content) : content;\n}","import React, { useState, memo } from 'react';\nimport { useTranslation, Trans } from 'react-i18next';\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@material-ui/core';\nimport { removeStation } from './utils';\nimport { setCurrentStation, setStationsBulk } from '../../redux/param/action';\nimport { useAppDispatch, useAppSelector } from '../../redux';\n\ninterface Props {\n    open: boolean;\n    onClose: () => void;\n}\n\nexport default function StationDeleteDialog(props: Props & { stnId: string }) {\n    const { stnId, open, onClose } = props;\n    const { t } = useTranslation();\n    const dispatch = useAppDispatch();\n\n    const stnList = useAppSelector(store => store.param.stn_list);\n    const currentStationIndex = useAppSelector(store => store.param.current_stn_idx);\n\n    const [isError, setIsError] = useState(false);\n\n    const handleClick = (action: 'close' | 'accept') => () => {\n        if (action === 'accept') {\n            let res = removeStation(stnId, stnList);\n            if (res === false) {\n                setIsError(true);\n            } else {\n                if (currentStationIndex === stnId) {\n                    let newCurrentId = Object.keys(res).filter(id => !['linestart', 'lineend'].includes(id))[0];\n                    dispatch(setCurrentStation(newCurrentId));\n                }\n                dispatch(setStationsBulk(res));\n            }\n        }\n        onClose();\n    };\n    return (\n        <>\n            <Dialog open={open} onClose={handleClick('close')}>\n                <DialogTitle>{t('stations.remove.title')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        <Trans i18nKey=\"stations.remove.msg\">{{ name: stnList[props.stnId]?.name.join() }}</Trans>\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClick('close')} color=\"primary\" autoFocus>\n                        {t('dialog.cancel')}\n                    </Button>\n                    <Button onClick={handleClick('accept')} color=\"primary\">\n                        {t('stations.remove.button')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n            <ErrorDialog open={isError} onClose={() => setIsError(false)} />\n        </>\n    );\n}\n\nconst ErrorDialog = memo(\n    (props: Props) => {\n        const { t } = useTranslation();\n        return (\n            <Dialog open={props.open} onClose={props.onClose}>\n                <DialogTitle>{t('stations.remove.error.title')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{t('stations.remove.error.msg')}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={props.onClose} color=\"primary\" autoFocus>\n                        {t('dialog.ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    },\n    (prevProps, nextProps) => prevProps.open === nextProps.open\n);\n","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { chainPropTypes } from '@material-ui/utils';\nimport withStyles from '../styles/withStyles';\nimport ButtonBase from '../ButtonBase';\nimport capitalize from '../utils/capitalize';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.button, {\n      boxSizing: 'border-box',\n      minHeight: 36,\n      transition: theme.transitions.create(['background-color', 'box-shadow', 'border'], {\n        duration: theme.transitions.duration.short\n      }),\n      borderRadius: '50%',\n      padding: 0,\n      minWidth: 0,\n      width: 56,\n      height: 56,\n      boxShadow: theme.shadows[6],\n      '&:active': {\n        boxShadow: theme.shadows[12]\n      },\n      color: theme.palette.getContrastText(theme.palette.grey[300]),\n      backgroundColor: theme.palette.grey[300],\n      '&:hover': {\n        backgroundColor: theme.palette.grey.A100,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: theme.palette.grey[300]\n        },\n        '&$disabled': {\n          backgroundColor: theme.palette.action.disabledBackground\n        },\n        textDecoration: 'none'\n      },\n      '&$focusVisible': {\n        boxShadow: theme.shadows[6]\n      },\n      '&$disabled': {\n        color: theme.palette.action.disabled,\n        boxShadow: theme.shadows[0],\n        backgroundColor: theme.palette.action.disabledBackground\n      }\n    }),\n\n    /* Styles applied to the span element that wraps the children. */\n    label: {\n      width: '100%',\n      // assure the correct width for iOS Safari\n      display: 'inherit',\n      alignItems: 'inherit',\n      justifyContent: 'inherit'\n    },\n\n    /* Styles applied to the root element if `color=\"primary\"`. */\n    primary: {\n      color: theme.palette.primary.contrastText,\n      backgroundColor: theme.palette.primary.main,\n      '&:hover': {\n        backgroundColor: theme.palette.primary.dark,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: theme.palette.primary.main\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `color=\"secondary\"`. */\n    secondary: {\n      color: theme.palette.secondary.contrastText,\n      backgroundColor: theme.palette.secondary.main,\n      '&:hover': {\n        backgroundColor: theme.palette.secondary.dark,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: theme.palette.secondary.main\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"extended\"`. */\n    extended: {\n      borderRadius: 48 / 2,\n      padding: '0 16px',\n      width: 'auto',\n      minHeight: 'auto',\n      minWidth: 48,\n      height: 48,\n      '&$sizeSmall': {\n        width: 'auto',\n        padding: '0 8px',\n        borderRadius: 34 / 2,\n        minWidth: 34,\n        height: 34\n      },\n      '&$sizeMedium': {\n        width: 'auto',\n        padding: '0 16px',\n        borderRadius: 40 / 2,\n        minWidth: 40,\n        height: 40\n      }\n    },\n\n    /* Pseudo-class applied to the ButtonBase root element if the button is keyboard focused. */\n    focusVisible: {},\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Styles applied to the root element if `color=\"inherit\"`. */\n    colorInherit: {\n      color: 'inherit'\n    },\n\n    /* Styles applied to the root element if `size=\"small\"``. */\n    sizeSmall: {\n      width: 40,\n      height: 40\n    },\n\n    /* Styles applied to the root element if `size=\"medium\"``. */\n    sizeMedium: {\n      width: 48,\n      height: 48\n    }\n  };\n};\nvar Fab = /*#__PURE__*/React.forwardRef(function Fab(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'default' : _props$color,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'button' : _props$component,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$disableFocusRi = props.disableFocusRipple,\n      disableFocusRipple = _props$disableFocusRi === void 0 ? false : _props$disableFocusRi,\n      focusVisibleClassName = props.focusVisibleClassName,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'large' : _props$size,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'circular' : _props$variant,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"color\", \"component\", \"disabled\", \"disableFocusRipple\", \"focusVisibleClassName\", \"size\", \"variant\"]);\n\n  return /*#__PURE__*/React.createElement(ButtonBase, _extends({\n    className: clsx(classes.root, className, size !== 'large' && classes[\"size\".concat(capitalize(size))], disabled && classes.disabled, variant === 'extended' && classes.extended, {\n      'primary': classes.primary,\n      'secondary': classes.secondary,\n      'inherit': classes.colorInherit\n    }[color]),\n    component: component,\n    disabled: disabled,\n    focusRipple: !disableFocusRipple,\n    focusVisibleClassName: clsx(classes.focusVisible, focusVisibleClassName),\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.label\n  }, children));\n});\nprocess.env.NODE_ENV !== \"production\" ? Fab.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the button.\n   */\n  children: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .node.isRequired,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: PropTypes.oneOf(['default', 'inherit', 'primary', 'secondary']),\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, the button will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the  keyboard focus ripple will be disabled.\n   */\n  disableFocusRipple: PropTypes.bool,\n\n  /**\n   * If `true`, the ripple effect will be disabled.\n   */\n  disableRipple: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  focusVisibleClassName: PropTypes.string,\n\n  /**\n   * The URL to link to when the button is clicked.\n   * If defined, an `a` element will be used as the root node.\n   */\n  href: PropTypes.string,\n\n  /**\n   * The size of the button.\n   * `small` is equivalent to the dense button styling.\n   */\n  size: PropTypes.oneOf(['large', 'medium', 'small']),\n\n  /**\n   * The variant to use.\n   * 'round' is deprecated, use 'circular' instead.\n   */\n  variant: chainPropTypes(PropTypes.oneOf(['extended', 'circular', 'round']), function (props) {\n    if (props.variant === 'round') {\n      throw new Error('Material-UI: variant=\"round\" was renamed variant=\"circular\" for consistency.');\n    }\n\n    return null;\n  })\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiFab'\n})(Fab);","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    createStyles,\n    Fab,\n    Icon,\n    ListItemIcon,\n    ListItemText,\n    makeStyles,\n    Menu,\n    MenuItem,\n    Tooltip,\n} from '@material-ui/core';\nimport { useAppSelector } from '../../redux';\nimport { RmgStyle } from '../../constants/constants';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        fab: {\n            position: 'fixed',\n            right: theme.spacing(2),\n            bottom: theme.spacing(2),\n        },\n    })\n);\n\ninterface Props {\n    onAction: (action: string) => void;\n}\n\nconst StationFabs = React.memo(\n    (props: Props) => {\n        const { t } = useTranslation();\n        const rmgStyle = useAppSelector(store => store.param.style);\n        const classes = useStyles();\n        const [fabEl, setFabEl] = React.useState<null | HTMLElement>(null);\n\n        const handleAction = (action: string) => () => {\n            setFabEl(null);\n            props.onAction(action);\n        };\n\n        return (\n            <>\n                <Tooltip title={t('stations.fabs.tooltip') || ''} aria-label=\"options\">\n                    <Fab color=\"primary\" className={classes.fab} onClick={e => setFabEl(e.target as HTMLElement)}>\n                        <Icon>more_vert</Icon>\n                    </Fab>\n                </Tooltip>\n\n                <Menu anchorEl={fabEl} open={Boolean(fabEl)} onClose={() => setFabEl(null)}>\n                    <MenuItem onClick={handleAction('add')}>\n                        <ListItemIcon>\n                            <Icon>add_box</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={t('stations.fabs.add')} />\n                    </MenuItem>\n                    <MenuItem onClick={handleAction('reverse')}>\n                        <ListItemIcon>\n                            <Icon>cached</Icon>\n                        </ListItemIcon>\n                        <ListItemText primary={t('stations.fabs.reverse')} />\n                    </MenuItem>\n                    {rmgStyle === RmgStyle.GZMTR && (\n                        <MenuItem onClick={handleAction('autonum')}>\n                            <ListItemIcon>\n                                <Icon>filter_1</Icon>\n                            </ListItemIcon>\n                            <ListItemText primary={t('design.autoNum.button')} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </>\n        );\n    },\n    () => true\n);\n\nexport default StationFabs;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@material-ui/core';\nimport { updateStationNum } from '../../redux/param/action';\nimport { useAppDispatch, useAppSelector } from '../../redux';\n\ninterface Props {\n    open: boolean;\n    onClose: () => void;\n}\n\nconst AutoNumDialog = (props: Props) => {\n    const { t } = useTranslation();\n    const dispatch = useAppDispatch();\n\n    const { branches } = useAppSelector(store => store.helper);\n\n    const handleClick = (action: 'ascend' | 'descend') => {\n        let branch0 = branches[0];\n        branch0.forEach((stnId, i) => {\n            let num: string;\n            if (action === 'ascend') {\n                num = i.toString().padStart(2, '0');\n            } else {\n                num = (branch0.length - 1 - i).toString().padStart(2, '0');\n            }\n            dispatch(updateStationNum(stnId, num));\n            // (window.myLine as RMGLineGZ).updateStnNum(stnId, num);\n        });\n        // props.paramUpdate('stn_list', getParams().stn_list);\n        props.onClose();\n    };\n\n    return React.useMemo(\n        () => (\n            <Dialog onClose={props.onClose} open={props.open}>\n                <DialogTitle>{t('design.autoNum.title')}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>{t('design.autoNum.msg')}</DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={props.onClose} color=\"primary\" autoFocus>\n                        {t('dialog.cancel')}\n                    </Button>\n                    <Button onClick={() => handleClick('ascend')} color=\"primary\">\n                        {t('design.autoNum.ascend')}\n                    </Button>\n                    <Button onClick={() => handleClick('descend')} color=\"primary\">\n                        {t('design.autoNum.descend')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [props.open]\n    );\n};\n\nexport default AutoNumDialog;\n","import React, { useState } from 'react';\nimport { createStyles, Grid, makeStyles } from '@material-ui/core';\nimport StationList from './station-list';\nimport StationAddDialog from './add-diag';\nimport StationEditDialog from './edit-diag';\nimport StationDeleteDialog from './delete-diags';\nimport StationFabs from './fabs';\nimport AutoNumDialog from './auto-num-diag';\nimport { useAppDispatch, useAppSelector } from '../../redux';\nimport { RmgStyle } from '../../constants/constants';\nimport { reverseStations } from '../../redux/param/action';\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        gridContainer: {\n            height: '100%',\n            overflow: 'hidden',\n        },\n        gridItem: {\n            height: '100%',\n            overflow: 'auto',\n        },\n    })\n);\n\nconst PanelStations2 = () => {\n    const classes = useStyles();\n    const dispatch = useAppDispatch();\n\n    const rmgStyle = useAppSelector(store => store.param.style);\n\n    const [stnSelected, setStnSelected] = useState('');\n    const [isOpen, setIsOpen] = useState(false);\n\n    const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\n    const [isAutoNumDialogOpen, setIsAutoNumDialogOpen] = useState(false);\n\n    const [stnToRemove, setStnToRemove] = useState('');\n    const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n\n    const handleAction = (stnId: string) => (action: 'edit' | 'remove') => {\n        if (action === 'edit') {\n            setStnSelected(stnId);\n            setIsOpen(true);\n        }\n        if (action === 'remove') {\n            if (stnSelected === stnId) setStnSelected('');\n            setStnToRemove(stnId);\n            setIsDeleteDialogOpen(true);\n        }\n    };\n\n    const fabsAction = (action: string) => {\n        if (action === 'add') {\n            setIsAddDialogOpen(true);\n        }\n        if (action === 'reverse') {\n            dispatch(reverseStations());\n        }\n        if (action === 'autonum') {\n            setIsAutoNumDialogOpen(true);\n        }\n    };\n\n    const stnAddDialogClose = (action: 'close' | string) => {\n        setIsAddDialogOpen(false);\n        if (action !== 'close') {\n            setStnSelected(action);\n            setIsOpen(true);\n        }\n    };\n\n    return (\n        <>\n            <Grid container spacing={1} className={classes.gridContainer}>\n                <Grid item xs={12} md={4} className={classes.gridItem}>\n                    <StationList selectedId={stnSelected} onAction={handleAction} />\n                </Grid>\n                <Grid item xs={8} className={classes.gridItem}>\n                    {stnSelected && (\n                        <StationEditDialog open={isOpen} stnId={stnSelected} onClose={() => setIsOpen(false)} />\n                    )}\n                </Grid>\n            </Grid>\n\n            <StationFabs onAction={fabsAction} />\n\n            <StationAddDialog open={isAddDialogOpen} onClose={stnAddDialogClose} />\n            <StationDeleteDialog\n                open={isDeleteDialogOpen}\n                onClose={() => setIsDeleteDialogOpen(false)}\n                stnId={stnToRemove}\n            />\n            {rmgStyle === RmgStyle.GZMTR && (\n                <AutoNumDialog open={isAutoNumDialogOpen} onClose={() => setIsAutoNumDialogOpen(false)} />\n            )}\n        </>\n    );\n};\n\nexport default PanelStations2;\n","import Panel from './panel2';\n\nexport default Panel;\n"],"sourceRoot":""}