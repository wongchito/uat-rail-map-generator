{"version":3,"sources":["svgs/destination/destination-mtr.tsx","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","svgs/strip/strip-mtr.tsx"],"names":["React","memo","DefsMTR","stripPc","InfoMTR","id","d","fill","destNames","useContext","ParamContext","param","routes","customiseMTRDest","terminal","validDests","Set","filter","route","includes","current_stn_idx","map","stnId","slice","direction","stn_list","name","join","replace","destNameEl","useRef","useState","width","bBox","setBBox","useEffect","current","getBBox","toString","isLegacy","flagLength","arrowX","svgWidth","destination","platformNumX","destNameX","style","transform","xlinkHref","PlatformNum","num","platform_num","ref","textAnchor","className","fontSize","line_name","dy","props","others","useMemo","cx","cy","r","_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","height"],"mappings":"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","file":"static/js/destinationMTR.737a60a7.chunk.js","sourcesContent":["import React from 'react';\n\nimport { ParamContext } from '../../context';\nimport StripMTR from '../strip/strip-mtr';\n\nexport default React.memo(function DestinationMTR() {\n    return (\n        <>\n            <DefsMTR />\n            <StripMTR stripPc={90} />\n            <InfoMTR />\n        </>\n    );\n});\n\nconst DefsMTR = React.memo(() => (\n    <defs>\n        <path id=\"arrow\" d=\"M60,60L0,0L60-60H100L55-15H160V15H55L100,60z\" fill=\"var(--rmg-black,#000)\" />\n    </defs>\n));\n\nconst InfoMTR = () => {\n    const { param, routes } = React.useContext(ParamContext);\n\n    let destNames: Name;\n    if (param.customiseMTRDest.terminal !== false) {\n        destNames = param.customiseMTRDest.terminal;\n    } else {\n        const validDests = [\n            ...new Set(\n                routes\n                    .filter(route => route.includes(param.current_stn_idx))\n                    .map(\n                        route =>\n                            route\n                                .filter(stnId => !['linestart', 'lineend'].includes(stnId))\n                                .slice(param.direction === 'l' ? 0 : -1)[0]\n                    )\n                    .filter(id => id !== param.current_stn_idx)\n            ),\n        ];\n        destNames = [\n            validDests.map(stnId => param.stn_list[stnId].name[0]).join('/'),\n            validDests\n                .map(stnId => param.stn_list[stnId].name[1])\n                .join('/')\n                .replace('\\\\', ' '),\n        ];\n    }\n\n    const destNameEl = React.useRef<SVGGElement | null>(null);\n    const [bBox, setBBox] = React.useState({ width: 0 } as DOMRect);\n    React.useEffect(\n        () => setBBox(destNameEl.current!.getBBox()),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [destNames.toString(), param.customiseMTRDest.isLegacy]\n    );\n\n    const flagLength = 160 + 150 + bBox.width + 45 + 50;\n    const arrowX = (param.svgWidth.destination - (param.direction === 'l' ? 1 : -1) * flagLength) / 2;\n    const platformNumX = arrowX + (param.direction === 'l' ? 1 : -1) * (160 + 50 + 75);\n    const destNameX = platformNumX + (param.direction === 'l' ? 1 : -1) * (75 + 45);\n\n    return (\n        <g id=\"dest_name\" style={{ transform: 'translateY(calc(var(--rmg-svg-height) / 2 - 20px))' }}>\n            <use xlinkHref=\"#arrow\" transform={`translate(${arrowX},0)rotate(${param.direction === 'l' ? 0 : 180})`} />\n            <PlatformNum num={param.platform_num} transform={`translate(${platformNumX},0)`} />\n            <g\n                ref={destNameEl}\n                textAnchor={param.direction === 'l' ? 'start' : 'end'}\n                transform={`translate(${destNameX},-25)`}\n                fill=\"var(--rmg-black)\"\n            >\n                <text className=\"rmg-name__zh\" fontSize={90}>\n                    {(param.customiseMTRDest.isLegacy ? param.line_name[0] : '') + 'å¾€' + destNames[0]}\n                </text>\n                <text className=\"rmg-name__en\" fontSize={45} dy={80}>\n                    {(param.customiseMTRDest.isLegacy ? param.line_name[1] + ' ' : '') + 'to ' + destNames[1]}\n                </text>\n            </g>\n        </g>\n    );\n};\n\nconst PlatformNum = (props: { num: string | false } & React.SVGProps<SVGGElement>) => {\n    const { num, ...others } = props;\n\n    return (\n        <g id=\"platform\" {...others}>\n            {React.useMemo(\n                () => (\n                    <>\n                        <circle cx={0} cy={0} r={75} fill=\"var(--rmg-theme-colour)\" />\n                        <text className=\"rmg-name__zh\" dy={0} textAnchor=\"middle\" fontSize={135} fill=\"#fff\">\n                            {num}\n                        </text>\n                    </>\n                ),\n                [num]\n            )}\n        </g>\n    );\n};\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React, { memo } from 'react';\n\nexport default memo(function StripMTR(props: { stripPc: number }) {\n    return (\n        <rect\n            fill=\"var(--rmg-theme-colour)\"\n            height={20}\n            style={{\n                width: 'var(--rmg-svg-width)',\n                ['--strip-percentage' as any]: props.stripPc,\n                transform: `translateY(calc(var(--strip-percentage, 95) * var(--rmg-svg-height) / 100 - 10px))`,\n            }}\n        />\n    );\n});\n"],"sourceRoot":""}