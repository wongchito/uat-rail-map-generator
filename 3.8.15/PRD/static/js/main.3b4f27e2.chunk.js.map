{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../external \"React\"","../external \"MaterialUI\"","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","context.ts","../external \"ReactI18next\"","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../external \"ReactRouterDOM\"","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","methods.ts","constants.ts","utils.ts","../external \"i18next\"","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../external \"ReactDOM\"","../external \"i18nextXHRBackend\"","../external \"i18nextBrowserLanguageDetector\"","i18n.ts","app-appbar.tsx","error-boundary.tsx","svgs/svg.tsx","svgs/index.ts","panels/panels.tsx","panels/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","module","exports","React","MaterialUI","_defineProperty","obj","value","configurable","writable","_slicedToArray","arr","Array","isArray","Symbol","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","unsupportedIterableToArray","TypeError","CanvasContext","createContext","ParamContext","paramReducer","state","action","type","data","svg_height","svgWidth","targetId","y_pc","branch_spacing","padding","direction_gz_x","direction_gz_y","line_name","name","theme","direction","platform_num","platform","namePosMTR","isStagger","checked","isFlip","customiseMTRDest","isLegacy","terminal","line_num","num","psd_num","info_panel_type","variant","notesGZMTR","concat","_","idx","map","note","current_stn_idx","stnId","stn_list","reduce","acc","id","lineend","parents","children","slice","reverse","branch","left","right","linestart","secondaryName","transfer","info","setIdx","nextInfo","infos","intIdx","int","j","k","osi_names","tick_direc","paid_area","isPaid","branchType","branches","first","facility","services","from","isChecked","Set","add","serviceId","s","stnList","ReactI18next","_toConsumableArray","arrayLikeToArray","iter","_unsupportedIterableToArray","o","minLen","n","prototype","toString","call","constructor","test","ReactRouterDOM","_arrayLikeToArray","len","arr2","getYShareMTR","includes","stnPred","indexOf","getBranches","console","log","stack","branchCount","curId","shift","prevId","branchNextId","getRoutes","useTpo","useState","tpo","setTpo","useEffect","res","cur","ProvidedCanvases","PanelTypesGZMTR","updateParam","param","JSON","parse","localStorage","rmgParam","dest_legacy","fontZH","fontEN","weightZH","weightEN","entries","stnInfo","style","interchange","intInfo","splice","change_type","split","usage","destination","svg_dest_width","runin","railmap","svg_width","char_form","show_outer","strip_pc","txt_bg_gap","txt_flip","join","setItem","stringify","getTransText2","langs","l","en","formatStnName","replace","i18next","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_createForOfIteratorHelper","F","e","f","it","normalCompletion","didErr","step","_e2","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","_typeof","_possibleConstructorReturn","self","ReferenceError","_createSuper","Derived","result","Super","NewTarget","this","_setPrototypeOf","p","_inherits","subClass","superClass","create","ReactDOM","i18nextXHRBackend","i18nextBrowserLanguageDetector","i18n","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","default","backend","loadPath","process","interpolation","escapeValue","then","t","document","title","documentElement","setAttribute","language","useStyles","makeStyles","createStyles","rootLight","backgroundColor","palette","primary","main","rootDark","background","paper","flexGrow","color","menuButton","AppAppBar","useTranslation","classes","prefersDarkMode","useMediaQuery","position","className","CanvasToggle","canvasAvailable","setCanvasToShown","canvasButtonEl","setCanvasButtonEl","handleClick","onClick","currentTarget","anchorEl","open","Boolean","onClose","c","margin","ZoomToggles","setCanvasScale","prevScale","ErrorBoundary","hasError","error","errorInfo","Component","root","display","flexDirection","overflowX","content","flex","border","SVGs","useContext","canvasScale","sharedProps","useCallback","canvas","xmlns","xmlnsXlink","height","viewBox","colorInterpolationFilters","canvasList","path","StyleSpecificSVGs","rmgStyle","svgProps","to","URLSearchParams","window","location","search","get","memo","canvasToShown","setCanvasAvailable","getElementById","href","prevCanvas","Suspense","fallback","fill","width","strokeWidth","stroke","RunInGZMTR","lazy","RailMapGZMTR","DestinationMTR","RailMapMTR","DestinationSHMetro","RunInSHMetro","RailMapSHMetro","gzmtr","mtr","shmetro","PanelSave","PanelLayout","PanelDesign","PanelStations","PanelInfo","breakpoints","down","typography","tab","up","justifyContent","minWidth","minHeight","marginBottom","paddingLeft","tabs","overflow","scrollbarWidth","WebkitOverflowScrolling","tabpanel","spacing","paddingBottom","alignItems","PanelTab","useTheme","isMobile","setValue","tabNav","component","orientation","indicatorColor","textColor","onChange","val","scrollButtons","label","icon","role","index","panel","darkTheme","createMuiTheme","secondary","overrides","MuiDialog","lightTheme","light","App","rmgCanvas","Number","rmgScale","toFixed","basename","Provider","pathname","AppBody","useReducer","dispatch","paramString","deps","a","useMemo","routes","overflowY","hostname","match","navigator","serviceWorker","ready","registration","unregister","catch","message","head","append","tag","link","createElement","rel","renderApp","querySelectorAll","alert","removeItem"],"mappings":"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","file":"static/js/main.3b4f27e2.chunk.js","sourcesContent":["import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","module.exports = React;","module.exports = MaterialUI;","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { createContext } from 'react';\n\ninterface ICanvasContext {\n    rmgStyle: ProvidedStyles;\n    canvasAvailable: ProvidedCanvas[];\n    setCanvasAvailable: React.Dispatch<React.SetStateAction<ProvidedCanvas[]>>;\n    canvasToShown: ProvidedCanvas | 'all';\n    setCanvasToShown: React.Dispatch<React.SetStateAction<ProvidedCanvas | 'all'>>;\n    canvasScale: number;\n    setCanvasScale: React.Dispatch<React.SetStateAction<number>>;\n}\n\ninterface IParamContext {\n    param: RMGParam;\n    dispatch: React.Dispatch<ReducerAction>;\n    branches: string[][];\n    routes: string[][];\n    deps: string;\n    tpo: string[];\n}\n\nexport const CanvasContext = createContext<ICanvasContext>({} as ICanvasContext);\nexport const ParamContext = createContext<IParamContext>({} as IParamContext);\n\ntype ReducerAction =\n    | { type: 'GLOBAL'; data: RMGParam }\n    | {\n          type: 'ANY';\n          key: string;\n          data: any;\n      }\n    | {\n          type: 'SET_HEIGHT';\n          value: number;\n      }\n    | {\n          type: 'SET_WIDTH';\n          targetId: ProvidedCanvas;\n          value: number;\n      }\n    | {\n          type: 'SET_Y';\n          value: number;\n      }\n    | {\n          type: 'SET_BRANCH_SPACING';\n          value: number;\n      }\n    | {\n          type: 'SET_PADDING';\n          value: number;\n      }\n    | {\n          type: 'SET_DIRECTION_GZ_X';\n          value: number;\n      }\n    | {\n          type: 'SET_DIRECTION_GZ_Y';\n          value: number;\n      }\n    | {\n          type: 'SET_LINE_NAME';\n          name: Name;\n      }\n    | {\n          type: 'SET_THEME';\n          theme: [string, string, string, '#fff' | '#000'];\n      }\n    | {\n          type: 'SET_DIRECTION';\n      }\n    | {\n          type: 'SET_PLATFORM';\n          platform: string | false;\n      }\n    | {\n          type: 'SET_TEXT_STAGGER';\n          checked: boolean;\n      }\n    | {\n          type: 'SET_TEXT_FLIP';\n      }\n    | {\n          type: 'SET_DEST_LEGACY';\n          isLegacy: boolean;\n      }\n    | {\n          type: 'SET_TERMINAL_OVERRIDE';\n          terminal: Name | false;\n      }\n    | {\n          type: 'SET_LINE_NUM';\n          num: string;\n      }\n    | {\n          type: 'SET_PSD_NUM';\n          num: string;\n      }\n    | {\n          type: 'SET_PANEL_TYPE';\n          variant: PanelTypeGZMTR;\n      }\n    | {\n          type: 'ADD_NOTE_GZMTR';\n      }\n    | {\n          type: 'REMOVE_NOTE_GZMTR';\n          idx: number;\n      }\n    | {\n          type: 'UPDATE_NOTE_GZMTR';\n          idx: number;\n          note: Note;\n      }\n    | {\n          type: 'SET_CURRENT_STATION';\n          stnId: string;\n      }\n    | {\n          type: 'REVERSE_STATIONS';\n      }\n    | {\n          type: 'UPDATE_STATION_NAME';\n          stnId: string;\n          name: Name;\n      }\n    | {\n          type: 'UPDATE_STATION_SECONDARY_NAME';\n          stnId: string;\n          name: false | Name;\n      }\n    | {\n          type: 'UPDATE_STATION_NUM';\n          stnId: string;\n          num: string;\n      }\n    | {\n          type: 'ADD_STATION_INTERCHANGE_INFO';\n          stnId: string;\n          setIdx: number;\n          info: InterchangeInfo;\n      }\n    | {\n          type: 'REMOVE_STATION_INTERCHANGE_INFO';\n          stnId: string;\n          setIdx: number;\n          intIdx: number;\n      }\n    | {\n          type: 'UPDATE_STATION_INTERCHANGE_INFO';\n          stnId: string;\n          setIdx: number;\n          intIdx: number;\n          info: InterchangeInfo;\n      }\n    | {\n          type: 'UPDATE_STATION_OSI_NAME';\n          stnId: string;\n          name: Name;\n      }\n    | {\n          type: 'UPDATE_STATION_TICK_DIREC';\n          stnId: string;\n          direction: 'l' | 'r';\n      }\n    | {\n          type: 'UPDATE_STATION_PAID_AREA';\n          stnId: string;\n          isPaid: boolean;\n      }\n    | {\n          type: 'UPDATE_STATION_BRANCH_TYPE';\n          stnId: string;\n          direction: 'left' | 'right';\n          branchType: 'through' | 'nonthrough';\n      }\n    | {\n          type: 'UPDATE_STATION_BRANCH_FIRST';\n          branches: [\n              {\n                  stnId: string;\n                  direction: 'left' | 'right';\n                  first: string;\n              },\n              {\n                  stnId: string;\n                  direction: 'left' | 'right';\n                  first: string;\n              }\n          ];\n      }\n    | {\n          type: 'UPDATE_STATION_BRANCH_POS';\n          left: string;\n          right: string;\n      }\n    | {\n          type: 'UPDATE_STATION_FACILITY';\n          stnId: string;\n          facility: '' | 'airport' | 'hsr' | 'disney';\n      }\n    | {\n          type: 'UPDATE_STATION_SERVICES';\n          stnId: string;\n          serviceId: Services;\n          isChecked: boolean;\n      }\n    | {\n          type: 'UPDATE_STATION_LIST';\n          stnList: StationDict;\n      };\n\nexport const paramReducer = (state: RMGParam, action: ReducerAction): RMGParam => {\n    switch (action.type) {\n        case 'GLOBAL':\n            return action.data;\n        case 'ANY':\n            return {\n                ...state,\n                [action.key]: action.data,\n            };\n        case 'SET_HEIGHT':\n            return {\n                ...state,\n                svg_height: action.value,\n            };\n        case 'SET_WIDTH':\n            return {\n                ...state,\n                svgWidth: {\n                    ...state.svgWidth,\n                    [action.targetId]: action.value,\n                },\n            };\n        case 'SET_Y':\n            return {\n                ...state,\n                y_pc: action.value,\n            };\n        case 'SET_BRANCH_SPACING':\n            return {\n                ...state,\n                branch_spacing: action.value,\n            };\n        case 'SET_PADDING':\n            return {\n                ...state,\n                padding: action.value,\n            };\n        case 'SET_DIRECTION_GZ_X':\n            return {\n                ...state,\n                direction_gz_x: action.value,\n            };\n        case 'SET_DIRECTION_GZ_Y':\n            return {\n                ...state,\n                direction_gz_y: action.value,\n            };\n        case 'SET_LINE_NAME':\n            return {\n                ...state,\n                line_name: action.name,\n            };\n        case 'SET_THEME':\n            return {\n                ...state,\n                theme: action.theme,\n            };\n        case 'SET_DIRECTION':\n            return {\n                ...state,\n                direction: state.direction === 'l' ? 'r' : 'l',\n            };\n        case 'SET_PLATFORM':\n            return {\n                ...state,\n                platform_num: action.platform,\n            };\n        case 'SET_TEXT_STAGGER':\n            return {\n                ...state,\n                namePosMTR: {\n                    ...state.namePosMTR,\n                    isStagger: action.checked,\n                },\n            };\n        case 'SET_TEXT_FLIP':\n            return {\n                ...state,\n                namePosMTR: {\n                    ...state.namePosMTR,\n                    isFlip: !state.namePosMTR.isFlip,\n                },\n            };\n        case 'SET_DEST_LEGACY':\n            return {\n                ...state,\n                customiseMTRDest: {\n                    ...state.customiseMTRDest,\n                    isLegacy: action.isLegacy,\n                },\n            };\n        case 'SET_TERMINAL_OVERRIDE':\n            return {\n                ...state,\n                customiseMTRDest: {\n                    ...state.customiseMTRDest,\n                    terminal: action.terminal,\n                },\n            };\n        case 'SET_LINE_NUM':\n            return {\n                ...state,\n                line_num: action.num,\n            };\n        case 'SET_PSD_NUM':\n            return {\n                ...state,\n                psd_num: action.num,\n            };\n        case 'SET_PANEL_TYPE':\n            return {\n                ...state,\n                info_panel_type: action.variant,\n            };\n        case 'ADD_NOTE_GZMTR':\n            return {\n                ...state,\n                notesGZMTR: state.notesGZMTR?.concat([['', '', 0, 0, false]]),\n            };\n        case 'REMOVE_NOTE_GZMTR':\n            return {\n                ...state,\n                notesGZMTR: state.notesGZMTR?.filter((_, i) => i !== action.idx),\n            };\n        case 'UPDATE_NOTE_GZMTR':\n            return {\n                ...state,\n                notesGZMTR: state.notesGZMTR?.map((note, i) => (i === action.idx ? action.note : note)),\n            };\n        case 'SET_CURRENT_STATION':\n            return {\n                ...state,\n                current_stn_idx: action.stnId,\n            };\n        case 'REVERSE_STATIONS':\n            return {\n                ...state,\n                stn_list: Object.keys(state.stn_list).reduce(\n                    (acc, stnId) => ({\n                        ...acc,\n                        [stnId]: (id => {\n                            switch (id) {\n                                case 'linestart':\n                                    return {\n                                        ...state.stn_list.lineend,\n                                        parents: [],\n                                        children: state.stn_list.lineend.parents.slice().reverse(),\n                                        branch: { left: [] as [], right: state.stn_list.lineend.branch.left },\n                                    };\n                                case 'lineend':\n                                    return {\n                                        ...state.stn_list.linestart,\n                                        parents: state.stn_list.linestart.children.slice().reverse(),\n                                        children: [],\n                                        branch: { left: state.stn_list.linestart.branch.right, right: [] as [] },\n                                    };\n                                default:\n                                    return {\n                                        ...state.stn_list[id],\n                                        parents: state.stn_list[id].children\n                                            .map(id =>\n                                                id === 'linestart' ? 'lineend' : id === 'lineend' ? 'linestart' : id\n                                            )\n                                            .reverse(),\n                                        children: state.stn_list[id].parents\n                                            .map(id =>\n                                                id === 'linestart' ? 'lineend' : id === 'lineend' ? 'linestart' : id\n                                            )\n                                            .reverse(),\n                                        branch: {\n                                            left: state.stn_list[id].branch.right,\n                                            right: state.stn_list[id].branch.left,\n                                        },\n                                    };\n                            }\n                        })(stnId),\n                    }),\n                    {} as StationDict\n                ),\n            };\n        case 'UPDATE_STATION_NAME':\n            // window.myLine.updateStnName(action.stnId, action.name);\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        name: action.name,\n                    },\n                },\n            };\n        case 'UPDATE_STATION_SECONDARY_NAME':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        secondaryName: action.name,\n                    },\n                },\n            };\n        case 'UPDATE_STATION_NUM':\n            // (window.myLine as RMGLineGZ).updateStnNum(action.stnId, action.num);\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        num: action.num,\n                    },\n                },\n            };\n        case 'ADD_STATION_INTERCHANGE_INFO':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        transfer: {\n                            ...state.stn_list[action.stnId].transfer,\n                            info: (({ setIdx, info }) => {\n                                let nextInfo = state.stn_list[action.stnId].transfer.info.slice();\n                                nextInfo[setIdx] = (nextInfo[setIdx] || ([] as InterchangeInfo[])).concat([info]);\n                                return nextInfo;\n                            })(action),\n                        },\n                    },\n                },\n            };\n        case 'REMOVE_STATION_INTERCHANGE_INFO':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        transfer: {\n                            ...state.stn_list[action.stnId].transfer,\n                            info: state.stn_list[action.stnId].transfer.info.map((infos, i) =>\n                                i === action.setIdx\n                                    ? infos.slice(0, action.intIdx).concat(infos.slice(action.intIdx + 1))\n                                    : infos\n                            ),\n                        },\n                    },\n                },\n            };\n        case 'UPDATE_STATION_INTERCHANGE_INFO':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        transfer: {\n                            ...state.stn_list[action.stnId].transfer,\n                            info: state.stn_list[action.stnId].transfer?.info.map((infos, i) =>\n                                i === action.setIdx\n                                    ? infos.map((int, j) =>\n                                          j === action.intIdx\n                                              ? (([0, 1, 2, 3, 4, 5].map(k =>\n                                                    action.info[k] === undefined ? int[k] : action.info[k]\n                                                ) as unknown) as InterchangeInfo)\n                                              : int\n                                      )\n                                    : infos\n                            ),\n                        },\n                    },\n                },\n            };\n        case 'UPDATE_STATION_OSI_NAME':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        transfer: {\n                            ...state.stn_list[action.stnId].transfer,\n                            osi_names: [action.name],\n                        },\n                    },\n                },\n            };\n        case 'UPDATE_STATION_TICK_DIREC':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        transfer: {\n                            ...state.stn_list[action.stnId].transfer,\n                            tick_direc: action.direction,\n                        },\n                    },\n                },\n            };\n        case 'UPDATE_STATION_PAID_AREA':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        transfer: {\n                            ...state.stn_list[action.stnId].transfer,\n                            paid_area: action.isPaid,\n                        },\n                    },\n                },\n            };\n        case 'UPDATE_STATION_BRANCH_TYPE':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        branch: {\n                            ...state.stn_list[action.stnId].branch,\n                            [action.direction]: [\n                                action.branchType,\n                                state.stn_list[action.stnId].branch[action.direction][1],\n                            ],\n                        },\n                    },\n                },\n            };\n        case 'UPDATE_STATION_BRANCH_FIRST':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.branches[0].stnId]: {\n                        ...state.stn_list[action.branches[0].stnId],\n                        branch: {\n                            ...state.stn_list[action.branches[0].stnId].branch,\n                            [action.branches[0].direction]: [\n                                state.stn_list[action.branches[0].stnId].branch[action.branches[0].direction][0],\n                                action.branches[0].first,\n                            ],\n                        },\n                    },\n                    [action.branches[1].stnId]: {\n                        ...state.stn_list[action.branches[1].stnId],\n                        branch: {\n                            ...state.stn_list[action.branches[1].stnId].branch,\n                            [action.branches[1].direction]: [\n                                state.stn_list[action.branches[1].stnId].branch[action.branches[1].direction][0],\n                                action.branches[1].first,\n                            ],\n                        },\n                    },\n                },\n            };\n        case 'UPDATE_STATION_BRANCH_POS':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.left]: {\n                        ...state.stn_list[action.left],\n                        parents: state.stn_list[action.left].parents.slice().reverse(),\n                    },\n                    [action.right]: {\n                        ...state.stn_list[action.right],\n                        children: state.stn_list[action.right].children.slice().reverse(),\n                    },\n                },\n            };\n        case 'UPDATE_STATION_FACILITY':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        facility: action.facility,\n                    },\n                },\n            };\n        case 'UPDATE_STATION_SERVICES':\n            return {\n                ...state,\n                stn_list: {\n                    ...state.stn_list,\n                    [action.stnId]: {\n                        ...state.stn_list[action.stnId],\n                        services: Array.from(\n                            action.isChecked\n                                ? new Set(state.stn_list[action.stnId].services).add(action.serviceId)\n                                : state.stn_list[action.stnId].services.filter(s => s !== action.serviceId)\n                        ),\n                    },\n                },\n            };\n        case 'UPDATE_STATION_LIST':\n            return {\n                ...state,\n                stn_list: action.stnList,\n            };\n        default:\n            return state;\n    }\n};\n","module.exports = ReactI18next;","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","module.exports = ReactRouterDOM;","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import React from 'react';\n\n/**\n * Vertical position (in shares) of station icon if using MTR style (for consistency of method `RMGLine.newStnPossibleLoc()`).\n */\nexport const getYShareMTR = (stnId: string, stnList: StationDict): -1 | 0 | 1 => {\n    if (\n        ['linestart', 'lineend'].includes(stnId) ||\n        stnList[stnId].parents.length > 1 ||\n        stnList[stnId].children.length > 1\n    ) {\n        return 0;\n    }\n    var stnPred = stnList[stnId].parents[0];\n    if (stnPred) {\n        // parent exist\n        if (stnList[stnPred].children.length === 1) {\n            // no sibling, then y same as parent\n            return getYShareMTR(stnPred, stnList);\n        } else {\n            // sibling exists, then y depends on its idx of being children\n            return stnList[stnPred].children.indexOf(stnId) === 0 ? 1 : -1;\n        }\n    } else {\n        // no parent, must be linestart\n        return 0;\n    }\n};\n\n/**\n * Getter of all branches () of the line (both ends included). The first branch must be the main line.\n * @example MTREastRailLine.branches\n * /*\n * [0]: [LineStart, Lo Wu, ..., Hung Hom, LineEnd]\n * [1]: [LineStart, Lok Ma Chau, Sheung Shui]\n * [2]: [University, Racecourse, Sha Tin]\n * /\n */\nexport const getBranches = (stnList: StationDict) => {\n    console.log('computing branches');\n\n    var stack = ['linestart'];\n    var branches = [['linestart']];\n    var branchCount = 0;\n\n    while (stack.length) {\n        var curId = stack.shift() as string;\n        var prevId = branches[branchCount].slice().reverse()[0] || null;\n        if (prevId && curId !== 'linestart') {\n            branches[branchCount].push(curId);\n        } else {\n            branches[branchCount] = [curId];\n        }\n        while (curId !== 'lineend') {\n            prevId = curId;\n            var children = stnList[prevId].children;\n            switch (children.length) {\n                case 1:\n                    curId = children[0];\n                    break;\n                case 2:\n                    let branchNextId = stnList[prevId].branch.right[1] as string;\n                    // if (branchCount === 0) {\n                    if (stnList[prevId].branch.right[0] === 'through') {\n                        branches.push([curId]);\n                        stack.push(branchNextId);\n                    } else {\n                        if (branchCount === 0) {\n                            branches.push([prevId]);\n                            stack.push(branchNextId);\n                            // all branching out nodes are added to stack in the first loop\n                        }\n                    }\n                    curId = children.filter(stnId => stnId !== branchNextId)[0];\n                    break;\n            }\n            branches[branchCount].push(curId);\n\n            if (prevId === stnList[curId].branch.left[1]) {\n                break;\n            }\n        }\n        // branches[branchCount] = curBranch;\n        branchCount++;\n    }\n\n    return branches;\n};\n\n/**\n * Getter of all routes () of the line (both ends included). The first branch must be the main line.\n * @example MTREastRailLine.branches\n * /*\n * [0]: [LineStart, Lo Wu, Sheung Shui, ..., Hung Hom, LineEnd]\n * [1]: [LineStart, Lok Ma Chau, Sheung Shui, ..., Hung Hom, LineEnd]\n * [2]: [LineStart, Lo Wu, Sheung Shui, ..., University, Racecourse, Sha Tin, ..., Hung Hom, LineEnd]\n * [3]: [LineStart, Lok Ma Chau, Sheung Shui, ..., University, Racecourse, Sha Tin, ..., Hung Hom, LineEnd]\n * /\n */\nexport const getRoutes = (stnList: StationDict) => {\n    console.log('computing routes');\n\n    var stack = ['linestart'];\n    var branches = [['linestart']];\n    var branchCount = 0;\n\n    while (stack.length) {\n        var curId = stack.shift() as string;\n        var prevId = branches[branchCount].slice().reverse()[0] || null;\n        if (prevId && curId !== 'linestart') {\n            branches[branchCount].push(curId);\n        } else {\n            branches[branchCount] = [curId];\n        }\n        while (curId !== 'lineend') {\n            prevId = curId;\n            var children = stnList[prevId].children;\n            switch (children.length) {\n                case 1:\n                    curId = children[0];\n                    break;\n                case 2:\n                    let branchNextId = stnList[prevId].branch.right[1] as string;\n                    // if (branchCount === 0) {\n                    if (stnList[prevId].branch.right[0] === 'through') {\n                        branches.push(branches[branchCount].slice());\n                        stack.push(branchNextId);\n                    } else {\n                        if (branchCount === 0) {\n                            branches.push([prevId]);\n                            stack.push(branchNextId);\n                        }\n                        // branches.push([prevId]);\n                    }\n                    // stack.push(branchNextId);\n                    // }\n                    curId = children.filter(stnId => stnId !== branchNextId)[0];\n                    break;\n            }\n            branches[branchCount].push(curId);\n\n            if (prevId === stnList[curId].branch.left[1] && stnList[curId].branch.left[0] === 'nonthrough') {\n                break;\n            }\n        }\n        // branches[branchCount] = curBranch;\n        branchCount++;\n    }\n\n    return branches;\n};\n\n/**\n * Memo of topological ordering for all stations by stacking all branches into an one-dimensional array.\n * @param branches Branches from `useBranches` memo\n */\nexport const useTpo = (branches: string[][]) => {\n    const [tpo, setTpo] = React.useState([] as string[]);\n\n    React.useEffect(\n        () => {\n            console.log('computing tpo');\n            if (branches.length === 1) {\n                setTpo(branches[0].slice(1, -1));\n                return;\n            } else {\n                let res = branches\n                    .reduce(\n                        (acc, cur) => {\n                            let idx = acc.indexOf(cur.slice(-1)[0]);\n                            return acc.slice(0, idx).concat(cur.slice(1), acc.slice(idx + 1));\n                        },\n                        ['lineend']\n                    )\n                    .slice(0, -1);\n                setTpo(res);\n                return;\n            }\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [branches.toString()]\n    );\n\n    return tpo;\n};\n","export const ProvidedCanvases: ProvidedCanvas[] = ['destination', 'runin', 'railmap'];\n\nexport const PanelTypesGZMTR: PanelTypeGZMTR[] = [\n    'gz1',\n    'gz2otis',\n    'gz28',\n    'gz3',\n    'gz4',\n    'gz1421',\n    'gz5',\n    'gz6',\n    'gzgf',\n];\n","export function updateParam() {\n    var param = JSON.parse(localStorage.rmgParam) as { [x: string]: any };\n\n    // Version 0.10\n    if (!('line_name' in param)) {\n        param.line_name = ['', 'Name of Line'];\n    }\n    if (!('dest_legacy' in param)) {\n        param.dest_legacy = false;\n    }\n\n    // Version 0.11\n    delete param.fontZH;\n    delete param.fontEN;\n    delete param.weightZH;\n    delete param.weightEN;\n\n    // Version 0.12\n    for (let [stnId, stnInfo] of Object.entries(param.stn_list as { [x: string]: any })) {\n        if (!('branch' in stnInfo)) {\n            param.stn_list[stnId].branch = { left: [], right: [] };\n            if (stnInfo.children.length === 2) {\n                param.stn_list[stnId].branch.right = ['through', stnInfo.children[1]];\n            } else {\n                param.stn_list[stnId].branch.right = [];\n            }\n            if (stnInfo.parents.length === 2) {\n                param.stn_list[stnId].branch.left = ['through', stnInfo.parents[1]];\n            } else {\n                param.stn_list[stnId].branch.left = [];\n            }\n        }\n    }\n\n    // Version 1.2\n    if (!('psd_num' in param)) {\n        param.psd_num = '1';\n    } else {\n        param.psd_num = param.psd_num.toString();\n    }\n\n    if (!('line_num' in param)) {\n        param.line_num = '1';\n    }\n    delete param.style;\n    if (param.theme.length === 3) {\n        param.theme.push('#fff');\n    }\n\n    // Version 1.3\n    for (let [stnId, stnInfo] of Object.entries(param.stn_list as { [x: string]: any })) {\n        if (!('num' in stnInfo)) {\n            param.stn_list[stnId].num = '00';\n        }\n        if ('interchange' in stnInfo) {\n            stnInfo.interchange.map((arr: any) => {\n                return arr.forEach((intInfo: any) => {\n                    if (intInfo.length === 5) {\n                        intInfo.splice(3, 0, '#fff');\n                    }\n                });\n            });\n        }\n    }\n\n    // Version 1.5\n    for (let [stnId, stnInfo] of Object.entries(param.stn_list as { [x: string]: any })) {\n        if (stnInfo.change_type === 'osi22_end_p') {\n            param.stn_list[stnId].change_type = 'osi22_pr';\n        }\n        if (stnInfo.change_type === 'osi22_end_u') {\n            param.stn_list[stnId].change_type = 'osi22_ur';\n        }\n    }\n\n    // Version 2.1\n    for (let [stnId, stnInfo] of Object.entries(param.stn_list as { [x: string]: any })) {\n        if (!('interchange' in stnInfo)) {\n            param.stn_list[stnId].interchange = [[]];\n        }\n    }\n\n    // Version 1.4\n    // Version 2.2\n    // Version 2.3\n    if (!('info_panel_type' in param)) {\n        param.info_panel_type = 'gz28';\n    } else {\n        param.info_panel_type = (type => {\n            switch (type) {\n                case 'gz_1':\n                case 'panasonic':\n                    return 'gz28';\n                case 'gz_2':\n                    return 'gz6';\n                case 'gz_3':\n                    return 'gz3';\n                default:\n                    return type;\n            }\n        })(param.info_panel_type);\n    }\n\n    if (!('direction_gz_x' in param)) {\n        param.direction_gz_x = 50;\n    }\n    if (!('direction_gz_y' in param)) {\n        param.direction_gz_y = 70;\n    }\n\n    // Version 2.6\n    for (let [stnId, stnInfo] of Object.entries(param.stn_list as { [x: string]: any })) {\n        if (!('transfer' in stnInfo)) {\n            param.stn_list[stnId].transfer = {\n                // type: stnInfo.change_type?.split('_')[0] as 'none' | 'int2' | 'int3' | 'osi11' | 'osi12' | 'osi22',\n                tick_direc:\n                    stnInfo.change_type === 'none' || stnInfo.change_type === 'int2'\n                        ? 'r'\n                        : (stnInfo.change_type\n                              ?.split('_')[1]\n                              .split('')\n                              .slice()\n                              .reverse()[0] as 'l' | 'r'),\n                paid_area:\n                    stnInfo.change_type?.indexOf('osi') !== -1 ? stnInfo.change_type?.split('_')[1][0] === 'p' : true,\n                osi_names: stnInfo.change_type?.indexOf('osi') !== -1 ? [stnInfo.interchange[1][0]] : [],\n                info:\n                    stnInfo.interchange.length === 2\n                        ? [stnInfo.interchange[0], stnInfo.interchange[1].slice(1)]\n                        : stnInfo.interchange,\n            };\n        }\n        delete param.stn_list[stnId].change_type;\n        delete param.stn_list[stnId].interchange;\n    }\n\n    // Version 2.8\n    // Version 3.0\n    for (let [stnId, stnInfo] of Object.entries(param.stn_list as { [x: string]: any })) {\n        if (!('services' in stnInfo)) {\n            param.stn_list[stnId].services = ['local'];\n        }\n        if (!('facility' in stnInfo)) {\n            if ('usage' in stnInfo) {\n                param.stn_list[stnId].facility = stnInfo.usage;\n            } else {\n                param.stn_list[stnId].facility = '';\n            }\n        }\n        delete param.stn_list[stnId].usage;\n    }\n\n    // Version 3.4\n    if (!('customiseMTRDest' in param)) {\n        param.customiseMTRDest = { isLegacy: param.dest_legacy || false, terminal: false };\n    }\n    delete param.dest_legacy;\n\n    // Version 3.4\n    if (!('svgWidth' in param)) {\n        param.svgWidth = {\n            destination: param.svg_dest_width,\n            runin: param.svg_dest_width,\n            railmap: param.svg_width,\n        };\n    }\n    delete param.svg_width;\n    delete param.svg_dest_width;\n\n    if (!('notesGZMTR' in param)) {\n        param.notesGZMTR = [];\n    }\n\n    param.notesGZMTR = param.notesGZMTR?.map((note: any[]) =>\n        note.length === 4 ? note.concat([false]) : note\n    ) as Note[];\n\n    // Version 3.5.3\n    delete param.char_form;\n    delete param.show_outer;\n    delete param.strip_pc;\n    delete param.txt_bg_gap;\n\n    // Version 3.5.4\n    if (!('namePosMTR' in param)) {\n        param.namePosMTR = {\n            isStagger: true,\n            isFlip: param.txt_flip,\n        };\n    }\n    delete param.txt_flip;\n\n    // Version 3.5.6\n    // Version 3.6.2\n    Object.keys(param.stn_list).forEach(stnId => {\n        if (!('secondaryName' in param.stn_list[stnId])) {\n            param.stn_list[stnId].secondaryName = false;\n        } else {\n            if (param.stn_list[stnId].secondaryName !== false && param.stn_list[stnId].secondaryName.join() === ',') {\n                param.stn_list[stnId].secondaryName = false;\n            }\n        }\n\n        if ('type' in param.stn_list[stnId].transfer) {\n            delete param.stn_list[stnId].transfer.type;\n        }\n    });\n\n    localStorage.setItem('rmgParam', JSON.stringify(param));\n}\n\nexport const getTransText2 = (obj: ITrans, langs: string[]) => {\n    for (let l of langs) {\n        if (obj[l]) return obj[l];\n    }\n    return obj.en;\n};\n\n/**\n * Format display style of station name as `[num: ]nameZH,nameEN`.\n */\nexport const formatStnName = (stnInfo: StationInfo, style: ProvidedStyles) =>\n    (style === 'gzmtr' ? (stnInfo?.num || '-') + ': ' : '') + stnInfo?.name.join().replace('\\\\', ' ');\n","module.exports = i18next;","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","module.exports = ReactDOM;","module.exports = i18nextXHRBackend;","module.exports = i18nextBrowserLanguageDetector;","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport Backend from 'i18next-xhr-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n\ni18n.use(Backend)\n    .use(LanguageDetector)\n    .use(initReactI18next)\n    .init({\n        fallbackLng: {\n            'zh-CN': ['zh-Hans', 'en'],\n            'zh-Hant': ['zh-HK', 'en'],\n            'zh-HK': ['zh-Hant', 'en'],\n            'zh-TW': ['zh-HK', 'zh-Hant'],\n            default: ['en'],\n        },\n        // debug: true,\n        backend: {\n            // for all available options read the backend's repository readme file\n            loadPath: process.env.PUBLIC_URL + '/locale/{{lng}}.json',\n        },\n\n        interpolation: {\n            escapeValue: false, // not needed for react as it escapes by default\n        },\n    })\n    .then(t => {\n        document.title = t('title');\n        document.documentElement.setAttribute('lang', i18n.language);\n    });\n","import * as React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    AppBar,\n    Toolbar,\n    Tooltip,\n    IconButton,\n    Typography,\n    Icon,\n    makeStyles,\n    createStyles,\n    Menu,\n    MenuItem,\n    Divider,\n    useMediaQuery,\n} from '@material-ui/core';\nimport { CanvasContext } from './context';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        rootLight: {\n            backgroundColor: theme.palette.primary.main,\n        },\n        rootDark: {\n            backgroundColor: theme.palette.background.paper,\n        },\n        title: {\n            flexGrow: 1,\n            color: '#fff',\n        },\n        menuButton: {\n            color: '#fff',\n        },\n    })\n);\n\nconst AppAppBar = () => {\n    const { t, i18n } = useTranslation();\n    const classes = useStyles();\n    const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n\n    return React.useMemo(\n        () => (\n            <AppBar position=\"sticky\" className={prefersDarkMode ? classes.rootDark : classes.rootLight}>\n                <Toolbar variant=\"dense\">\n                    <Typography variant=\"h6\" className={classes.title} color=\"textPrimary\">\n                        {t('title')}\n                    </Typography>\n\n                    <CanvasToggle />\n                    <ZoomToggles />\n                </Toolbar>\n            </AppBar>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [prefersDarkMode, i18n.language]\n    );\n};\n\nexport default AppAppBar;\n\nconst CanvasToggle = () => {\n    const { t } = useTranslation();\n\n    const classes = useStyles();\n\n    const { canvasAvailable, setCanvasToShown } = React.useContext(CanvasContext);\n    const [canvasButtonEl, setCanvasButtonEl] = React.useState<null | HTMLElement>(null);\n    const handleClick = (action: ProvidedCanvas | 'all') => () => {\n        setCanvasToShown(action);\n        setCanvasButtonEl(null);\n    };\n\n    return React.useMemo(\n        () => (\n            <>\n                <Tooltip title={t('toggle.tooltip')}>\n                    <IconButton onClick={e => setCanvasButtonEl(e.currentTarget)} className={classes.menuButton}>\n                        <Icon>photo_library</Icon>\n                    </IconButton>\n                </Tooltip>\n                <Menu anchorEl={canvasButtonEl} open={Boolean(canvasButtonEl)} onClose={() => setCanvasButtonEl(null)}>\n                    {canvasAvailable.map((c: ProvidedCanvas) => (\n                        <MenuItem key={c} onClick={handleClick(c)}>\n                            {t('toggle.' + c)}\n                        </MenuItem>\n                    ))}\n                    <Divider style={{ margin: '6px 0' }} />\n                    <MenuItem onClick={handleClick('all')}>{t('toggle.all')}</MenuItem>\n                </Menu>\n            </>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [canvasAvailable.toString(), canvasButtonEl, classes.menuButton]\n    );\n};\n\nconst ZoomToggles = () => {\n    const { t } = useTranslation();\n    const classes = useStyles();\n    const { setCanvasScale } = React.useContext(CanvasContext);\n    return React.useMemo(\n        () => (\n            <>\n                <Tooltip title={t('zoom.out')}>\n                    <IconButton\n                        onClick={() =>\n                            setCanvasScale((prevScale: number) => (prevScale <= 0.1 ? prevScale : prevScale - 0.1))\n                        }\n                        className={classes.menuButton}\n                    >\n                        <Icon>zoom_out</Icon>\n                    </IconButton>\n                </Tooltip>\n                <Tooltip title={t('zoom.in')}>\n                    <IconButton\n                        onClick={() => setCanvasScale((prevScale: number) => prevScale + 0.1)}\n                        className={classes.menuButton}\n                    >\n                        <Icon>zoom_in</Icon>\n                    </IconButton>\n                </Tooltip>\n            </>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [classes.menuButton]\n    );\n};\n","import React from 'react';\n\nexport default class ErrorBoundary extends React.Component<{ children: React.ReactNode }, { hasError: boolean }> {\n    constructor(props: { children: React.ReactNode }) {\n        super(props);\n        this.state = { hasError: false };\n    }\n\n    static getDerivedStateFromError(error: any) {\n        // Update state so the next render will show the fallback UI.\n        return { hasError: true };\n    }\n\n    componentDidCatch(error: any, errorInfo: any) {\n        // You can also log the error to an error reporting service\n        // logErrorToMyService(error, errorInfo);\n    }\n\n    render() {\n        if (this.state.hasError) {\n            // You can render any custom fallback UI\n            return <h1>Something went wrong.</h1>;\n        }\n\n        return this.props.children;\n    }\n}\n","import React, { useContext, useEffect, memo, lazy } from 'react';\nimport { makeStyles, createStyles, CircularProgress } from '@material-ui/core';\nimport { CanvasContext, ParamContext } from '../context';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport ErrorBoundary from '../error-boundary';\n\nimport { ProvidedCanvases } from '../constants';\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        root: {\n            display: 'flex',\n            flexDirection: 'row',\n            overflowX: 'scroll',\n            '&::before, &::after': {\n                content: '\"\"',\n                margin: 'auto',\n            },\n            '& > svg': {\n                flex: '0 0 auto',\n                border: '1px solid black',\n            },\n        },\n    })\n);\n\nconst SVGs = () => {\n    const classes = useStyles();\n\n    const { param } = React.useContext(ParamContext);\n    const { canvasScale } = React.useContext(CanvasContext);\n\n    const sharedProps = React.useCallback(\n        (canvas: ProvidedCanvas): React.SVGProps<SVGSVGElement> => ({\n            id: canvas,\n            xmlns: 'http://www.w3.org/2000/svg',\n            xmlnsXlink: 'http://www.w3.org/1999/xlink',\n            height: param.svg_height * canvasScale,\n            viewBox: `0 0 ${param.svgWidth[canvas]} ${param.svg_height}`,\n            colorInterpolationFilters: 'sRGB',\n            style: {\n                ['--rmg-svg-width' as any]: param.svgWidth[canvas] + 'px',\n                ['--rmg-svg-height' as any]: param.svg_height + 'px',\n                ['--rmg-theme-colour' as any]: param.theme[2],\n                ['--rmg-theme-fg' as any]: param.theme[3],\n            },\n        }),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [param.svg_height, JSON.stringify(param.svgWidth), param.theme[2], param.theme[3], canvasScale]\n    );\n\n    return (\n        <div className={classes.root}>\n            <Switch>\n                {(Object.keys(canvasList) as ProvidedStyles[]).map(s => (\n                    <Route path={`/${s}`} key={s}>\n                        <StyleSpecificSVGs rmgStyle={s} canvasAvailable={canvasList[s]} svgProps={sharedProps} />\n                    </Route>\n                ))}\n                <Redirect to={'/' + (new URLSearchParams(window.location.search).get('style') || 'mtr')} />\n            </Switch>\n        </div>\n    );\n};\n\nexport default SVGs;\n\nconst StyleSpecificSVGs = memo(\n    (props: {\n        rmgStyle: ProvidedStyles;\n        canvasAvailable: { [canvas in ProvidedCanvas]?: JSX.Element };\n        svgProps: (canvas: ProvidedCanvas) => React.SVGProps<SVGSVGElement>;\n    }) => {\n        const { canvasToShown, setCanvasToShown, setCanvasAvailable } = useContext(CanvasContext);\n        useEffect(\n            () => {\n                ['share', ...ProvidedCanvases].forEach(canvas => {\n                    if (canvas in props.canvasAvailable || canvas === 'share') {\n                        (document.getElementById('css_' + canvas) as HTMLLinkElement).href =\n                            process.env.PUBLIC_URL + `/styles/${canvas}_${props.rmgStyle}.css`;\n                    } else {\n                        (document.getElementById('css_' + canvas) as HTMLLinkElement).href = '';\n                    }\n                });\n                setCanvasAvailable(Object.keys(props.canvasAvailable) as ProvidedCanvas[]);\n                setCanvasToShown(prevCanvas =>\n                    ['all', ...Object.keys(props.canvasAvailable)].includes(prevCanvas) ? prevCanvas : 'all'\n                );\n            },\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            []\n        );\n\n        return (\n            <>\n                {(Object.keys(props.canvasAvailable) as (keyof typeof props.canvasAvailable)[]).map(\n                    canvas =>\n                        ['all', canvas].includes(canvasToShown) && (\n                            <React.Suspense key={canvas} fallback={<CircularProgress />}>\n                                <ErrorBoundary>\n                                    <svg {...props.svgProps(canvas)}>\n                                        <rect\n                                            id=\"canvas-bg\"\n                                            fill=\"white\"\n                                            style={{ height: 'var(--rmg-svg-height)', width: 'var(--rmg-svg-width)' }}\n                                        />\n                                        {props.canvasAvailable[canvas]}\n                                        <rect\n                                            id=\"canvas-border\"\n                                            fill=\"none\"\n                                            strokeWidth={3}\n                                            stroke=\"none\"\n                                            style={{ height: 'var(--rmg-svg-height)', width: 'var(--rmg-svg-width)' }}\n                                        />\n                                    </svg>\n                                </ErrorBoundary>\n                            </React.Suspense>\n                        )\n                )}\n            </>\n        );\n    }\n);\n\n// Canvas available\n\nconst RunInGZMTR = lazy(() => import(/* webpackChunkName: \"runinGZMTR\" */ './runin/runin-gzmtr'));\nconst RailMapGZMTR = lazy(() => import(/* webpackChunkName: \"railmapGZMTR\" */ './railmap/railmap-gzmtr'));\n\nconst DestinationMTR = lazy(() => import(/* webpackChunkName: \"destinationMTR\" */ './destination/destination-mtr'));\nconst RailMapMTR = lazy(() => import(/* webpackChunkName: \"railmapMTR\" */ './railmap/railmap-mtr'));\n\nconst DestinationSHMetro = lazy(() =>\n    import(/* webpackChunkName: \"destinationSHMetro\" */ './destination/destination-shmetro')\n);\nconst RunInSHMetro = lazy(() => import(/* webpackChunkName: \"runinSHMetro\" */ './runin/runin-shmetro'));\nconst RailMapSHMetro = lazy(() => import(/* webpackChunkName: \"railmapSHMetro\" */ './railmap/railmap-shmetro'));\n\n/**\n * Each value of this object is an object of ORDERED key-value pairs\n */\nconst canvasList: { [s in ProvidedStyles]: { [c in ProvidedCanvas]?: JSX.Element } } = {\n    gzmtr: {\n        runin: <RunInGZMTR />,\n        railmap: <RailMapGZMTR />,\n    },\n    mtr: {\n        destination: <DestinationMTR />,\n        railmap: <RailMapMTR />,\n    },\n    shmetro: {\n        destination: <DestinationSHMetro />,\n        runin: <RunInSHMetro />,\n        railmap: <RailMapSHMetro />,\n    },\n};\n","import SVGs from './svg';\n\nexport default SVGs;","import * as React from 'react';\n\nimport {\n    Typography,\n    CircularProgress,\n    Tabs,\n    Tab,\n    Icon,\n    makeStyles,\n    createStyles,\n    useTheme,\n    useMediaQuery,\n} from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nconst PanelSave = React.lazy(() => import(/* webpackChunkName: \"panelSave\" */ './save'));\nconst PanelLayout = React.lazy(() => import(/* webpackChunkName: \"panelLayout\" */ './layout'));\nconst PanelDesign = React.lazy(() => import(/* webpackChunkName: \"panelDesign\" */ './design'));\nconst PanelStations = React.lazy(() => import(/* webpackChunkName: \"panelStations\" */ './stations'));\nconst PanelInfo = React.lazy(() => import(/* webpackChunkName: \"panelInfo\" */ './panel-info'));\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        root: {\n            display: 'flex',\n            flexDirection: 'row',\n            height: '100%',\n            [theme.breakpoints.down('xs')]: {\n                flexDirection: 'column',\n            },\n        },\n        typography: {\n            background: theme.palette.background.default,\n        },\n        tab: {\n            padding: '6px 24px',\n            height: 48,\n            '& .MuiTab-wrapper': {\n                flexDirection: 'row',\n            },\n            [theme.breakpoints.up('sm')]: {\n                '& .MuiTab-wrapper': {\n                    justifyContent: 'flex-start',\n                },\n            },\n            [theme.breakpoints.down('xs')]: {\n                minWidth: 'calc(100% / 5)',\n            },\n            '&.MuiTab-labelIcon': {\n                minHeight: 'unset',\n                '& .MuiTab-wrapper': {\n                    '& > *:first-child': {\n                        marginBottom: 0,\n                    },\n                    '& > *:not(first-child)': {\n                        paddingLeft: 8,\n                    },\n                },\n            },\n        },\n        tabs: {\n            overflow: 'auto',\n            '&::-webkit-scrollbar': {\n                width: 0,\n            },\n            scrollbarWidth: 'none',\n            WebkitOverflowScrolling: 'touch',\n        },\n        tabpanel: {\n            overflow: 'auto',\n            flex: 1,\n            padding: theme.spacing(3),\n            paddingBottom: 0,\n            height: `calc(100% - ${theme.spacing(3)}px)`,\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'flex-start',\n        },\n    })\n);\n\nexport default function PanelTab() {\n    const { t, i18n } = useTranslation();\n\n    const classes = useStyles();\n    const theme = useTheme();\n    const isMobile = useMediaQuery(theme.breakpoints.down('xs'));\n\n    const [value, setValue] = React.useState(0);\n\n    const panel = (index: number) => {\n        switch (index) {\n            case 0:\n                return <PanelSave />;\n            case 1:\n                return <PanelLayout />;\n            case 2:\n                return <PanelDesign />;\n            case 3:\n                return <PanelStations />;\n            case 4:\n                return <PanelInfo />;\n            default:\n                return <PanelSave />;\n        }\n    };\n\n    const tabNav = React.useMemo(\n        () => (\n            <Typography className={`${classes.typography} ${classes.tabs}`} component=\"div\">\n                <Tabs\n                    value={value}\n                    orientation={isMobile ? 'horizontal' : 'vertical'}\n                    indicatorColor=\"primary\"\n                    textColor=\"primary\"\n                    onChange={(_, val) => setValue(val)}\n                    variant=\"scrollable\"\n                    scrollButtons=\"off\"\n                >\n                    {[\n                        ['file', 'insert_drive_file'],\n                        ['layout', 'panorama'],\n                        ['design', 'brush'],\n                        ['stations', 'directions_transit'],\n                        ['info', 'info'],\n                    ].map((val, i) => (\n                        <Tab\n                            label={<span>{t('tab.' + val[0])}</span>}\n                            icon={<Icon>{val[1]}</Icon>}\n                            key={i}\n                            className={classes.tab}\n                        />\n                    ))}\n                </Tabs>\n            </Typography>\n        ),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [value, i18n.language, classes.tab, isMobile]\n    );\n\n    return (\n        <div className={classes.root}>\n            {tabNav}\n            <Typography className={`${classes.typography} ${classes.tabpanel}`} component=\"div\" role=\"tabpanel\">\n                <React.Suspense fallback={<CircularProgress />}>{panel(value)}</React.Suspense>\n            </Typography>\n        </div>\n    );\n}\n","import * as React from 'react';\nimport { CircularProgress } from '@material-ui/core';\n\nimport PanelTabs from './panels';\n\nexport default () => {\n    return (\n        <React.Suspense fallback={<CircularProgress />}>\n            <PanelTabs />\n        </React.Suspense>\n    );\n};\n","import React, { useState, useMemo, useEffect, useReducer } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport AppAppBar from './app-appbar';\nimport SVGs from './svgs';\nimport Panels from './panels';\nimport { getBranches, useTpo, getRoutes } from './methods';\nimport { CanvasContext, ParamContext, paramReducer } from './context';\nimport { createMuiTheme, ThemeProvider, useMediaQuery, LinearProgress } from '@material-ui/core';\n\nconst darkTheme = createMuiTheme({\n    palette: {\n        type: 'dark',\n        primary: {\n            main: '#bb86fc',\n        },\n        secondary: {\n            main: '#018786',\n        },\n        error: {\n            main: '#cf6679',\n        },\n    },\n    // palette: {\n    //     type: 'dark',\n    //     primary: {\n    //         main: '#8ab4f8',\n    //     },\n    // },\n    overrides: {\n        MuiDialog: {\n            paper: {\n                minWidth: 280,\n            },\n        },\n    },\n});\n\nconst lightTheme = createMuiTheme({\n    palette: {\n        primary: {\n            light: '#bb86fc',\n            main: '#6200ee',\n        },\n        secondary: {\n            main: '#018786',\n        },\n        error: {\n            main: '#b00020',\n        },\n    },\n    // palette: {\n    //     primary: {\n    //         main: '#1a73e8',\n    //     },\n    //     text: {\n    //         primary: '#202124',\n    //         secondary: '#5f6368',\n    //     },\n    // },\n    overrides: {\n        MuiDialog: {\n            paper: {\n                minWidth: 280,\n            },\n        },\n    },\n});\n\nexport default function App() {\n    const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n    const theme = prefersDarkMode ? darkTheme : lightTheme;\n\n    const [canvasAvailable, setCanvasAvailable] = useState<ProvidedCanvas[]>([]);\n    const [canvasToShown, setCanvasToShown] = useState<'all' | ProvidedCanvas>(localStorage.rmgCanvas);\n    useEffect(() => localStorage.setItem('rmgCanvas', canvasToShown), [canvasToShown]);\n    const [canvasScale, setCanvasScale] = useState(\n        Number(localStorage.rmgScale) >= 0.1 ? Number(localStorage.rmgScale) : 1\n    );\n    useEffect(() => localStorage.setItem('rmgScale', canvasScale.toFixed(1)), [canvasScale]);\n\n    return (\n        <BrowserRouter basename={process.env.PUBLIC_URL}>\n            <ThemeProvider theme={theme}>\n                <CanvasContext.Provider\n                    value={{\n                        rmgStyle: window.location.pathname.split('/')[2] as ProvidedStyles,\n                        canvasAvailable,\n                        setCanvasAvailable,\n                        canvasToShown,\n                        setCanvasToShown,\n                        canvasScale,\n                        setCanvasScale,\n                    }}\n                >\n                    <React.Suspense fallback={<LinearProgress />}>\n                        <AppAppBar />\n                    </React.Suspense>\n                    <AppBody />\n                </CanvasContext.Provider>\n            </ThemeProvider>\n        </BrowserRouter>\n    );\n}\n\nconst AppBody = () => {\n    const [param, dispatch] = useReducer(paramReducer, JSON.parse(localStorage.rmgParam) as RMGParam);\n    const paramString = JSON.stringify(param);\n    useEffect(() => localStorage.setItem('rmgParam', paramString), [paramString]);\n\n    const deps = Object.keys(param.stn_list).reduce(\n        (acc, cur) =>\n            acc +\n            cur +\n            ((...k: (keyof StationInfo)[]) => (o: StationInfo) => k.reduce((a, c) => a + JSON.stringify(o[c]), ''))(\n                'parents',\n                'children',\n                'branch'\n            )(param.stn_list[cur]),\n        ''\n    );\n\n    const branches = useMemo(\n        () => getBranches(param.stn_list),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [deps]\n    );\n    const routes = useMemo(\n        () => getRoutes(param.stn_list),\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [deps]\n    );\n    const tpo = useTpo(branches);\n\n    return (\n        <>\n            <ParamContext.Provider\n                value={{\n                    param,\n                    dispatch,\n                    branches,\n                    routes,\n                    deps,\n                    tpo,\n                }}\n            >\n                <div style={{ overflowY: 'auto' }}>\n                    <SVGs />\n                </div>\n                <div style={{ flex: 1, overflow: 'hidden' }}>\n                    <Panels />\n                </div>\n            </ParamContext.Provider>\n            <canvas style={{ display: 'none' }} />\n        </>\n    );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport './index.css';\nimport './i18n';\nimport App from './App';\nimport { updateParam } from './utils';\nimport * as serviceWorker from './serviceWorker';\n\nimport { ProvidedCanvases } from './constants';\n\ndeclare global {\n    interface Window {\n        gtag: any;\n    }\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n// load empty stylesheet elements\ndocument.head.append(\n    ...['share', ...ProvidedCanvases].map(tag => {\n        let link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.id = 'css_' + tag;\n        return link;\n    })\n);\n\nconst renderApp = () => {\n    ReactDOM.render(\n        // <React.Suspense fallback=\"loading\">\n        <App />,\n        // </React.Suspense>,\n        document.querySelectorAll('div#root')[0]\n    );\n};\n\nif (localStorage.rmgParam) {\n    try {\n        updateParam();\n    } catch (err) {\n        alert(err + 'Something error! Please refresh to start from a new canvas. ');\n        console.error(err);\n        localStorage.removeItem('rmgParam');\n    }\n    renderApp();\n} else {\n    import('./panels/save/template-diag/templates/basic/blank')\n        .then(module => {\n            localStorage.setItem('rmgParam', JSON.stringify(module.default));\n            updateParam();\n        })\n        .then(() => renderApp());\n}\n"],"sourceRoot":""}