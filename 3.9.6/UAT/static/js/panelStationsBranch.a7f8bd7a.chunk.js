(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[84],{126:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(4),s=n.n(r),c=n(12),a=n(5),l=n(22),o=n(21),d=n(11),j=n(2),h=n(1),b=Object(a.makeStyles)((function(){return Object(a.createStyles)({select:{width:166}})}));e.default=function(t){var e=Object(c.useTranslation)().t;return Object(h.jsxs)(a.List,{children:[Object(h.jsx)(a.ListItem,{children:Object(h.jsx)(a.ListItemText,{children:Object(h.jsx)("h3",{style:{margin:0},children:e("stations.edit.branch.left")})})}),Object(h.jsx)(u,{stnId:t.stnId,direction:"left"}),Object(h.jsx)(a.Divider,{}),Object(h.jsx)(a.ListItem,{children:Object(h.jsx)(a.ListItemText,{children:Object(h.jsx)("h3",{style:{margin:0},children:e("stations.edit.branch.right")})})}),Object(h.jsx)(u,{stnId:t.stnId,direction:"right"})]})};var u=function(t){var e=Object(d.useSelector)((function(t){return t.app.rmgStyle})),n=Object(r.useContext)(o.a).param.stn_list[t.stnId].branch[t.direction];return s.a.useMemo((function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,Object(i.a)({},t)),n[0]&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,Object(i.a)({},t)),e!==j.j.SHMetro&&Object(h.jsx)(x,Object(i.a)({},t))]})]})}),[t.stnId,t.direction,n[0]])},O=function(t){var e=Object(c.useTranslation)().t,n=b(),i=s.a.useContext(o.a),r=i.param,l=i.dispatch,d=r.stn_list[t.stnId].branch[t.direction],j=function(e){var n=e.target.value;"na"!==n&&n!==d[0]&&l({type:"UPDATE_STATION_BRANCH_TYPE",stnId:t.stnId,direction:t.direction,branchType:n})};return s.a.useMemo((function(){return Object(h.jsxs)(a.ListItem,{children:[Object(h.jsx)(a.ListItemIcon,{children:Object(h.jsx)(a.Icon,{children:"merge_type"})}),Object(h.jsx)(a.ListItemText,{primary:e("stations.edit.branch.type.title")}),Object(h.jsxs)(a.Select,{native:!0,onChange:j,value:d[0]||"na",className:n.select,children:[Object(h.jsx)("option",{value:"na",disabled:0!==d.length,children:e("stations.edit.branch.type.na")}),Object(h.jsx)("option",{value:"through",disabled:0===d.length,children:e("stations.edit.branch.type.through")}),Object(h.jsx)("option",{value:"nonthrough",disabled:0===d.length,children:e("stations.edit.branch.type.nonThrough")})]})]})}),[t.stnId,d[0]])},p=function(t){var e=Object(c.useTranslation)().t,n=b(),i=Object(d.useSelector)((function(t){return t.app.rmgStyle})),j=Object(r.useContext)(o.a),u=j.param,O=j.dispatch,p=u.stn_list[t.stnId],x=p.branch[t.direction],f="left"===t.direction?p.parents:p.children,I=function(e){var n=e.target.value;if(x[1]!==n){var i,r=n,s=u.stn_list;if("right"===t.direction){for(;1===s[r].parents.length;)r=s[r].children[0];i=s[r].parents[f.indexOf(n)]}else{for(;1===s[r].children.length;)r=s[r].parents[0];i=s[r].children[f.indexOf(n)]}O({type:"UPDATE_STATION_BRANCH_FIRST",branches:[{stnId:t.stnId,direction:t.direction,first:n},{stnId:r,direction:"left"===t.direction?"right":"left",first:i}]})}};return s.a.useMemo((function(){return Object(h.jsxs)(a.ListItem,{children:[Object(h.jsx)(a.ListItemIcon,{children:Object(h.jsx)(a.Icon,{style:{transform:"left"===t.direction?"scale(-1)":"scale(1)"},children:"share"})}),Object(h.jsx)(a.ListItemText,{primary:e("stations.edit.branch.first")}),Object(h.jsx)(a.Select,{native:!0,onChange:I,value:x[1]||f[0],className:n.select,children:f.map((function(t){return Object(h.jsx)("option",{value:t,children:Object(l.a)(u.stn_list[t],i)},t)}))})]})}),[t.stnId,x[1],f.toString()])},x=function(t){var e=Object(c.useTranslation)().t,n=b(),i=s.a.useContext(o.a),r=i.param,l=i.dispatch,d=r.stn_list[t.stnId],j=d.branch[t.direction],u="left"===t.direction?d.parents:d.children,O=function(e){var n="lower"===e.target.value?1:0;if(u.indexOf(j[1])!==n){var i=j[1],s=r.stn_list;if("right"===t.direction){for(;1===s[i].parents.length;)i=s[i].children[0];l({type:"UPDATE_STATION_BRANCH_POS",right:t.stnId,left:i})}else{for(;1===s[i].children.length;)i=s[i].parents[0];l({type:"UPDATE_STATION_BRANCH_POS",left:t.stnId,right:i})}}};return s.a.useMemo((function(){return Object(h.jsxs)(a.ListItem,{children:[Object(h.jsx)(a.ListItemIcon,{children:Object(h.jsx)(a.Icon,{children:"swap_vert"})}),Object(h.jsx)(a.ListItemText,{primary:e("stations.edit.branch.pos.title")}),Object(h.jsx)(a.Select,{native:!0,onChange:O,value:1===u.indexOf(j[1])?"lower":"upper",className:n.select,children:["upper","lower"].map((function(t){return Object(h.jsx)("option",{value:t,children:e("stations.edit.branch.pos."+t)},t)}))})]})}),[t.stnId,j[1],u.toString()])}}}]);
//# sourceMappingURL=panelStationsBranch.a7f8bd7a.chunk.js.map