{"version":3,"sources":["panels/stations/edit-diag/more-tab.tsx"],"names":["memo","props","rmgStyle","useSelector","store","app","rmgStyleServices","RmgStyle","GZMTR","Services","local","express","SHMetro","direct","rmgStyleFacility","MTR","ServiceLi","stnId","services","includes","FacilityLi","t","useTranslation","reduxDispatch","useDispatch","useContext","ParamContext","param","dispatch","primary","native","value","stn_list","facility","onChange","target","type","updateStationFacility","Object","values","Facilities","map","f","Set","secondary","row","s","control","checked","has","service","serviceId","isChecked","addStationService","removeStationService","disabled","label","secondaryTypographyProps"],"mappings":"8MAoBeA,0BAAK,SAAiBC,GAA2B,IAAD,EACrDC,EAAWC,uBAAY,SAACC,GAAD,OAAsBA,EAAMC,IAAIH,YACvDI,GAAkD,mBACnDC,IAASC,MAAQ,CAACC,IAASC,MAAOD,IAASE,UADQ,cAEnDJ,IAASK,QAAU,CAACH,IAASC,MAAOD,IAASE,QAASF,IAASI,SAFZ,GAIlDC,EAA+B,CAACP,IAASQ,KAE/C,OACI,8BACI,eAAC,OAAD,WACKb,KAAYI,GACT,cAACU,EAAD,CAAWC,MAAOhB,EAAMgB,MAAOC,SAAUZ,EAAiBJ,KAE7DY,EAAiBK,SAASjB,IAAa,cAACkB,EAAD,CAAYH,MAAOhB,EAAMgB,gBAMjF,IAAMG,EAAa,SAACnB,GAChB,IAAQoB,EAAMC,2BAAND,EACFE,EAAgBC,wBACtB,EAA4BC,qBAAWC,KAA/BC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,SACf,OACI,eAAC,WAAD,WACI,cAAC,eAAD,UACI,cAAC,OAAD,sBAEJ,cAAC,eAAD,CAAcC,QAASR,EAAE,wCACzB,cAAC,0BAAD,UACI,cAAC,SAAD,CACIS,QAAM,EACNC,MAAOJ,EAAMK,SAAS/B,EAAMgB,OAAOgB,SACnCC,SAAU,YAA4B,IAAfH,EAAc,EAAxBI,OAAUJ,MACnBH,EAAS,CACLQ,KAAM,0BACNnB,MAAOhB,EAAMgB,MACbgB,SAAUF,IAEdR,EAAcc,aAAsBpC,EAAMgB,MAAOc,KATzD,SAYKO,OAAOC,OAAOC,KAAYC,KAAI,SAAAC,GAAC,OAC5B,wBAAgBX,MAAOW,EAAvB,SACKrB,EAAE,gCAAwC,KAANqB,EAAW,OAASA,KADhDA,cAU/B1B,EAAY,SAACf,GACf,IAAQoB,EAAMC,2BAAND,EACFE,EAAgBC,wBACtB,EAA4BC,qBAAWC,KAA/BC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,SACTV,EAAW,IAAIyB,IAAIhB,EAAMK,SAAS/B,EAAMgB,OAAOC,UAkBrD,OACI,eAAC,WAAD,WACI,cAAC,eAAD,UACI,cAAC,OAAD,sBAEJ,cAAC,eAAD,CACIW,QAASR,EAAE,sCACXuB,UACI,cAAC,YAAD,CAAWC,KAAG,EAAd,SACK5C,EAAMiB,SAASuB,KAAI,SAAAK,GAAC,OACjB,cAAC,mBAAD,CACIC,QACI,cAAC,WAAD,CACIC,QAAS9B,EAAS+B,IAAIH,GACtBf,MAAOe,EACPZ,UA9B/BgB,EA8BsDJ,EA7BvD,YAAmE,IAAtDE,EAAqD,EAA/Db,OAAUa,QACLE,IAAYzC,IAASC,QACzBkB,EAAS,CACLQ,KAAM,0BACNnB,MAAOhB,EAAMgB,MACbkC,UAAWD,EACXE,UAAWJ,IAGXzB,EADAyB,EACcK,YAAkBpD,EAAMgB,MAAOiC,GAE/BI,YAAqBrD,EAAMgB,MAAOiC,OAmBxBK,SAAgB,UAANT,IAGlBU,MAAOnC,EAAE,+BAAiCyB,IACrCA,GAnC7B,IAACI,OAwCOO,yBAAwB,eAAK,YAAqB","file":"static/js/panelStationsMore.792093f1.chunk.js","sourcesContent":["import React, { memo, useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n    Checkbox,\n    FormControlLabel,\n    FormGroup,\n    Icon,\n    List,\n    ListItem,\n    ListItemIcon,\n    ListItemSecondaryAction,\n    ListItemText,\n    Select,\n} from '@material-ui/core';\nimport { ParamContext } from '../../../context';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../../redux';\nimport { Facilities, RmgStyle, Services } from '../../../constants/constants';\nimport { addStationService, removeStationService, updateStationFacility } from '../../../redux/param/action';\n\nexport default memo(function MoreTab(props: { stnId: string }) {\n    const rmgStyle = useSelector((store: RootState) => store.app.rmgStyle);\n    const rmgStyleServices: { [s in RmgStyle]?: Services[] } = {\n        [RmgStyle.GZMTR]: [Services.local, Services.express],\n        [RmgStyle.SHMetro]: [Services.local, Services.express, Services.direct],\n    };\n    const rmgStyleFacility: RmgStyle[] = [RmgStyle.MTR];\n\n    return (\n        <div>\n            <List>\n                {rmgStyle in rmgStyleServices && (\n                    <ServiceLi stnId={props.stnId} services={rmgStyleServices[rmgStyle] as Services[]} />\n                )}\n                {rmgStyleFacility.includes(rmgStyle) && <FacilityLi stnId={props.stnId} />}\n            </List>\n        </div>\n    );\n});\n\nconst FacilityLi = (props: { stnId: string }) => {\n    const { t } = useTranslation();\n    const reduxDispatch = useDispatch();\n    const { param, dispatch } = useContext(ParamContext);\n    return (\n        <ListItem>\n            <ListItemIcon>\n                <Icon>place</Icon>\n            </ListItemIcon>\n            <ListItemText primary={t('stations.edit.more.facility.button')} />\n            <ListItemSecondaryAction>\n                <Select\n                    native\n                    value={param.stn_list[props.stnId].facility}\n                    onChange={({ target: { value } }) => {\n                        dispatch({\n                            type: 'UPDATE_STATION_FACILITY',\n                            stnId: props.stnId,\n                            facility: value as Facilities,\n                        });\n                        reduxDispatch(updateStationFacility(props.stnId, value as Facilities));\n                    }}\n                >\n                    {Object.values(Facilities).map(f => (\n                        <option key={f} value={f}>\n                            {t('stations.edit.more.facility.' + (f === '' ? 'none' : f))}\n                        </option>\n                    ))}\n                </Select>\n            </ListItemSecondaryAction>\n        </ListItem>\n    );\n};\n\nconst ServiceLi = (props: { stnId: string, services: Services[] }) => {\n    const { t } = useTranslation();\n    const reduxDispatch = useDispatch();\n    const { param, dispatch } = useContext(ParamContext);\n    const services = new Set(param.stn_list[props.stnId].services);\n\n    const handleChange =\n        (service: Services) =>\n        ({ target: { checked } }: React.ChangeEvent<HTMLInputElement>) => {\n            if (service === Services.local) return; // cannot remove local service\n            dispatch({\n                type: 'UPDATE_STATION_SERVICES',\n                stnId: props.stnId,\n                serviceId: service,\n                isChecked: checked,\n            });\n            if (checked) {\n                reduxDispatch(addStationService(props.stnId, service));\n            } else {\n                reduxDispatch(removeStationService(props.stnId, service));\n            }\n        };\n    return (\n        <ListItem>\n            <ListItemIcon>\n                <Icon>train</Icon>\n            </ListItemIcon>\n            <ListItemText\n                primary={t('stations.edit.more.services.button')}\n                secondary={\n                    <FormGroup row>\n                        {props.services.map(s => (\n                            <FormControlLabel\n                                control={\n                                    <Checkbox\n                                        checked={services.has(s)}\n                                        value={s}\n                                        onChange={handleChange(s)}\n                                        disabled={s === 'local'}\n                                    />\n                                }\n                                label={t('stations.edit.more.services.' + s)}\n                                key={s}\n                            />\n                        ))}\n                    </FormGroup>\n                }\n                secondaryTypographyProps={{ ['component' as any]: 'div' }}\n            />\n        </ListItem>\n    );\n};\n"],"sourceRoot":""}