(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[72],{132:function(e,t,n){"use strict";n.r(t);var i=n(4),a=n.n(i),r=n(5),c=n(8),o=n(11),s=n(78),l=n(15),u=n(10),j=n(2),d=n(1),h=Object(r.makeStyles)((function(e){return Object(r.createStyles)({dividerVertical:{margin:e.spacing(0,2)},nestedList:{paddingLeft:e.spacing(5)}})})),m=function(){var e=Object(o.useTranslation)().t,t=Object(u.useSelector)((function(e){return e.app.rmgStyle})),n=a.a.useContext(l.a),i=n.param,h=n.dispatch,m=a.a.useState(!1),g=Object(c.a)(m,2),f=g[0],x=g[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(r.ListItem,{button:!0,onClick:function(){return x(!0)},children:[Object(d.jsx)(r.ListItemIcon,{children:Object(d.jsx)(r.Icon,{children:"color_lens"})}),Object(d.jsx)(r.ListItemText,{primary:e("design.theme"),secondary:Object(d.jsx)("span",{style:{backgroundColor:i.theme[2],color:i.theme[3],padding:".1rem .3rem"},children:Object.values(i.line_name).join()})}),Object(d.jsx)(r.Icon,{color:"action",children:"arrow_right"})]}),Object(d.jsx)(s.a,{open:f,theme:i.theme,lineName:i.line_name,onUpdate:function(e,t){"name"===e&&h({type:"SET_LINE_NAME",name:Object.values(t)}),"theme"===e&&h({type:"SET_THEME",theme:t})},onClose:function(){return x(!1)}}),Object(d.jsx)(r.Divider,{}),Object(d.jsx)(p,{}),Object(d.jsx)(r.Divider,{}),t===j.j.SHMetro?Object(d.jsx)(O,{}):Object(d.jsx)(b,{})]})},p=function(){var e=Object(o.useTranslation)().t,t=h(),n=a.a.useContext(l.a),i=n.param,c=n.dispatch;return a.a.useMemo((function(){return Object(d.jsxs)(r.ListItem,{children:[Object(d.jsx)(r.ListItemIcon,{children:Object(d.jsx)(r.Icon,{children:"directions"})}),Object(d.jsx)(r.ListItemText,{primary:e("design.direction.button"),secondary:e("design.direction."+i.direction)}),Object(d.jsx)(r.Divider,{orientation:"vertical",flexItem:!0,className:t.dividerVertical}),Object(d.jsx)(r.Button,{variant:"outlined",color:"primary",onClick:function(){return c({type:"SET_DIRECTION"})},children:e("design.direction.switch")})]})}),[t.dividerVertical,i.direction])},b=function(){var e=Object(o.useTranslation)().t,t=a.a.useContext(l.a),n=t.param,i=t.dispatch;return a.a.useMemo((function(){return Object(d.jsxs)(r.ListItem,{children:[Object(d.jsx)(r.ListItemIcon,{children:Object(d.jsx)(r.Icon,{children:"looks_one"})}),Object(d.jsx)(r.ListItemText,{primary:e("design.platform")}),Object(d.jsx)(r.TextField,{value:n.platform_num,onChange:function(e){return i({type:"SET_PLATFORM",platform:e.target.value})}})]})}),[n.platform_num])},O=function(){var e=Object(o.useTranslation)().t,t=h(),n=Object(i.useContext)(l.a),a=n.param,c=n.dispatch,s=function(e,t){c(t?{type:"SET_PLATFORM",platform:""}:{type:"SET_PLATFORM",platform:!1})};return Object(i.useMemo)((function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(r.ListItem,{children:[Object(d.jsx)(r.ListItemIcon,{children:Object(d.jsx)(r.Icon,{children:"looks_one"})}),Object(d.jsx)(r.ListItemText,{primary:e("design.platform")}),Object(d.jsx)(r.ListItemSecondaryAction,{children:Object(d.jsx)(r.Switch,{color:"primary",checked:!1!==a.platform_num,onChange:s})})]}),Object(d.jsx)(r.Collapse,{in:!1!==a.platform_num,unmountOnExit:!0,children:Object(d.jsx)(r.List,{component:"div",disablePadding:!0,className:t.nestedList,children:Object(d.jsx)(r.ListItem,{children:Object(d.jsx)(r.TextField,{placeholder:e("design.platform"),value:a.platform_num,onChange:function(e){return c({type:"SET_PLATFORM",platform:e.target.value})}})})})})]})}),[a.platform_num,t.nestedList])},g=a.a.lazy((function(){return n.e(74).then(n.bind(null,120))})),f=a.a.lazy((function(){return n.e(73).then(n.bind(null,121))})),x=a.a.lazy((function(){return n.e(75).then(n.bind(null,122))})),v=function(){var e=Object(u.useSelector)((function(e){return e.app.rmgStyle}));return Object(d.jsx)(r.Grid,{container:!0,spacing:3,justify:"center",alignItems:"flex-start",children:Object(d.jsx)(r.Grid,{item:!0,xs:12,sm:10,md:7,lg:5,children:Object(d.jsx)(r.Paper,{children:Object(d.jsxs)(r.List,{component:"div",disablePadding:!0,children:[Object(d.jsx)(m,{}),e===j.j.MTR&&Object(d.jsxs)(a.a.Suspense,{fallback:Object(d.jsx)(r.LinearProgress,{}),children:[Object(d.jsx)(r.Divider,{}),Object(d.jsx)(g,{})]}),e===j.j.GZMTR&&Object(d.jsxs)(a.a.Suspense,{fallback:Object(d.jsx)(r.LinearProgress,{}),children:[Object(d.jsx)(r.Divider,{}),Object(d.jsx)(f,{})]}),e===j.j.SHMetro&&Object(d.jsxs)(a.a.Suspense,{fallback:Object(d.jsx)(r.LinearProgress,{}),children:[Object(d.jsx)(r.Divider,{}),Object(d.jsx)(x,{})]})]})})})})};t.default=v},76:function(e,t,n){var i={"./README.md":[80,68],"./barcelona":[37,1],"./barcelona.ts":[37,1],"./beijing":[38,12],"./beijing.ts":[38,12],"./changsha":[39,23],"./changsha.ts":[39,23],"./chengdu":[40,34],"./chengdu.ts":[40,34],"./chongqing":[41,36],"./chongqing.ts":[41,36],"./dongguan":[42,2],"./dongguan.ts":[42,2],"./edinburgh":[43,3],"./edinburgh.ts":[43,3],"./foshan":[44,4],"./foshan.ts":[44,4],"./glasgow":[45,5],"./glasgow.ts":[45,5],"./guangzhou":[46,6],"./guangzhou.ts":[46,6],"./hangzhou":[47,7],"./hangzhou.ts":[47,7],"./hongkong":[48,8],"./hongkong.ts":[48,8],"./kansai":[49,9],"./kansai.ts":[49,9],"./kaohsiung":[50,10],"./kaohsiung.ts":[50,10],"./london":[51,11],"./london.ts":[51,11],"./macao":[52,13],"./macao.ts":[52,13],"./madrid":[53,14],"./madrid.ts":[53,14],"./nanjing":[54,15],"./nanjing.ts":[54,15],"./newtaipei":[55,16],"./newtaipei.ts":[55,16],"./osaka":[56,17],"./osaka.ts":[56,17],"./oslo":[57,18],"./oslo.ts":[57,18],"./other":[58,19],"./other.ts":[58,19],"./paris":[59,20],"./paris.ts":[59,20],"./qingdao":[60,21],"./qingdao.ts":[60,21],"./sanfrancisco":[61,22],"./sanfrancisco.ts":[61,22],"./seoul":[62,24],"./seoul.ts":[62,24],"./shanghai":[63,25],"./shanghai.ts":[63,25],"./shenzhen":[64,26],"./shenzhen.ts":[64,26],"./singapore":[65,27],"./singapore.ts":[65,27],"./stockholm":[66,28],"./stockholm.ts":[66,28],"./taipei":[67,29],"./taipei.ts":[67,29],"./tianjin":[68,30],"./tianjin.ts":[68,30],"./tokyo":[69,31],"./tokyo.ts":[69,31],"./toronto":[70,32],"./toronto.ts":[70,32],"./tyneandwear":[71,33],"./tyneandwear.ts":[71,33],"./xian":[72,35],"./xian.ts":[72,35]};function a(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(i)},a.id=76,e.exports=a},78:function(e,t,n){"use strict";var i=n(0),a=n(8),r=n(12),c=n(3),o=n(4),s=n.n(o),l=n(11),u=n(5),j=n(6),d=n.n(j),h=n(9),m=n(21),p=n(24),b=n(2),O=n(1),g=Object(u.makeStyles)((function(){return Object(u.createStyles)({cityItem:{display:"flex",flexDirection:"row",alignItems:"center"},menuItemSpan:{padding:"0 .3rem"},button:{borderRadius:"50%",height:24,width:24,minWidth:0,marginRight:8,padding:0},inputColour:{position:"absolute",width:0,height:0,left:27,top:32},buttonContainer:{display:"flex",flexShrink:1}})})),f=function(e){var t=Object(l.useTranslation)(),c=t.t,j=t.i18n,f=g(),x=function(e){var t=s.a.useState([]),r=Object(a.a)(t,2),c=r[0],l=r[1],u=e[0]?n(76)("./".concat(e[0])).then((function(e){return e.default})):Promise.resolve([]);return Object(o.useEffect)((function(){"undefined"!==typeof e[0]&&Object(h.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u;case 2:n=t.sent,l(e[0]===p.a.Other?[Object(i.a)(Object(i.a)({},n[0]),{},{colour:e[2],fg:e[3]||b.g.white})]:n);case 4:case"end":return t.stop()}}),t)})))()}),[e.toString()]),c}(e.theme);Object(o.useEffect)((function(){if(0!==x.length&&!x.filter((function(t){return t.id===e.theme[1]})).length){var t=x[0],n=t.id,i=t.colour,a=t.fg,r=[e.theme[0],n,i,a||b.g.white];e.onUpdate("theme",r)}}),[x]);return Object(O.jsxs)(u.List,{component:"div",disablePadding:!0,children:[Object(O.jsx)(v,{value:e.theme[0],onChange:function(t){return e.onUpdate("theme",[t.target.value].concat(Object(r.a)(e.theme.slice(1))))}}),Object(O.jsx)(u.Divider,{variant:"middle"}),Object(O.jsxs)(u.ListItem,{children:[Object(O.jsx)(u.ListItemText,{primary:c("colour.line")}),Object(O.jsx)(u.TextField,{select:!0,style:{width:166},onChange:function(t){var n=t.target.value,i=x.filter((function(e){return e.id===n}))[0],a=i.colour,r=i.fg,c=[e.theme[0],n,a,r||b.g.white];e.onUpdate("theme",c)},value:e.theme[1],disabled:"other"===e.theme[0],children:x.map((function(e){return Object(O.jsx)(u.MenuItem,{value:e.id,children:Object(O.jsx)("span",{className:f.menuItemSpan,style:{backgroundColor:e.colour,color:e.fg||b.g.white},children:Object(m.b)(e.name,j.languages)})},e.id)}))})]})]})},x=function(e){var t=Object(l.useTranslation)().t,n=g(),i=Object(o.useState)(e.theme[2]),c=Object(a.a)(i,2),s=c[0],j=c[1];Object(o.useEffect)((function(){return j(e.theme[2])}),[e.theme[2]]);return Object(O.jsxs)(u.List,{component:"div",disablePadding:!0,children:[Object(O.jsxs)(u.ListItem,{children:[Object(O.jsx)(u.ListItemText,{primary:t("colour.colour")}),Object(O.jsxs)("div",{className:n.buttonContainer,children:[Object(O.jsx)("input",{type:"color",id:"input-color",value:e.theme[2],onChange:function(t){var n=t.target.value;e.onUpdate("theme",[p.a.Other,"other",n,e.theme[3]])},className:n.inputColour,style:{opacity:0}}),Object(O.jsx)("label",{htmlFor:"input-color",children:Object(O.jsx)(u.Tooltip,{title:t("colour.tooltip"),"aria-label":"colour picker",children:Object(O.jsx)(u.Button,{className:n.button,style:{backgroundColor:e.theme[2],borderColor:e.theme[3]||b.g.white},variant:"contained",component:"span",children:" "})})})]}),Object(O.jsx)(u.TextField,{error:!(null===s||void 0===s?void 0:s.match(/^#[0-9a-fA-F]{6}$/g)),style:{width:85},onChange:function(t){var n=t.target.value;if(null!==n.match(/^#[0-9a-fA-F]{0,6}$/))if(j(n),"other"!==e.theme[0])if(null!==n.match(/^#[0-9a-fA-f]{6}$/)){var i=[p.a.Other,"other",n,e.theme[3]];e.onUpdate("theme",i)}else{var a=[p.a.Other,"other"].concat(Object(r.a)(e.theme.slice(2)));e.onUpdate("theme",a)}else if(null!==n.match(/^#[0-9a-fA-F]{6}$/)){var c=e.theme.map((function(e,t){return 2===t?n:e}));e.onUpdate("theme",c)}},value:null===s||void 0===s?void 0:s.toUpperCase()})]}),Object(O.jsx)(u.Divider,{variant:"middle"}),Object(O.jsxs)(u.ListItem,{children:[Object(O.jsx)(u.ListItemText,{primary:t("colour.fg")}),Object(O.jsxs)(u.Select,{native:!0,style:{width:85},label:t("colour.fg"),onChange:function(t){var n=[p.a.Other,"other",e.theme[2],t.target.value];e.onUpdate("theme",n)},value:e.theme[3]||b.g.white,children:[Object(O.jsx)("option",{value:"#fff",children:t("colour.fgWhite")}),Object(O.jsx)("option",{value:"#000",children:t("colour.fgBlack")})]})]})]})},v=function(e){var t=Object(l.useTranslation)(),n=t.t,i=t.i18n,a=g(),r=Object(o.useMemo)((function(){return p.b.map((function(e){return Object(O.jsx)(u.MenuItem,{value:e.id,children:Object(O.jsxs)("span",{className:a.cityItem,children:[Object(O.jsx)(C,{code:e.country}),Object(O.jsx)("span",{children:Object(m.b)(e.name,i.languages)})]})},e.id)}))}),[]);return Object(O.jsxs)(u.ListItem,{children:[Object(O.jsx)(u.ListItemText,{primary:n("colour.city")}),Object(O.jsx)(u.TextField,{select:!0,style:{width:166},value:e.value,onChange:e.onChange,children:r})]})},y=Object(u.makeStyles)((function(){return Object(u.createStyles)({img:{height:20,marginRight:"0.2rem"}})}));function C(e){var t=Object(l.useTranslation)().i18n,n=y(),i=[];return i=2===e.code.length?e.code.toUpperCase().split("").map((function(e){return((e.codePointAt(0)||0)+127397).toString(16).toUpperCase()})):["1F3F4"].concat(e.code.toUpperCase().split("").map((function(e){return((e.codePointAt(0)||0)+917536).toString(16).toUpperCase()})),"E007F"),[b.e.ChineseCN,b.e.ChineseSimp].includes(t.language)&&"TW"===e.code&&(i=["1F3F4"]),-1!==navigator.platform.indexOf("Win32")||-1!==navigator.platform.indexOf("Win64")?Object(O.jsx)("img",{src:"/RailMapGenerator"+"/images/flags/".concat(i.join("-"),".svg"),className:n.img,alt:"Flag of ".concat(e.code)}):Object(O.jsx)("span",{children:String.fromCodePoint.apply(String,Object(r.a)(i.map((function(e){return parseInt(e,16)}))))})}var I=n(15),T=Object(u.makeStyles)((function(e){return Object(u.createStyles)({contentWrapper:Object(c.a)({display:"flex",overflow:"hidden",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},e.breakpoints.down("xs"),{flexDirection:"column"}),contentLeft:{maxWidth:280},contentControl:{flexGrow:0,flexShrink:0,display:"flex",flexDirection:"column",width:270},paperRoot:{maxWidth:250},listItemPaper:{justifyContent:"center"},iconRoot:{position:"absolute",color:e.palette.action.active},inputBaseRoot:{display:"block"},inputBaseInputZH:{textAlign:"center",fontSize:36,padding:0,paddingTop:6,height:45},inputBaseInputEN:{textAlign:"center",fontSize:18,padding:0,paddingBottom:6,height:"auto"},chipWrapper:{overflowX:"auto",display:"flex"},chipRoot:{borderRadius:4.5,height:32,lineHeight:"1rem",margin:2},chipLabel:{padding:"0 6px","& > span":{display:"block",textAlign:"center"},"& > span:first-child":{fontSize:"1rem"},"& > span:last-child":{lineHeight:"0.8rem"}}})})),L=function(e){var t=Object(l.useTranslation)().t,n=T();return Object(O.jsxs)(u.Dialog,{open:e.open,onClose:e.onClose,children:[Object(O.jsx)(u.DialogTitle,{children:t("colour.title")}),Object(O.jsxs)(u.DialogContent,{className:n.contentWrapper,children:[Object(O.jsxs)(u.List,{component:"div",disablePadding:!0,className:n.contentLeft,children:[Object(O.jsx)(S,{theme:e.theme,lineName:e.lineName,onUpdate:e.onUpdate}),Object(O.jsx)(u.Divider,{}),Object(O.jsx)(k,{onUpdate:e.onUpdate})]}),Object(O.jsx)("div",{className:n.contentControl,children:Object(O.jsx)(w,{theme:e.theme,onUpdate:e.onUpdate})})]}),Object(O.jsx)(u.DialogActions,{children:Object(O.jsx)(u.Button,{onClick:e.onClose,color:"primary",children:t("dialog.done")})})]})},S=function(e){var t=T(),n=function(t,n){var i=e.lineName.map((function(e,i){return i===n?t:e}));e.onUpdate("name",i)};return Object(O.jsx)(u.ListItem,{style:{justifyContent:"center"},children:Object(O.jsxs)(u.Paper,{className:t.paperRoot,style:{backgroundColor:e.theme[2]},children:[Object(O.jsx)(u.Icon,{className:t.iconRoot,children:"edit"}),Object(O.jsx)(u.InputBase,{value:e.lineName[0],classes:{root:t.inputBaseRoot,input:t.inputBaseInputZH},style:{color:e.theme[3]||b.g.white},onChange:function(e){return n(e.target.value,0)},autoFocus:!0}),Object(O.jsx)(u.InputBase,{value:e.lineName[1],classes:{root:t.inputBaseRoot,input:t.inputBaseInputEN},style:{color:e.theme[3]||b.g.white},onChange:function(e){return n(e.target.value,1)}})]})})},k=function(e){var t=Object(l.useTranslation)().t,n=T(),i=Object(o.useContext)(I.a).param,a=Object(o.useMemo)((function(){return new Set(Object.values(i.stn_list).reduce((function(e,t){var n=t.transfer.info;return e.concat.apply(e,Object(r.a)(n))}),[[].concat(Object(r.a)(i.theme),Object(r.a)(i.line_name))]).map((function(e){return JSON.stringify(e)})).reverse())}),[]),c=Object(o.useMemo)((function(){return Object(r.a)(a).map((function(t,i){var a=JSON.parse(t),r=a.slice(4).map((function(e,t){return Object(O.jsx)("span",{style:{color:a[3]},children:e},t)}));return Object(O.jsx)(u.Chip,{onClick:function(){e.onUpdate("theme",a.slice(0,4)),e.onUpdate("name",a.slice(4))},style:{backgroundColor:a[2]},className:n.chipRoot,classes:{label:n.chipLabel},label:r},i)}))}),[]);return Object(O.jsx)(u.ListItem,{children:Object(O.jsx)(u.ListItemText,{primary:t("colour.recent"),secondary:c,secondaryTypographyProps:{component:"div"},classes:{secondary:n.chipWrapper}})})},w=function(e){var t=Object(l.useTranslation)().t,n=Object(o.useState)("other"===e.theme[0]?1:0),r=Object(a.a)(n,2),c=r[0],s=r[1],j=Object(O.jsxs)(u.Tabs,{value:c,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){return s(t)},variant:"fullWidth",scrollButtons:"off",children:[Object(O.jsx)(u.Tab,{label:t("colour.palette"),style:{minWidth:"unset"}}),Object(O.jsx)(u.Tab,{label:t("colour.custom"),style:{minWidth:"unset"}})]}),d=function(t){switch(t){case 0:return Object(O.jsx)(f,Object(i.a)({},e));case 1:return Object(O.jsx)(x,Object(i.a)({},e));default:return Object(O.jsx)(O.Fragment,{})}}(c);return Object(O.jsxs)(O.Fragment,{children:[j,d]})};t.a=L}}]);
//# sourceMappingURL=panelDesign.0b955698.chunk.js.map