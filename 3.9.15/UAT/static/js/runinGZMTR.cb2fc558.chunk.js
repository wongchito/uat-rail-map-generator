(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[98],{143:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(36),a=n(2),s=n(4),i=n.n(s),l=n(74),j=n(13),u=n(10),o=n(21),m=n(75),x=n(3),h=n(11),b=n(1),d=["curName","curSecName"],f=["secName"],O=["lineNum","stnNum"],g=["secName"],p=function(){var e,t=Object(h.useSelector)((function(e){return e.param.svg_height})),n=Object(h.useSelector)((function(e){return e.param.svgWidth})),c=Object(h.useSelector)((function(e){return e.param.direction})),r=Object(h.useSelector)((function(e){return e.param.info_panel_type})),l=Object(h.useSelector)((function(e){return e.param.line_num})),j=Object(h.useSelector)((function(e){return e.param.current_stn_idx})),o=Object(h.useSelector)((function(e){return e.param.stn_list[j]})),m=i.a.useRef(null),d=Object(s.useState)({width:0}),f=Object(u.a)(d,2),O=f[0],g=f[1];Object(s.useEffect)((function(){return g(m.current.getBBox())}),[o.name[0],o.name[1]]);var p=o[c===x.m.left?"parents":"children"],z={name:"translate(".concat((c===x.m.left?1:-1)*n[x.c.RunIn]/4,",45)"),next:"translate(".concat((c===x.m.left?1:-1)*n[x.c.RunIn]/10,",45)")};return Object(b.jsxs)("g",{children:[Object(b.jsxs)("g",{transform:r===x.i.gz2otis?z.name:"",children:[Object(b.jsx)(_,{ref:m,curName:o.name,curSecName:o.secondaryName,style:Object(a.a)({},"--translate-y","".concat(.5*t-50-18*(o.name[1].split("\\").length-1)-(o.secondaryName?29:0),"px"))}),Object(b.jsx)(S,{lineNum:l,stnNum:o.num,style:(e={},Object(a.a)(e,"--translate-x","".concat((n[x.c.RunIn]+O.width)/2+55,"px")),Object(a.a)(e,"--translate-y","".concat(.5*t-30-18*(o.name[1].split("\\").length-1)-(o.secondaryName?29:0),"px")),e)})]}),Object(b.jsx)("g",{transform:r===x.i.gz2otis?z.next:"",children:p.includes("linestart")||p.includes("lineend")?Object(b.jsx)(b.Fragment,{}):1===p.length?Object(b.jsx)(y,{nextId:p[0],nameBBox:O}):Object(b.jsx)(v,{nextIds:p,nameBBox:O})})]})},_=i.a.forwardRef((function(e,t){var n=e.curName,a=e.curSecName,s=Object(r.a)(e,d);return Object(b.jsxs)("g",Object(c.a)(Object(c.a)({id:"big_name"},s),{},{children:[i.a.useMemo((function(){return Object(b.jsxs)("g",{ref:t,children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:90,children:n[0]}),Object(b.jsx)("g",{fontSize:36,className:"rmg-name__en",children:n[1].split("\\").map((function(e,t){return Object(b.jsx)("text",{dy:70+36*t,children:e},t)}))})]})}),[n]),a&&Object(b.jsx)(z,{secName:a,transform:"translate(0,".concat(70+36*n[1].split("\\").length,")")})]}))})),z=function(e){var t=e.secName,n=Object(r.a)(e,f),a=Object(s.useRef)(null),i=Object(s.useState)({x:0,width:0}),l=Object(u.a)(i,2),j=l[0],o=l[1];return Object(s.useEffect)((function(){return o(a.current.getBBox())}),[e.secName.toString()]),Object(b.jsxs)("g",Object(c.a)(Object(c.a)({},n),{},{children:[Object(b.jsxs)("g",{transform:"translate(0,4.5)",fontSize:36,children:[Object(b.jsx)("text",{textAnchor:"end",x:j.x-3,className:"rmg-name__zh",children:"("}),Object(b.jsx)("text",{textAnchor:"start",x:j.width+j.x+3,className:"rmg-name__zh",children:")"})]}),Object(b.jsxs)("g",{ref:a,textAnchor:"middle",children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:26,children:t[0]}),Object(b.jsx)("text",{dy:22,className:"rmg-name__en",fontSize:14,children:t[1]})]})]}))},S=function(e){var t=e.lineNum,n=e.stnNum,a=Object(r.a)(e,O);return Object(b.jsx)("g",Object(c.a)(Object(c.a)({id:"big_stn_num"},a),{},{children:i.a.useMemo((function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("path",{className:"rmg-stn rmg-stn--future",d:"M 0,12.95 V -12.95 H -12.95 a 12.95,12.95 0 0,0 0,25.9 h 25.9 a 12.95,12.95 0 0,0 0,-25.9 H 0 "}),Object(b.jsx)(m.a,{transform:"scale(1.4)",lineNum:t,stnNum:n})]})}),[t,n])}))},y=function(e){var t,n=e.nextId,c=e.nameBBox,r=Object(h.useSelector)((function(e){return e.param.svgWidth})),l=Object(h.useSelector)((function(e){return e.param.direction})),j=Object(h.useSelector)((function(e){return e.param.stn_list[n]})),o=j.name,m=j.secondaryName,d=Object(s.useState)({width:0}),f=Object(u.a)(d,2),O=f[0],g=f[1],p=i.a.useRef(null);Object(s.useEffect)((function(){return g(p.current.getBBox())}),[o.toString()]);var _=o[0].length,z=(r[x.c.RunIn]-c.width)/2;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("g",{id:"big_next",children:[Object(b.jsxs)("g",{textAnchor:"middle",style:Object(a.a)({},"--translate-x",l===x.m.left?"80px":"".concat(_<=2?r[x.c.RunIn]-45-O.width-70:r[x.c.RunIn]-45-O.width-52.5,"px")),children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:35,children:"\u4e0b\u7ad9"}),Object(b.jsx)("text",{className:"rmg-name__en",fontSize:17,dy:30,children:"Next"})]}),Object(b.jsxs)("g",{textAnchor:"start",ref:p,style:Object(a.a)({},"--translate-x",l===x.m.left?"".concat(_<=2?150:132.5,"px"):"".concat(r[x.c.RunIn]-45-O.width,"px")),children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:35,children:o[0]}),Object(b.jsx)("g",{fontSize:17,children:o[1].split("\\").map((function(e,t){return Object(b.jsx)("text",{className:"rmg-name__en",dy:30+17*t,children:e},t)}))})]}),m&&Object(b.jsx)("g",{textAnchor:"middle",style:Object(a.a)({},"--translate-x",l===x.m.left?"".concat(_<=2?150:132.5,"px"):"".concat(r[x.c.RunIn]-45-O.width,"px")),children:Object(b.jsx)(N,{secName:m,transform:"translate(".concat(O.width/2,",").concat(30+17*o[1].split("\\").length+5,")")})})]}),Object(b.jsx)("path",{id:"arrow",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black",style:(t={},Object(a.a)(t,"--translate-x",l===x.m.left?"".concat((115+35*((_<=2?1:.5)+_)+z)/2-20,"px"):"".concat((r[x.c.RunIn]-45-O.width-(_<=2?105:87.5)+z+e.nameBBox.width+55+25.9)/2+20,"px")),Object(a.a)(t,"--rotate",l===x.m.left?"0deg":"180deg"),t)})]})},N=function(e){var t=e.secName,n=Object(r.a)(e,g),a=Object(s.useRef)(null),i=Object(s.useState)({x:0,width:0}),l=Object(u.a)(i,2),j=l[0],o=l[1];return Object(s.useEffect)((function(){return o(a.current.getBBox())}),[e.secName.toString()]),Object(b.jsxs)("g",Object(c.a)(Object(c.a)({},n),{},{children:[Object(b.jsxs)("g",{transform:"translate(0,2.5)",fontSize:25,children:[Object(b.jsx)("text",{textAnchor:"end",x:j.x-3,className:"rmg-name__zh",children:"("}),Object(b.jsx)("text",{textAnchor:"start",x:j.width+j.x+3,className:"rmg-name__zh",children:")"})]}),Object(b.jsxs)("g",{ref:a,children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:18,children:t[0]}),Object(b.jsx)("text",{className:"rmg-name__en",fontSize:10,dy:15,children:t[1]})]})]}))},v=function(e){var t,n=e.nextIds,r=e.nameBBox,l=i.a.useContext(o.a).routes,m=Object(h.useSelector)((function(e){return e.param.svgWidth})),d=Object(h.useSelector)((function(e){return e.param.direction})),f=Object(h.useSelector)((function(e){return e.param.stn_list})),O=n.map((function(e){return f[e].name})),g=Object(s.useState)({width:0}),p=Object(u.a)(g,2),_=p[0],z=p[1],S=Object(s.useRef)([]);Object(s.useEffect)((function(){z((function(e){return Object(c.a)(Object(c.a)({},e),{},{width:0})})),S.current.forEach((function(e){var t=null===e||void 0===e?void 0:e.getBBox();z((function(e){return t?e.width>t.width?e:t:e}))}))}),[O.toString()]);var y=e.nextIds.map((function(e){return l.reduce((function(t,n){return n.includes(e)?t.concat(n.filter((function(e){return!["linestart","lineend"].includes(e)})).slice(d===x.m.left?0:-1)[0]):t}),[])})),N=Math.max.apply(Math,Object(j.a)(O.map((function(e){return e[0].length})))),v=(m[x.c.RunIn]-r.width)/2;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("g",{id:"big_next_2",children:O.map((function(e,t){return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsxs)("g",{textAnchor:"middle",style:Object(a.a)({},"--translate-x",d===x.m.left?"72px":"".concat(m[x.c.RunIn]-45-_.width-41,"px")),children:[Object(b.jsx)("text",{className:"rmg-name__zh",children:"\u4e0b\u7ad9"}),Object(b.jsx)("text",{className:"rmg-name__en",y:22,children:"Next"})]}),Object(b.jsxs)("g",{ref:function(e){return S.current[t]=e},textAnchor:"start",style:Object(a.a)({},"--translate-x",d===x.m.left?"113px":"".concat(m[x.c.RunIn]-45-_.width,"px")),children:[Object(b.jsx)("text",{className:"rmg-name__zh",children:e[0]}),e[1].split("\\").map((function(e,t){return Object(b.jsx)("text",{className:"rmg-name__en",y:22+13*t,children:e},t)})),Object(b.jsx)("text",{className:"rmg-name__zh",y:-35,children:y[t].map((function(e){return f[e].name[0]})).join("/")+"\u65b9\u5411"}),Object(b.jsx)("text",{className:"rmg-name__en rmg-name__gzmtr--next2-dest",y:-20,children:"Towards "+y[t].map((function(e){return f[e].name[1]})).join("/").replace("\\"," ")})]})]},t)}))}),Object(b.jsx)("path",{id:"arrow",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black",style:(t={},Object(a.a)(t,"--translate-x",d===x.m.left?"".concat((99+27*(1+N)+v)/2-20,"px"):"".concat((m[x.c.RunIn]-45-_.width-41-27+v+e.nameBBox.width+55+25.9)/2+20,"px")),Object(a.a)(t,"--rotate",d===x.m.left?"0deg":"180deg"),t)})]})},w=["num"],B=(t.default=function(){var e=Object(h.useSelector)((function(e){return e.param.svgWidth})),t=Object(h.useSelector)((function(e){return e.param.direction})),n=Object(h.useSelector)((function(e){return e.param.info_panel_type})),c=Object(h.useSelector)((function(e){return e.param.platform_num})),r=Object(h.useSelector)((function(e){return e.param.psd_num})),s={platform:"translate(".concat(t===x.m.left?50:-50,",45)")};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.a,{variant:n,isShowLight:n!==x.i.gz2otis,isShowPSD:n!==x.i.gz2otis&&r}),Object(b.jsx)("g",{transform:n===x.i.gz2otis?s.platform:"",children:Object(b.jsx)(B,{num:c,style:Object(a.a)({},"--translate-x","".concat(t===x.m.left?e[x.c.RunIn]-100:100,"px"))})}),Object(b.jsx)(p,{}),n===x.i.gz2otis&&Object(b.jsx)(R,{})]})},function(e){var t=e.num,n=Object(r.a)(e,w);return Object(b.jsx)("g",Object(c.a)(Object(c.a)({id:"platform"},n),{},{children:i.a.useMemo((function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("circle",{cx:0,cy:0,r:30,fill:"var(--rmg-theme-colour)"}),Object(b.jsx)("text",{className:"rmg-name__en",fontSize:38,dy:-9.5,children:t}),Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:13,dy:10,children:"\u7ad9\u53f0"}),Object(b.jsx)("text",{className:"rmg-name__en",fontSize:9,dy:21,children:"Platform"})]})}),[t])}))}),R=function(){var e=Object(h.useSelector)((function(e){return e.param.svgWidth})),t=Object(h.useSelector)((function(e){return e.param.svg_height}));return Object(b.jsxs)("g",{id:"otis_frame",strokeWidth:3,stroke:"black",children:[Object(b.jsx)("line",{y2:t,transform:"translate(".concat(e[x.c.RunIn]/2,",0)")}),Object(b.jsx)("line",{x2:e[x.c.RunIn],transform:"translate(0,90)"})]})}},36:function(e,t,n){"use strict";function c(e,t){if(null==e)return{};var n,c,r=function(e,t){if(null==e)return{};var n,c,r={},a=Object.keys(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,"a",(function(){return c}))},74:function(e,t,n){"use strict";var c=n(0),r=n(2),a=n(4),s=n.n(a),i=n(3),l=n(1);t.a=function(e){var t=function(e){switch(e){case"gz28":case"gz2otis":case"gz6":case"gzgf":return 60;case"gz1":case"gz3":return 40;case"gz4":case"gz5":case"gz1421":return 20;default:return 0}}(e.variant),n=s.a.useMemo((function(){switch(e.variant){case"gz1":return Object(l.jsx)("circle",{cy:-58,r:16,fill:"red"});case"gz28":case"gz2otis":return Object(l.jsx)("ellipse",{cy:-30,rx:24,ry:12,fill:"orange"});case"gz3":return Object(l.jsx)("rect",{x:-15,y:-55,height:30,width:30,fill:"red"});case"gz6":return Object(l.jsx)("ellipse",{cy:-30,rx:24,ry:12,fill:"white"});case"gz1421":return Object(l.jsx)("ellipse",{cy:-38,rx:24,ry:12,fill:"orange"});case"gz5":return Object(l.jsx)("rect",{x:-30,y:-70,height:30,width:60,fill:"orange"});case"gz4":return Object(l.jsx)("rect",{x:-50,y:-50,height:25,width:100,fill:"whitesmoke"});case"gzgf":return Object(l.jsx)("rect",{x:-30,y:-58,height:30,width:60,fill:"orange"});default:return Object(l.jsx)(l.Fragment,{})}}),[e.variant]);return Object(l.jsxs)("g",{transform:"translate(0,".concat("gz4"===e.variant?-20:0,")"),children:[Object(l.jsx)("rect",{id:"strip_gz",style:Object(r.a)({},"--height","".concat(t,"px"))}),Object(l.jsx)("g",{style:{transform:"translate(calc(var(--rmg-svg-width) / 2),var(--rmg-svg-height))"},children:e.isShowLight&&n}),!1!==e.isShowPSD&&Object(l.jsx)(j,Object(c.a)({},e))]})};var j=s.a.memo((function(e){var t,n=["gz28","gz2otis","gz6","gzgf"].includes(e.variant),c=function(e){switch(e){case"gz1":case"gz3":return"82px";case"gz4":return"65px";case"gz5":return"80px";case"gz1421":return"62px";default:return"58px"}}(e.variant);return Object(l.jsxs)("g",{textAnchor:"middle",fill:n?i.h.black:"var(--rmg-theme-fg)",style:(t={},Object(r.a)(t,"--psd-dy",c),Object(r.a)(t,"transform","translate(var(--translate-x), var(--translate-y))"),Object(r.a)(t,"--translate-x","calc(var(--rmg-svg-width) / 2 + 80px)"),Object(r.a)(t,"--translate-y","calc(var(--rmg-svg-height) - var(--psd-dy, 58px))"),t),children:[Object(l.jsx)("rect",{height:40,width:40,rx:4,x:-20,fill:n?"#fff":"var(--rmg-theme-colour)"}),Object(l.jsx)("text",{className:"rmg-name__en",fontSize:20,dy:12,children:e.isShowPSD}),Object(l.jsx)("text",{className:"rmg-name__zh",fontSize:12,dy:26,children:"\u5c4f\u853d\u95e8"}),Object(l.jsx)("text",{className:"rmg-name__en",fontSize:6.5,dy:36,children:"Screen Door"})]})}),(function(e,t){return e.variant===t.variant&&e.isShowPSD===t.isShowPSD}))},75:function(e,t,n){"use strict";var c=n(0),r=n(10),a=n(36),s=n(4),i=n.n(s),l=n(1),j=["lineNum","stnNum"];t.a=function(e){var t=e.lineNum,n=e.stnNum,s=Object(a.a)(e,j),u=15.03125,o=i.a.useRef(null),m=i.a.useState({width:u}),x=Object(r.a)(m,2),h=x[0],b=x[1];i.a.useEffect((function(){return b(o.current.getBBox())}),[t]);var d=h.width>u?u/h.width:1,f=2===t.length?d:1;return Object(l.jsx)("g",Object(c.a)(Object(c.a)({textAnchor:"middle",fontSize:13.5},s),{},{children:i.a.useMemo((function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("g",{transform:"translate(-9.25,0)scale(".concat(d,")"),children:Object(l.jsx)("text",{ref:o,className:"rmg-name__zh",children:t})}),Object(l.jsx)("g",{transform:"translate(9.25,0)scale(".concat(f,")"),children:Object(l.jsx)("text",{className:"rmg-name__zh",children:n})})]})}),[h.width,t,n])}))}}}]);
//# sourceMappingURL=runinGZMTR.cb2fc558.chunk.js.map