"use strict";(self.webpackChunkrail_map_generator=self.webpackChunkrail_map_generator||[]).push([[1273],{5387:function(n,t,e){e.r(t);var r=e(1413),s=e(5987),i=e(2982),a=e(2791),c=e(6169),l=e(184),o=["nextName"];t.default=function(){var n=(0,c.CG)((function(n){return n.helper})).routes,t=(0,c.CG)((function(n){return n.param})),e=t.svg_height-300,r=(0,a.useMemo)((function(){return n.filter((function(n){return n.includes(t.current_stn_idx)})).map((function(n){return n[n.indexOf(t.current_stn_idx)+("l"===t.direction?1:-1)]})).reduce((function(n,t){return n.includes(t)?n:n.concat(t)}),[])}),[n.toString(),t.current_stn_idx,t.direction]),s=(0,a.useMemo)((function(){return n.filter((function(n){return n.includes(t.current_stn_idx)})).map((function(n){return n[n.indexOf(t.current_stn_idx)+("l"===t.direction?-1:1)]})).reduce((function(n,t){return n.includes(t)?n:n.concat(t)}),[])}),[n.toString(),t.current_stn_idx,t.direction]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{}),(0,l.jsx)("g",{transform:"translate(0,".concat(e,")"),children:(0,l.jsx)(u,{prevStnIds:r,nextStnIds:s})})]})};var d=(0,a.memo)((function(){return(0,l.jsx)("defs",{children:(0,l.jsx)("marker",{id:"slope",viewBox:"-1.5 0 3 1.5",refY:.5,children:(0,l.jsx)("path",{d:"M0,0L1,1H-1z",fill:"var(--rmg-theme-colour)"})})})})),u=function(n){var t=(0,c.CG)((function(n){return n.param})),e=t.svgWidth.runin/2,r=1===n.nextStnIds.length&&["linestart","lineend"].includes(n.nextStnIds[0]),s=1===n.prevStnIds.length&&["linestart","lineend"].includes(n.prevStnIds[0]),i=n.nextStnIds.map((function(n){return t.stn_list[n].name})),a=10+(n.nextStnIds.length>1?-50*(i[0][0].split("\\").length-1)+-30*(i[0][1].split("\\").length-1):0),o=n.prevStnIds.map((function(n){return t.stn_list[n].name})),d=10+(n.prevStnIds.length>1?-50*(o[0][0].split("\\").length-1)+-30*(o[0][1].split("\\").length-1):0);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("g",{transform:"translate(0,110)",strokeWidth:12,fill:"none",children:[n.nextStnIds.length>1&&(0,l.jsx)("path",{stroke:"var(--rmg-theme-colour)",d:"l"===t.direction?"M".concat(t.svgWidth.runin/3,",125 L").concat(t.svgWidth.runin/6,",").concat(a," H36"):"M".concat(t.svgWidth.runin/3*2,",125 L").concat(t.svgWidth.runin/6*5,",").concat(a," H").concat(t.svgWidth.runin-36),markerEnd:"url(#slope)"}),n.prevStnIds.length>1&&(0,l.jsx)("path",{stroke:"gray",d:"l"===t.direction?"M".concat(t.svgWidth.runin/3*2,",125 L").concat(t.svgWidth.runin/6*5,",").concat(d," H").concat(t.svgWidth.runin-24):"M".concat(t.svgWidth.runin/3,",125 L").concat(t.svgWidth.runin/6,",").concat(d," H24")})]}),r&&"sh2020"!==t.info_panel_type?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{transform:"translate(0,220)",stroke:"gray",strokeWidth:12,d:"M24,16 H ".concat(t.svgWidth.runin-24)}),(0,l.jsx)("g",{transform:"translate(".concat("l"===t.direction?36:t.svgWidth.runin-36,",160)"),textAnchor:"l"===t.direction?"start":"end",children:(0,l.jsx)(h,{})})]}):s&&"sh2020"!==t.info_panel_type?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("path",{transform:"translate(0,220)",stroke:"var(--rmg-theme-colour)",strokeWidth:12,d:"l"===t.direction?"M ".concat(t.svgWidth.runin-24,",16 H 36"):"M24,16 H ".concat(t.svgWidth.runin-36),markerEnd:"url(#slope)"}),(0,l.jsx)("g",{transform:"translate(".concat("l"===t.direction?t.svgWidth.runin-36:36,",160)"),textAnchor:"l"===t.direction?"end":"start",children:(0,l.jsx)(h,{})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("g",{transform:"translate(0,220)",strokeWidth:12,children:[(0,l.jsx)("path",{stroke:"var(--rmg-theme-colour)",d:"M ".concat(e,",16 H ").concat("l"===t.direction?36:t.svgWidth.runin-36),markerEnd:"url(#slope)"}),(0,l.jsx)("path",{stroke:"gray",d:"M ".concat(e,",16 H ").concat("l"===t.direction?t.svgWidth.runin-24:24," ")})]}),(0,l.jsx)("g",{transform:"translate(".concat(e,",160)"),textAnchor:"middle",children:(0,l.jsx)(h,{})})]}),(s||!r)&&(0,l.jsx)(x,{stnIds:n.nextStnIds}),(r||!s)&&(0,l.jsx)(g,{stnIds:n.prevStnIds})]})},h=function(){var n=(0,c.CG)((function(n){return n.param})),t=n.stn_list[n.current_stn_idx].name;return(0,a.useMemo)((function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("text",{className:"rmg-name__zh",fontSize:112,children:t[0]}),(0,l.jsx)("text",{className:"rmg-name__en",fontSize:36,dy:50,children:t[1].replace("\\"," ")})]})}),(0,i.Z)(t))},m=function(n){var t=n.nextName,e=(0,s.Z)(n,o);return(0,l.jsx)("g",(0,r.Z)((0,r.Z)({},e),{},{children:(0,a.useMemo)((function(){return(0,l.jsxs)(l.Fragment,{children:[t[0].split("\\").map((function(n,e,r){return(0,l.jsx)("text",{className:"rmg-name__zh",fontSize:48,dy:-50*(r.length-1-e)-30*(t[1].split("\\").length-1),children:n},n)})),t[1].split("\\").map((function(n,t,e){return(0,l.jsx)("text",{className:"rmg-name__en",fontSize:24,dy:28+-30*(e.length-1-t),children:n},n)}))]})}),(0,i.Z)(t))}))},g=function(n){var t=(0,c.CG)((function(n){return n.param})),e=n.stnIds.map((function(n){return t.stn_list[n].name})),r=(n.stnIds.length>1?15:125)+-50*e.map((function(n){return n[0].split("\\").length})).reduce((function(n,t){return n+t}),-e.length)+-30*e.map((function(n){return n[1].split("\\").length})).reduce((function(n,t){return n+t}),-e.length),s=70+(n.stnIds.length>1?-50*(e[0][0].split("\\").length-1)+-30*(e[0][1].split("\\").length-1):0);return(0,l.jsxs)("g",{fill:"gray",textAnchor:"l"===t.direction?"end":"start",transform:"translate(".concat("l"===t.direction?t.svgWidth.runin-36:36,",0)"),children:[(0,l.jsx)(m,{nextName:e[0],transform:"translate(0,183)"}),n.stnIds.length>1&&(0,l.jsx)(m,{nextName:e[1],transform:"translate(0,".concat(s,")")}),(0,l.jsxs)("g",{transform:"translate(0, ".concat(r,")"),children:[(0,l.jsx)("text",{className:"rmg-name__zh",fontSize:22,children:"\u4e0a\u4e00\u7ad9"}),(0,l.jsx)("text",{className:"rmg-name__en",fontSize:12,dx:"l"===t.direction?-70:70,children:"Past Stop"})]})]})},x=function(n){var t=(0,c.CG)((function(n){return n.param})),e=n.stnIds.map((function(n){return t.stn_list[n].name})),r=(n.stnIds.length>1?15:125)+-50*e.map((function(n){return n[0].split("\\").length})).reduce((function(n,t){return n+t}),-e.length)+-30*e.map((function(n){return n[1].split("\\").length})).reduce((function(n,t){return n+t}),-e.length),s=70+(n.stnIds.length>1?-50*(e[0][0].split("\\").length-1)+-30*(e[0][1].split("\\").length-1):0);return(0,l.jsxs)("g",{textAnchor:"l"===t.direction?"start":"end",transform:"translate(".concat("l"===t.direction?36:t.svgWidth.runin-36,",0)"),children:[(0,l.jsx)(m,{nextName:t.stn_list[n.stnIds[0]].name,transform:"translate(0,183)"}),n.stnIds.length>1&&(0,l.jsx)(m,{nextName:t.stn_list[n.stnIds[1]].name,transform:"translate(0,".concat(s,")")}),(0,l.jsxs)("g",{transform:"translate(0, ".concat(r,")"),children:[(0,l.jsx)("text",{className:"rmg-name__zh",fontSize:22,children:"\u4e0b\u4e00\u7ad9"}),(0,l.jsx)("text",{className:"rmg-name__en",fontSize:12,dx:"l"===t.direction?70:-70,children:"Next Stop"})]})]})}}}]);
//# sourceMappingURL=runinSHMetro.ee34d8fb.chunk.js.map