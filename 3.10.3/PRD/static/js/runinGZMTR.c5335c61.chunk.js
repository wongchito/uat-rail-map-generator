(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[124],{179:function(e,t,n){"use strict";function c(e,t){if(null==e)return{};var n,c,r=function(e,t){if(null==e)return{};var n,c,r={},a=Object.keys(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(c=0;c<a.length;c++)n=a[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,"a",(function(){return c}))},236:function(e,t,n){"use strict";var c=n(3),r=n(9),a=n(0),s=n.n(a),i=n(6),l=n(2);t.a=function(e){var t=function(e){switch(e){case"gz28":case"gz2otis":case"gz6":case"gzgf":return 60;case"gz1":case"gz3":return 40;case"gz4":case"gz5":case"gz1421":return 20;default:return 0}}(e.variant),n=s.a.useMemo((function(){switch(e.variant){case"gz1":return Object(l.jsx)("circle",{cy:-58,r:16,fill:"red"});case"gz28":case"gz2otis":return Object(l.jsx)("ellipse",{cy:-30,rx:24,ry:12,fill:"orange"});case"gz3":return Object(l.jsx)("rect",{x:-15,y:-55,height:30,width:30,fill:"red"});case"gz6":return Object(l.jsx)("ellipse",{cy:-30,rx:24,ry:12,fill:"white"});case"gz1421":return Object(l.jsx)("ellipse",{cy:-38,rx:24,ry:12,fill:"orange"});case"gz5":return Object(l.jsx)("rect",{x:-30,y:-70,height:30,width:60,fill:"orange"});case"gz4":return Object(l.jsx)("rect",{x:-50,y:-50,height:25,width:100,fill:"whitesmoke"});case"gzgf":return Object(l.jsx)("rect",{x:-30,y:-58,height:30,width:60,fill:"orange"});default:return Object(l.jsx)(l.Fragment,{})}}),[e.variant]);return Object(l.jsxs)("g",{transform:"translate(0,".concat("gz4"===e.variant?-20:0,")"),children:[Object(l.jsx)("rect",{id:"strip_gz",style:Object(r.a)({},"--height","".concat(t,"px"))}),Object(l.jsx)("g",{style:{transform:"translate(calc(var(--rmg-svg-width) / 2),var(--rmg-svg-height))"},children:e.isShowLight&&n}),!1!==e.isShowPSD&&Object(l.jsx)(j,Object(c.a)({},e))]})};var j=s.a.memo((function(e){var t,n=["gz28","gz2otis","gz6","gzgf"].includes(e.variant),c=function(e){switch(e){case"gz1":case"gz3":return"82px";case"gz4":return"65px";case"gz5":return"80px";case"gz1421":return"62px";default:return"58px"}}(e.variant);return Object(l.jsxs)("g",{textAnchor:"middle",fill:n?i.h.black:"var(--rmg-theme-fg)",style:(t={},Object(r.a)(t,"--psd-dy",c),Object(r.a)(t,"transform","translate(var(--translate-x), var(--translate-y))"),Object(r.a)(t,"--translate-x","calc(var(--rmg-svg-width) / 2 + 80px)"),Object(r.a)(t,"--translate-y","calc(var(--rmg-svg-height) - var(--psd-dy, 58px))"),t),children:[Object(l.jsx)("rect",{height:40,width:40,rx:4,x:-20,fill:n?"#fff":"var(--rmg-theme-colour)"}),Object(l.jsx)("text",{className:"rmg-name__en",fontSize:20,dy:12,children:e.isShowPSD}),Object(l.jsx)("text",{className:"rmg-name__zh",fontSize:12,dy:26,children:"\u5c4f\u853d\u95e8"}),Object(l.jsx)("text",{className:"rmg-name__en",fontSize:6.5,dy:36,children:"Screen Door"})]})}),(function(e,t){return e.variant===t.variant&&e.isShowPSD===t.isShowPSD}))},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var c=n(3),r=n(30),a=n(179),s=n(0),i=n(2),l=["lineNum","stnNum"];function j(e){var t=e.lineNum,n=e.stnNum,j=Object(a.a)(e,l),u=Object(s.useRef)(null),m=Object(s.useRef)(null),o=Object(s.useState)({width:0}),x=Object(r.a)(o,2),b=x[0],h=x[1],f=Object(s.useState)({width:0}),d=Object(r.a)(f,2),O=d[0],g=d[1];Object(s.useEffect)((function(){h(u.current.getBBox()),g(m.current.getBBox())}),[t,n]);var p=15/Math.max(15,b.width),_=2===t.length&&2===n.length?p:15/Math.max(15,O.width);return Object(i.jsxs)("g",Object(c.a)(Object(c.a)({textAnchor:"middle",fontSize:13.5},j),{},{children:[Object(i.jsx)("g",{transform:"translate(-9.25,0)scale(".concat(p,")"),children:Object(i.jsx)("text",{ref:u,className:"rmg-name__zh",children:t})}),Object(i.jsx)("g",{transform:"translate(9.25,0)scale(".concat(_,")"),children:Object(i.jsx)("text",{ref:m,className:"rmg-name__zh",children:n})})]}))}},351:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(179),a=n(9),s=n(0),i=n.n(s),l=n(236),j=n(41),u=n(30),m=n(237),o=n(6),x=n(21),b=n(2),h=["curName","curSecName"],f=["secName"],d=["lineNum","stnNum"],O=["secName"],g=function(){var e,t=Object(x.c)((function(e){return e.param.svg_height})),n=Object(x.c)((function(e){return e.param.svgWidth})),c=Object(x.c)((function(e){return e.param.direction})),r=Object(x.c)((function(e){return e.param.info_panel_type})),l=Object(x.c)((function(e){return e.param.line_num})),j=Object(x.c)((function(e){return e.param.current_stn_idx})),m=Object(x.c)((function(e){return e.param.stn_list[j]})),h=i.a.useRef(null),f=Object(s.useState)({width:0}),d=Object(u.a)(f,2),O=d[0],g=d[1];Object(s.useEffect)((function(){return g(h.current.getBBox())}),[m.name[0],m.name[1]]);var _=m[c===o.m.left?"parents":"children"],N={name:"translate(".concat((c===o.m.left?1:-1)*n[o.c.RunIn]/4,",45)"),next:"translate(".concat((c===o.m.left?1:-1)*n[o.c.RunIn]/10,",45)")};return Object(b.jsxs)("g",{children:[Object(b.jsxs)("g",{transform:r===o.i.gz2otis?N.name:"",children:[Object(b.jsx)(p,{ref:h,curName:m.name,curSecName:m.secondaryName,style:Object(a.a)({},"--translate-y","".concat(.5*t-50-18*(m.name[1].split("\\").length-1)-(m.secondaryName?29:0),"px"))}),Object(b.jsx)(z,{lineNum:l,stnNum:m.num,style:(e={},Object(a.a)(e,"--translate-x","".concat((n[o.c.RunIn]+O.width)/2+55,"px")),Object(a.a)(e,"--translate-y","".concat(.5*t-30-18*(m.name[1].split("\\").length-1)-(m.secondaryName?29:0),"px")),e)})]}),Object(b.jsx)("g",{transform:r===o.i.gz2otis?N.next:"",children:_.includes("linestart")||_.includes("lineend")?Object(b.jsx)(b.Fragment,{}):1===_.length?Object(b.jsx)(y,{nextId:_[0],nameBBox:O}):Object(b.jsx)(v,{nextIds:_,nameBBox:O})})]})},p=i.a.forwardRef((function(e,t){var n=e.curName,a=e.curSecName,s=Object(r.a)(e,h);return Object(b.jsxs)("g",Object(c.a)(Object(c.a)({id:"big_name"},s),{},{children:[i.a.useMemo((function(){return Object(b.jsxs)("g",{ref:t,children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:90,children:n[0]}),Object(b.jsx)("g",{fontSize:36,className:"rmg-name__en",children:n[1].split("\\").map((function(e,t){return Object(b.jsx)("text",{dy:70+36*t,children:e},t)}))})]})}),[n]),a&&Object(b.jsx)(_,{secName:a,transform:"translate(0,".concat(70+36*n[1].split("\\").length,")")})]}))})),_=function(e){var t=e.secName,n=Object(r.a)(e,f),a=Object(s.useRef)(null),i=Object(s.useState)({x:0,width:0}),l=Object(u.a)(i,2),j=l[0],m=l[1];return Object(s.useEffect)((function(){return m(a.current.getBBox())}),[e.secName.toString()]),Object(b.jsxs)("g",Object(c.a)(Object(c.a)({},n),{},{children:[Object(b.jsxs)("g",{transform:"translate(0,4.5)",fontSize:36,children:[Object(b.jsx)("text",{textAnchor:"end",x:j.x-3,className:"rmg-name__zh",children:"("}),Object(b.jsx)("text",{textAnchor:"start",x:j.width+j.x+3,className:"rmg-name__zh",children:")"})]}),Object(b.jsxs)("g",{ref:a,textAnchor:"middle",children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:26,children:t[0]}),Object(b.jsx)("text",{dy:22,className:"rmg-name__en",fontSize:14,children:t[1]})]})]}))},z=function(e){var t=e.lineNum,n=e.stnNum,a=Object(r.a)(e,d);return Object(b.jsx)("g",Object(c.a)(Object(c.a)({id:"big_stn_num"},a),{},{children:i.a.useMemo((function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("path",{className:"rmg-stn rmg-stn--future",d:"M 0,12.95 V -12.95 H -12.95 a 12.95,12.95 0 0,0 0,25.9 h 25.9 a 12.95,12.95 0 0,0 0,-25.9 H 0 "}),Object(b.jsx)(m.a,{transform:"scale(1.4)",lineNum:t,stnNum:n})]})}),[t,n])}))},y=function(e){var t,n=e.nextId,c=e.nameBBox,r=Object(x.c)((function(e){return e.param.svgWidth})),l=Object(x.c)((function(e){return e.param.direction})),j=Object(x.c)((function(e){return e.param.stn_list[n]})),m=j.name,h=j.secondaryName,f=Object(s.useState)({width:0}),d=Object(u.a)(f,2),O=d[0],g=d[1],p=i.a.useRef(null);Object(s.useEffect)((function(){return g(p.current.getBBox())}),[m.toString()]);var _=m[0].length,z=(r[o.c.RunIn]-c.width)/2;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("g",{id:"big_next",children:[Object(b.jsxs)("g",{textAnchor:"middle",style:Object(a.a)({},"--translate-x",l===o.m.left?"80px":"".concat(_<=2?r[o.c.RunIn]-45-O.width-70:r[o.c.RunIn]-45-O.width-52.5,"px")),children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:35,children:"\u4e0b\u7ad9"}),Object(b.jsx)("text",{className:"rmg-name__en",fontSize:17,dy:30,children:"Next"})]}),Object(b.jsxs)("g",{textAnchor:"start",ref:p,style:Object(a.a)({},"--translate-x",l===o.m.left?"".concat(_<=2?150:132.5,"px"):"".concat(r[o.c.RunIn]-45-O.width,"px")),children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:35,children:m[0]}),Object(b.jsx)("g",{fontSize:17,children:m[1].split("\\").map((function(e,t){return Object(b.jsx)("text",{className:"rmg-name__en",dy:30+17*t,children:e},t)}))})]}),h&&Object(b.jsx)("g",{textAnchor:"middle",style:Object(a.a)({},"--translate-x",l===o.m.left?"".concat(_<=2?150:132.5,"px"):"".concat(r[o.c.RunIn]-45-O.width,"px")),children:Object(b.jsx)(N,{secName:h,transform:"translate(".concat(O.width/2,",").concat(30+17*m[1].split("\\").length+5,")")})})]}),Object(b.jsx)("path",{id:"arrow",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black",style:(t={},Object(a.a)(t,"--translate-x",l===o.m.left?"".concat((115+35*((_<=2?1:.5)+_)+z)/2-20,"px"):"".concat((r[o.c.RunIn]-45-O.width-(_<=2?105:87.5)+z+e.nameBBox.width+55+25.9)/2+20,"px")),Object(a.a)(t,"--rotate",l===o.m.left?"0deg":"180deg"),t)})]})},N=function(e){var t=e.secName,n=Object(r.a)(e,O),a=Object(s.useRef)(null),i=Object(s.useState)({x:0,width:0}),l=Object(u.a)(i,2),j=l[0],m=l[1];return Object(s.useEffect)((function(){return m(a.current.getBBox())}),[e.secName.toString()]),Object(b.jsxs)("g",Object(c.a)(Object(c.a)({},n),{},{children:[Object(b.jsxs)("g",{transform:"translate(0,2.5)",fontSize:25,children:[Object(b.jsx)("text",{textAnchor:"end",x:j.x-3,className:"rmg-name__zh",children:"("}),Object(b.jsx)("text",{textAnchor:"start",x:j.width+j.x+3,className:"rmg-name__zh",children:")"})]}),Object(b.jsxs)("g",{ref:a,children:[Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:18,children:t[0]}),Object(b.jsx)("text",{className:"rmg-name__en",fontSize:10,dy:15,children:t[1]})]})]}))},v=function(e){var t,n=e.nextIds,r=e.nameBBox,l=Object(x.c)((function(e){return e.helper})).routes,m=Object(x.c)((function(e){return e.param.svgWidth})),h=Object(x.c)((function(e){return e.param.direction})),f=Object(x.c)((function(e){return e.param.stn_list})),d=n.map((function(e){return f[e].name})),O=Object(s.useState)({width:0}),g=Object(u.a)(O,2),p=g[0],_=g[1],z=Object(s.useRef)([]);Object(s.useEffect)((function(){_((function(e){return Object(c.a)(Object(c.a)({},e),{},{width:0})})),z.current.forEach((function(e){var t=null===e||void 0===e?void 0:e.getBBox();_((function(e){return t?e.width>t.width?e:t:e}))}))}),[d.toString()]);var y=e.nextIds.map((function(e){return l.reduce((function(t,n){return n.includes(e)?t.concat(n.filter((function(e){return!["linestart","lineend"].includes(e)})).slice(h===o.m.left?0:-1)[0]):t}),[])})),N=Math.max.apply(Math,Object(j.a)(d.map((function(e){return e[0].length})))),v=(m[o.c.RunIn]-r.width)/2;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("g",{id:"big_next_2",children:d.map((function(e,t){return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsxs)("g",{textAnchor:"middle",style:Object(a.a)({},"--translate-x",h===o.m.left?"72px":"".concat(m[o.c.RunIn]-45-p.width-41,"px")),children:[Object(b.jsx)("text",{className:"rmg-name__zh",children:"\u4e0b\u7ad9"}),Object(b.jsx)("text",{className:"rmg-name__en",y:22,children:"Next"})]}),Object(b.jsxs)("g",{ref:function(e){return z.current[t]=e},textAnchor:"start",style:Object(a.a)({},"--translate-x",h===o.m.left?"113px":"".concat(m[o.c.RunIn]-45-p.width,"px")),children:[Object(b.jsx)("text",{className:"rmg-name__zh",children:e[0]}),e[1].split("\\").map((function(e,t){return Object(b.jsx)("text",{className:"rmg-name__en",y:22+13*t,children:e},t)})),Object(b.jsx)("text",{className:"rmg-name__zh",y:-35,children:y[t].map((function(e){return f[e].name[0]})).join("/")+"\u65b9\u5411"}),Object(b.jsx)("text",{className:"rmg-name__en rmg-name__gzmtr--next2-dest",y:-20,children:"Towards "+y[t].map((function(e){return f[e].name[1]})).join("/").replace("\\"," ")})]})]},t)}))}),Object(b.jsx)("path",{id:"arrow",d:"M 60,60 L 0,0 L 60,-60 H 100 L 55,-15 H 160 V 15 H 55 L 100,60z",fill:"black",style:(t={},Object(a.a)(t,"--translate-x",h===o.m.left?"".concat((99+27*(1+N)+v)/2-20,"px"):"".concat((m[o.c.RunIn]-45-p.width-41-27+v+e.nameBBox.width+55+25.9)/2+20,"px")),Object(a.a)(t,"--rotate",h===o.m.left?"0deg":"180deg"),t)})]})},w=["num"],S=(t.default=function(){var e=Object(x.c)((function(e){return e.param.svgWidth})),t=Object(x.c)((function(e){return e.param.direction})),n=Object(x.c)((function(e){return e.param.info_panel_type})),c=Object(x.c)((function(e){return e.param.platform_num})),r=Object(x.c)((function(e){return e.param.psd_num})),s={platform:"translate(".concat(t===o.m.left?50:-50,",45)")};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.a,{variant:n,isShowLight:n!==o.i.gz2otis,isShowPSD:n!==o.i.gz2otis&&r}),Object(b.jsx)("g",{transform:n===o.i.gz2otis?s.platform:"",children:Object(b.jsx)(S,{num:c,style:Object(a.a)({},"--translate-x","".concat(t===o.m.left?e[o.c.RunIn]-100:100,"px"))})}),Object(b.jsx)(g,{}),n===o.i.gz2otis&&Object(b.jsx)(B,{})]})},function(e){var t=e.num,n=Object(r.a)(e,w);return Object(b.jsx)("g",Object(c.a)(Object(c.a)({id:"platform"},n),{},{children:i.a.useMemo((function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("circle",{cx:0,cy:0,r:30,fill:"var(--rmg-theme-colour)"}),Object(b.jsx)("text",{className:"rmg-name__en",fontSize:38,dy:-9.5,children:t}),Object(b.jsx)("text",{className:"rmg-name__zh",fontSize:13,dy:10,children:"\u7ad9\u53f0"}),Object(b.jsx)("text",{className:"rmg-name__en",fontSize:9,dy:21,children:"Platform"})]})}),[t])}))}),B=function(){var e=Object(x.c)((function(e){return e.param.svgWidth})),t=Object(x.c)((function(e){return e.param.svg_height}));return Object(b.jsxs)("g",{id:"otis_frame",strokeWidth:3,stroke:"black",children:[Object(b.jsx)("line",{y2:t,transform:"translate(".concat(e[o.c.RunIn]/2,",0)")}),Object(b.jsx)("line",{x2:e[o.c.RunIn],transform:"translate(0,90)"})]})}}}]);
//# sourceMappingURL=runinGZMTR.c5335c61.chunk.js.map