(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[70],{114:function(t,e,n){"use strict";n.r(e);var r=n(7),a=n(12),c=n(3),s=n(15),i=n(1);e.default=Object(c.memo)((function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(o,{}),Object(i.jsx)(l,{})]})}));var o=Object(c.memo)((function(){return Object(i.jsx)("defs",{children:Object(i.jsx)("marker",{id:"slope",viewBox:"-1.5 0 3 1.5",refY:.5,children:Object(i.jsx)("path",{d:"M0,0L1,1H-1z",fill:"var(--rmg-theme-colour)"})})})})),l=function(){var t=Object(c.useContext)(s.a),e=t.param,n=t.routes,o=Object(a.a)(new Set(n.filter((function(t){return t.includes(e.current_stn_idx)})).map((function(t){var n=t.filter((function(t){return!["linestart","lineend"].includes(t)}));return"l"===e.direction?n[0]:n.reverse()[0]})))),l=[o.map((function(t){return e.stn_list[t].name[0]})),o.map((function(t){return e.stn_list[t].name[1]}))],f=Object(c.useRef)(null),u=Object(c.useState)({width:0}),b=Object(r.a)(u,2),x=b[0],O=b[1];Object(c.useEffect)((function(){return O(f.current.getBBox())}),Object(a.a)(l.flat()));var g=e.svgWidth.destination/2,_=g-10-36-x.width>=162.5&&g-10-36-264>=162.5?g:"l"===e.direction?(e.svgWidth.destination+x.width-264)/2:(e.svgWidth.destination-x.width+264)/2;return Object(i.jsxs)("g",{transform:"translate(0,".concat(e.svg_height-300,")"),children:[Object(i.jsx)("path",{stroke:"var(--rmg-theme-colour)",strokeWidth:12,d:"l"===e.direction?"M".concat(e.svgWidth.destination-24,",16 H 36"):"M24,16 H ".concat(e.svgWidth.destination-36),transform:"translate(0,220)",markerEnd:"url(#slope)"}),Object(i.jsx)(m,{ref:f,destNames:l}),!1!==e.platform_num&&Object(i.jsx)("g",{transform:"translate(".concat(_,",0)"),children:Object(i.jsx)(j,{})}),e.line_name[0].match(/^[\w\d]+/)?Object(i.jsx)(h,{}):Object(i.jsx)(d,{})]})},m=Object(c.forwardRef)((function(t,e){var n=Object(c.useContext)(s.a).param;return Object(i.jsx)("g",{ref:e,transform:"translate(".concat("l"===n.direction?36:n.svgWidth.destination-36,",145)"),children:Object(c.useMemo)((function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("g",{transform:"translate(0,".concat(2===t.destNames[0].length?-20:20,")"),children:Object(i.jsx)("path",{d:"M60,60L0,0L60-60H100L55-15H160V15H55L100,60z",fill:"black",transform:"rotate(".concat("l"===n.direction?0:180,")scale(0.8)")})}),Object(i.jsxs)("g",{textAnchor:"l"===n.direction?"start":"end",transform:"translate(".concat("l"===n.direction?148:-148,",25)"),children:[t.destNames[0].map((function(t,e){return Object(i.jsx)("text",{className:"rmg-name__zh",fontSize:70,dy:-100*e+7,children:"\u5f80"+t},e)})),t.destNames[1].map((function(t,e){return Object(i.jsx)("text",{className:"rmg-name__en",fontSize:25,dy:-100*e+40,children:"To "+t},e)}))]})]})}),[n.direction].concat(Object(a.a)(t.destNames.flat())))})})),j=function(){var t=Object(c.useContext)(s.a).param;return Object(i.jsxs)("g",{transform:"translate(".concat(-102.5,",150)"),children:[Object(i.jsx)("circle",{r:60,fill:"none",stroke:"black",strokeWidth:2}),Object(i.jsx)("text",{className:"rmg-name__en",dominantBaseline:"central",fontSize:120,textAnchor:"middle",children:t.platform_num}),Object(i.jsx)("text",{className:"rmg-name__zh",fontSize:100,dominantBaseline:"central",x:65,children:"\u7ad9\u53f0"})]})},d=function(){var t=Object(c.useContext)(s.a).param,e=t.line_name,n="l"===t.direction?t.svgWidth.destination-36-132:168;return Object(c.useMemo)((function(){return Object(i.jsxs)("g",{transform:"translate(".concat(n,",92)"),children:[Object(i.jsx)("rect",{fill:"var(--rmg-theme-colour)",x:-132,width:264,height:120}),Object(i.jsxs)("g",{textAnchor:"middle",transform:"translate(0,68)",fill:"var(--rmg-theme-fg)",children:[Object(i.jsx)("text",{className:"rmg-name__zh",fontSize:68,children:e[0]}),Object(i.jsx)("text",{className:"rmg-name__en",fontSize:30,dy:42,children:e[1]})]})]})}),[n].concat(Object(a.a)(e)))},h=function(){var t=Object(c.useContext)(s.a).param,e=t.line_name[0].match(/^[\w\d]+|.+/g),n=Object(r.a)(e,2),o=n[0],l=n[1],m="l"===t.direction?t.svgWidth.destination-36-210:90;return Object(c.useMemo)((function(){return Object(i.jsxs)("g",{transform:"translate(".concat(m,",92)"),children:[Object(i.jsx)("rect",{fill:"var(--rmg-theme-colour)",x:-54,width:108,height:120}),Object(i.jsx)("text",{className:"rmg-name__zh",fill:"var(--rmg-theme-fg)",fontSize:96,textAnchor:"middle",dominantBaseline:"central",transform:"translate(0,60)",letterSpacing:-5,children:o}),Object(i.jsxs)("g",{textAnchor:"start",transform:"translate(74,68)",children:[Object(i.jsx)("text",{className:"rmg-name__zh",fontSize:68,children:l}),Object(i.jsx)("text",{className:"rmg-name__en",fontSize:30,dy:42,children:t.line_name[1]})]})]})}),[m].concat(Object(a.a)(t.line_name)))}}}]);
//# sourceMappingURL=destinationSHMetro.608feb3f.chunk.js.map