{"version":3,"sources":["panels/design/list-mtr.tsx"],"names":["useStyles","makeStyles","theme","createStyles","divider","margin","spacing","nested","paddingLeft","grid","paddingBottom","paddingRight","width","memo","NamePosLi","CustomiseDest","t","useTranslation","classes","reduxDispatch","useDispatch","namePosition","useSelector","store","param","namePosMTR","dispatch","useContext","ParamContext","useMemo","primary","edge","color","checked","isStagger","onChange","_","type","staggerStationNames","component","disablePadding","className","orientation","flexItem","variant","onClick","flipStationNames","customisedMtrDestination","customiseMTRDest","React","useState","isLegacy","terminal","open","setOpen","handleNameChange","index","value","target","map","val","i","customiseDestinationName","button","prevOpen","in","toggleLineNameBeforeDestination","customisedName","unmountOnExit","container","justify","alignItems","item","xs","sm","label"],"mappings":"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","file":"static/js/panelDesignMTR.8bcde341.chunk.js","sourcesContent":["import React, { useContext, memo, useMemo, ChangeEvent } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { ParamContext } from '../../context';\nimport {\n    Divider,\n    List,\n    ListItem,\n    ListItemIcon,\n    Icon,\n    ListItemText,\n    ListItemSecondaryAction,\n    Switch,\n    Collapse,\n    makeStyles,\n    createStyles,\n    TextField,\n    Grid,\n    Button,\n} from '@material-ui/core';\nimport { Name } from '../../constants/constants';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../redux';\nimport {\n    customiseDestinationName,\n    flipStationNames,\n    toggleLineNameBeforeDestination,\n    staggerStationNames,\n} from '../../redux/param/action';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        divider: {\n            margin: theme.spacing(0, 2),\n        },\n        nested: {\n            paddingLeft: theme.spacing(5),\n        },\n        grid: {\n            paddingLeft: theme.spacing(8),\n            paddingBottom: theme.spacing(1),\n            paddingRight: theme.spacing(2),\n            '& .MuiFormControl-root': {\n                width: '100%',\n            },\n        },\n    })\n);\n\nexport default memo(function DesignListMTR() {\n    return (\n        <>\n            <NamePosLi />\n            <Divider />\n            <CustomiseDest />\n        </>\n    );\n});\n\nconst NamePosLi = () => {\n    const { t } = useTranslation();\n    const classes = useStyles();\n    const reduxDispatch = useDispatch();\n\n    const namePosition = useSelector((store: RootState) => store.param.namePosMTR);\n\n    const { dispatch } = useContext(ParamContext);\n\n    return useMemo(() => {\n        const handleStaggerChange = (_: ChangeEvent, checked: boolean) => {\n            dispatch({ type: 'SET_TEXT_STAGGER', checked });\n            reduxDispatch(staggerStationNames(checked));\n        };\n\n        const handleFlip = () => {\n            dispatch({ type: 'SET_TEXT_FLIP' });\n            reduxDispatch(flipStationNames());\n        };\n\n        return (\n            <>\n                <ListItem>\n                    <ListItemIcon>\n                        <Icon>text_rotation_none</Icon>\n                    </ListItemIcon>\n                    <ListItemText primary={t('design.txtFlip.text')} />\n                    <ListItemSecondaryAction>\n                        <Switch\n                            edge=\"end\"\n                            color=\"primary\"\n                            checked={namePosition.isStagger}\n                            onChange={handleStaggerChange}\n                        />\n                    </ListItemSecondaryAction>\n                </ListItem>\n\n                <List component=\"div\" disablePadding>\n                    <ListItem className={classes.nested}>\n                        <ListItemText primary={t('design.txtFlip.flipText')} />\n                        <Divider orientation=\"vertical\" flexItem className={classes.divider} />\n                        <Button variant=\"outlined\" color=\"primary\" onClick={handleFlip}>\n                            {t('design.txtFlip.flip')}\n                        </Button>\n                    </ListItem>\n                </List>\n            </>\n        );\n    }, [namePosition.isStagger, classes.nested, classes.divider, dispatch, reduxDispatch, t]);\n};\n\nconst CustomiseDest = () => {\n    const { t } = useTranslation();\n    const classes = useStyles();\n    const reduxDispatch = useDispatch();\n\n    const customisedMtrDestination = useSelector((store: RootState) => store.param.customiseMTRDest);\n    const { dispatch } = React.useContext(ParamContext);\n    const [open, setOpen] = React.useState(\n        customisedMtrDestination.isLegacy || customisedMtrDestination.terminal !== false\n    );\n\n    return useMemo(() => {\n        const handleShowNameChange = (_: ChangeEvent, checked: boolean) => {\n            dispatch({ type: 'SET_DEST_LEGACY', isLegacy: checked });\n            reduxDispatch(toggleLineNameBeforeDestination(checked));\n        };\n\n        const handleIsCustomisedChange = (_: ChangeEvent, checked: boolean) => {\n            const customisedName = checked ? (['', ''] as Name) : false;\n            dispatch({ type: 'SET_TERMINAL_OVERRIDE', terminal: customisedName });\n            reduxDispatch(customiseDestinationName(customisedName));\n        };\n\n        const handleNameChange =\n            (index: number) =>\n            ({ target: { value } }: ChangeEvent<HTMLInputElement>) => {\n                let terminal =\n                    customisedMtrDestination.terminal !== false\n                        ? (customisedMtrDestination.terminal.map((val, i) => (i === index ? value : val)) as Name)\n                        : false;\n                dispatch({ type: 'SET_TERMINAL_OVERRIDE', terminal });\n                reduxDispatch(customiseDestinationName(terminal));\n            };\n\n        return (\n            <>\n                <ListItem button onClick={() => setOpen(prevOpen => !prevOpen)}>\n                    <ListItemIcon>\n                        <Icon>text_fields</Icon>\n                    </ListItemIcon>\n                    <ListItemText primary={t('design.MTRDest.button')} />\n                    {open ? <Icon color=\"action\">expand_less</Icon> : <Icon color=\"action\">expand_more</Icon>}\n                </ListItem>\n                <Collapse in={open}>\n                    <List component=\"div\" disablePadding>\n                        <ListItem className={classes.nested}>\n                            <ListItemText primary={t('design.MTRDest.legacy')} />\n                            <ListItemSecondaryAction>\n                                <Switch\n                                    color=\"primary\"\n                                    edge=\"end\"\n                                    onChange={handleShowNameChange}\n                                    checked={customisedMtrDestination.isLegacy}\n                                />\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                        <ListItem className={classes.nested}>\n                            <ListItemText primary={t('design.MTRDest.terminal')} />\n                            <ListItemSecondaryAction>\n                                <Switch\n                                    color=\"primary\"\n                                    edge=\"end\"\n                                    checked={customisedMtrDestination.terminal !== false}\n                                    onChange={handleIsCustomisedChange}\n                                />\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                        <Collapse in={customisedMtrDestination.terminal !== false} unmountOnExit>\n                            <Grid\n                                container\n                                spacing={1}\n                                justify=\"center\"\n                                alignItems=\"flex-start\"\n                                className={classes.grid}\n                            >\n                                <Grid item xs={12} sm={6}>\n                                    <TextField\n                                        label={t('design.MTRDest.zh')}\n                                        value={\n                                            customisedMtrDestination.terminal\n                                                ? customisedMtrDestination.terminal[0]\n                                                : ''\n                                        }\n                                        onChange={handleNameChange(0)}\n                                    />\n                                </Grid>\n                                <Grid item xs={12} sm={6}>\n                                    <TextField\n                                        label={t('design.MTRDest.en')}\n                                        value={\n                                            customisedMtrDestination.terminal\n                                                ? customisedMtrDestination.terminal[1]\n                                                : ''\n                                        }\n                                        onChange={handleNameChange(1)}\n                                    />\n                                </Grid>\n                            </Grid>\n                        </Collapse>\n                    </List>\n                </Collapse>\n            </>\n        );\n    }, [\n        customisedMtrDestination.isLegacy,\n        customisedMtrDestination.terminal,\n        open,\n        classes.nested,\n        classes.grid,\n        t,\n        dispatch,\n        reduxDispatch,\n    ]);\n};\n"],"sourceRoot":""}