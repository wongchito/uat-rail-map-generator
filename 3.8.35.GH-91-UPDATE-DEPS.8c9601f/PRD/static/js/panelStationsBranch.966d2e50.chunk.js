(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[88],{289:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(0),s=n.n(i),a=n(119),c=n(138),d=n(158),l=n(149),o=n(114),h=n(275),j=n(151),b=n(274),O=n(148),u=n(292),p=n(62),x=n(28),f=n(3),g=Object(c.a)((function(){return Object(d.a)({select:{width:166}})}));e.default=function(t){var e=Object(a.a)().t;return Object(f.jsxs)(l.a,{children:[Object(f.jsx)(o.a,{children:Object(f.jsx)(h.a,{children:Object(f.jsx)("h3",{style:{margin:0},children:e("stations.edit.branch.left")})})}),Object(f.jsx)(m,{stnId:t.stnId,direction:"left"}),Object(f.jsx)(j.a,{}),Object(f.jsx)(o.a,{children:Object(f.jsx)(h.a,{children:Object(f.jsx)("h3",{style:{margin:0},children:e("stations.edit.branch.right")})})}),Object(f.jsx)(m,{stnId:t.stnId,direction:"right"})]})};var m=function(t){var e=Object(i.useContext)(x.a).rmgStyle,n=Object(i.useContext)(x.b).param.stn_list[t.stnId].branch[t.direction];return s.a.useMemo((function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,Object(r.a)({},t)),n[0]&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(I,Object(r.a)({},t)),"shmetro"!==e&&Object(f.jsx)(_,Object(r.a)({},t))]})]})}),[t.stnId,t.direction,n[0]])},v=function(t){var e=Object(a.a)().t,n=g(),r=s.a.useContext(x.b),i=r.param,c=r.dispatch,d=i.stn_list[t.stnId].branch[t.direction],l=function(e){var n=e.target.value;"na"!==n&&n!==d[0]&&c({type:"UPDATE_STATION_BRANCH_TYPE",stnId:t.stnId,direction:t.direction,branchType:n})};return s.a.useMemo((function(){return Object(f.jsxs)(o.a,{children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(O.a,{children:"merge_type"})}),Object(f.jsx)(h.a,{primary:e("stations.edit.branch.type.title")}),Object(f.jsxs)(u.a,{native:!0,onChange:l,value:d[0]||"na",className:n.select,children:[Object(f.jsx)("option",{value:"na",disabled:0!==d.length,children:e("stations.edit.branch.type.na")}),Object(f.jsx)("option",{value:"through",disabled:0===d.length,children:e("stations.edit.branch.type.through")}),Object(f.jsx)("option",{value:"nonthrough",disabled:0===d.length,children:e("stations.edit.branch.type.nonThrough")})]})]})}),[t.stnId,d[0]])},I=function(t){var e=Object(a.a)().t,n=g(),r=Object(i.useContext)(x.a).rmgStyle,c=Object(i.useContext)(x.b),d=c.param,l=c.dispatch,j=d.stn_list[t.stnId],m=j.branch[t.direction],v="left"===t.direction?j.parents:j.children,I=function(e){var n=e.target.value;if(m[1]!==n){var r,i=n,s=d.stn_list;if("right"===t.direction){for(;1===s[i].parents.length;)i=s[i].children[0];r=s[i].parents[v.indexOf(n)]}else{for(;1===s[i].children.length;)i=s[i].parents[0];r=s[i].children[v.indexOf(n)]}l({type:"UPDATE_STATION_BRANCH_FIRST",branches:[{stnId:t.stnId,direction:t.direction,first:n},{stnId:i,direction:"left"===t.direction?"right":"left",first:r}]})}};return s.a.useMemo((function(){return Object(f.jsxs)(o.a,{children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(O.a,{style:{transform:"left"===t.direction?"scale(-1)":"scale(1)"},children:"share"})}),Object(f.jsx)(h.a,{primary:e("stations.edit.branch.first")}),Object(f.jsx)(u.a,{native:!0,onChange:I,value:m[1]||v[0],className:n.select,children:v.map((function(t){return Object(f.jsx)("option",{value:t,children:Object(p.a)(d.stn_list[t],r)},t)}))})]})}),[t.stnId,m[1],v.toString()])},_=function(t){var e=Object(a.a)().t,n=g(),r=s.a.useContext(x.b),i=r.param,c=r.dispatch,d=i.stn_list[t.stnId],l=d.branch[t.direction],j="left"===t.direction?d.parents:d.children,p=function(e){var n="lower"===e.target.value?1:0;if(j.indexOf(l[1])!==n){var r=l[1],s=i.stn_list;if("right"===t.direction){for(;1===s[r].parents.length;)r=s[r].children[0];c({type:"UPDATE_STATION_BRANCH_POS",right:t.stnId,left:r})}else{for(;1===s[r].children.length;)r=s[r].parents[0];c({type:"UPDATE_STATION_BRANCH_POS",left:t.stnId,right:r})}}};return s.a.useMemo((function(){return Object(f.jsxs)(o.a,{children:[Object(f.jsx)(b.a,{children:Object(f.jsx)(O.a,{children:"swap_vert"})}),Object(f.jsx)(h.a,{primary:e("stations.edit.branch.pos.title")}),Object(f.jsx)(u.a,{native:!0,onChange:p,value:1===j.indexOf(l[1])?"lower":"upper",className:n.select,children:["upper","lower"].map((function(t){return Object(f.jsx)("option",{value:t,children:e("stations.edit.branch.pos."+t)},t)}))})]})}),[t.stnId,l[1],j.toString()])}}}]);
//# sourceMappingURL=panelStationsBranch.966d2e50.chunk.js.map