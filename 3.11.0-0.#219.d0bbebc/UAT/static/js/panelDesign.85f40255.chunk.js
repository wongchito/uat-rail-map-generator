"use strict";(self.webpackChunkrail_map_generator=self.webpackChunkrail_map_generator||[]).push([[5708],{9505:function(e,n,t){t.d(n,{Z:function(){return V}});var r=t(1413),i=t(885),o=t(2982),a=t(4942),s=t(2791),c=t(2020),l=t(8596),u=t(2288),d=t(3594),h=t(5159),p=t(4026),m=t(2067),f=t(7447),x=t(269),g=t(6513),j=t(8096),Z=t(9526),v=t(9418),y=t(5088),C=t(908),b=t(159),w=t(8192),E=t(1370),N=t(5861),S=t(7757),k=t.n(S),R=t(9038),U=t(1859),A=t(2734),M=t(9403),L=t(7253),F=t(713),I=t(3334),$=t(184),H=(0,l.Z)((function(){return(0,u.Z)({cityItem:{display:"flex",flexDirection:"row",alignItems:"center"},menuItemSpan:{padding:"0 .3rem"},button:{borderRadius:"50%",height:24,width:24,minWidth:0,marginRight:8,padding:0},inputColour:{position:"absolute",width:0,height:0,left:27,top:32},buttonContainer:{display:"flex",flexShrink:1}})})),T=function(e){var n=(0,c.$)(),t=n.t,a=n.i18n,l=H(),u=function(e){var n=s.useState([]),t=(0,i.Z)(n,2),o=t[0],a=t[1],c=fetch("https://railmapgen.github.io/rmg-palette/resources/palettes/".concat(e[0],".json")).then((function(e){return e.json()})).catch((function(){return[]}));return(0,s.useEffect)((function(){"undefined"!==typeof e[0]&&(0,N.Z)(k().mark((function n(){var t;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c;case 2:t=n.sent,a("other"===e[0]?[(0,r.Z)((0,r.Z)({},t[0]),{},{colour:e[2],fg:e[3]||F.AJ.white})]:t);case 4:case"end":return n.stop()}}),n)})))()}),[e.toString()]),o}(e.theme);(0,s.useEffect)((function(){if(0!==u.length&&!u.filter((function(n){return n.id===e.theme[1]})).length){var n=u[0],t=n.id,r=n.colour,i=n.fg,o=[e.theme[0],t,r,i||F.AJ.white];e.onUpdate("theme",o)}}),[u]);return(0,$.jsxs)(m.Z,{component:"div",disablePadding:!0,children:[(0,$.jsx)(_,{value:e.theme[0],onChange:function(n){return e.onUpdate("theme",[n.target.value].concat((0,o.Z)(e.theme.slice(1))))}}),(0,$.jsx)(f.Z,{variant:"middle"}),(0,$.jsxs)(j.Z,{children:[(0,$.jsx)(b.Z,{primary:t("colour.line")}),(0,$.jsx)(R.Z,{select:!0,style:{width:166},onChange:function(n){var t=n.target.value,r=u.filter((function(e){return e.id===t}))[0],i=r.colour,o=r.fg,a=[e.theme[0],t,i,o||F.AJ.white];e.onUpdate("theme",a)},value:e.theme[1],disabled:"other"===e.theme[0],children:u.map((function(e){return(0,$.jsx)(U.Z,{value:e.id,children:(0,$.jsx)("span",{className:l.menuItemSpan,style:{backgroundColor:e.colour,color:e.fg||F.AJ.white},children:(0,L.YL)(e.name,a.languages)})},e.id)}))})]})]})},W=function(e){var n=(0,c.$)().t,t=H(),r=(0,s.useState)(e.theme[2]),a=(0,i.Z)(r,2),l=a[0],u=a[1];(0,s.useEffect)((function(){return u(e.theme[2])}),[e.theme[2]]);return(0,$.jsxs)(m.Z,{component:"div",disablePadding:!0,children:[(0,$.jsxs)(j.Z,{children:[(0,$.jsx)(b.Z,{primary:n("colour.colour")}),(0,$.jsxs)("div",{className:t.buttonContainer,children:[(0,$.jsx)("input",{type:"color",id:"input-color",value:e.theme[2],onChange:function(n){var t=n.target.value;e.onUpdate("theme",["other","other",t,e.theme[3]])},className:t.inputColour,style:{opacity:0}}),(0,$.jsx)("label",{htmlFor:"input-color",children:(0,$.jsx)(A.ZP,{title:n("colour.tooltip")||"","aria-label":"colour picker",children:(0,$.jsx)(g.Z,{className:t.button,style:{backgroundColor:e.theme[2],borderColor:e.theme[3]||F.AJ.white},variant:"contained",component:"span",children:" "})})})]}),(0,$.jsx)(R.Z,{error:!(null!==l&&void 0!==l&&l.match(/^#[0-9a-fA-F]{6}$/g)),style:{width:85},onChange:function(n){var t=n.target.value;if(null!==t.match(/^#[0-9a-fA-F]{0,6}$/))if(u(t),"other"!==e.theme[0])if(null!==t.match(/^#[0-9a-fA-f]{6}$/)){var r=["other","other",t,e.theme[3]];e.onUpdate("theme",r)}else{var i=["other","other"].concat((0,o.Z)(e.theme.slice(2)));e.onUpdate("theme",i)}else if(null!==t.match(/^#[0-9a-fA-F]{6}$/)){var a=e.theme.map((function(e,n){return 2===n?t:e}));e.onUpdate("theme",a)}},value:null===l||void 0===l?void 0:l.toUpperCase()})]}),(0,$.jsx)(f.Z,{variant:"middle"}),(0,$.jsxs)(j.Z,{children:[(0,$.jsx)(b.Z,{primary:n("colour.fg")}),(0,$.jsxs)(M.Z,{native:!0,style:{width:85},label:n("colour.fg"),onChange:function(n){var t=["other","other",e.theme[2],n.target.value];e.onUpdate("theme",t)},value:e.theme[3]||F.AJ.white,children:[(0,$.jsx)("option",{value:"#fff",children:n("colour.fgWhite")}),(0,$.jsx)("option",{value:"#000",children:n("colour.fgBlack")})]})]})]})},_=function(e){var n=(0,c.$)(),t=n.t,r=n.i18n,i=H(),o=(0,I.CG)((function(e){return e.data.paletteCityConfig})),a=(0,s.useMemo)((function(){return o.map((function(e){return(0,$.jsx)(U.Z,{value:e.id,children:(0,$.jsxs)("span",{className:i.cityItem,children:[(0,$.jsx)(P,{code:e.country}),(0,$.jsx)("span",{children:(0,L.YL)(e.name,r.languages)})]})},e.id)}))}),[]);return(0,$.jsxs)(j.Z,{children:[(0,$.jsx)(b.Z,{primary:t("colour.city")}),(0,$.jsx)(R.Z,{select:!0,style:{width:166},value:e.value,onChange:e.onChange,children:a})]})},G=(0,l.Z)((function(){return(0,u.Z)({img:{height:20,marginRight:"0.2rem"}})}));function P(e){var n=(0,c.$)().i18n,t=G(),r=[];return r=2===e.code.length?e.code.toUpperCase().split("").map((function(e){return((e.codePointAt(0)||0)+127397).toString(16).toUpperCase()})):["1F3F4"].concat(e.code.toUpperCase().split("").map((function(e){return((e.codePointAt(0)||0)+917536).toString(16).toUpperCase()})),"E007F"),[F.sp.ChineseCN,F.sp.ChineseSimp].includes(n.language)&&"TW"===e.code&&(r=["1F3F4"]),-1!==navigator.platform.indexOf("Win32")||-1!==navigator.platform.indexOf("Win64")?(0,$.jsx)("img",{src:"/uat-rail-map-generator"+"/images/flags/".concat(r.join("-"),".svg"),className:t.img,alt:"Flag of ".concat(e.code)}):(0,$.jsx)("span",{children:String.fromCodePoint.apply(String,(0,o.Z)(r.map((function(e){return parseInt(e,16)}))))})}var B=(0,l.Z)((function(e){return(0,u.Z)({contentWrapper:(0,a.Z)({display:"flex",overflow:"hidden",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},e.breakpoints.down("xs"),{flexDirection:"column"}),contentLeft:{maxWidth:280},contentControl:{flexGrow:0,flexShrink:0,display:"flex",flexDirection:"column",width:270},paperRoot:{maxWidth:250},listItemPaper:{justifyContent:"center"},iconRoot:{position:"absolute",color:e.palette.action.active},inputBaseRoot:{display:"block"},inputBaseInputZH:{textAlign:"center",fontSize:36,padding:0,paddingTop:6,height:45},inputBaseInputEN:{textAlign:"center",fontSize:18,padding:0,paddingBottom:6,height:"auto"},chipWrapper:{overflowX:"auto",display:"flex"},chipRoot:{borderRadius:4.5,height:32,lineHeight:"1rem",margin:2},chipLabel:{padding:"0 6px","& > span":{display:"block",textAlign:"center"},"& > span:first-child":{fontSize:"1rem"},"& > span:last-child":{lineHeight:"0.8rem"}}})})),D=function(e){var n=(0,c.$)().t,t=B();return(0,$.jsxs)(d.Z,{open:e.open,onClose:e.onClose,children:[(0,$.jsx)(h.Z,{children:n("colour.title")}),(0,$.jsxs)(p.Z,{className:t.contentWrapper,children:[(0,$.jsxs)(m.Z,{component:"div",disablePadding:!0,className:t.contentLeft,children:[(0,$.jsx)(J,{theme:e.theme,lineName:e.lineName,onUpdate:e.onUpdate}),(0,$.jsx)(f.Z,{}),(0,$.jsx)(z,{onUpdate:e.onUpdate})]}),(0,$.jsx)("div",{className:t.contentControl,children:(0,$.jsx)(O,{theme:e.theme,onUpdate:e.onUpdate})})]}),(0,$.jsx)(x.Z,{children:(0,$.jsx)(g.Z,{onClick:e.onClose,color:"primary",children:n("dialog.done")})})]})},J=function(e){var n=B(),t=function(n,t){var r=e.lineName.map((function(e,r){return r===t?n:e}));e.onUpdate("name",r)};return(0,$.jsx)(j.Z,{style:{justifyContent:"center"},children:(0,$.jsxs)(Z.Z,{className:n.paperRoot,style:{backgroundColor:e.theme[2]},children:[(0,$.jsx)(v.Z,{className:n.iconRoot,children:"edit"}),(0,$.jsx)(y.Z,{value:e.lineName[0],classes:{root:n.inputBaseRoot,input:n.inputBaseInputZH},style:{color:e.theme[3]||F.AJ.white},onChange:function(e){return t(e.target.value,0)},autoFocus:!0}),(0,$.jsx)(y.Z,{value:e.lineName[1],classes:{root:n.inputBaseRoot,input:n.inputBaseInputEN},style:{color:e.theme[3]||F.AJ.white},onChange:function(e){return t(e.target.value,1)}})]})})},z=function(e){var n=(0,c.$)().t,t=B(),r=(0,I.CG)((function(e){return e.param.theme})),i=(0,I.CG)((function(e){return e.param.line_name})),a=(0,I.CG)((function(e){return e.param.stn_list})),l=(0,s.useMemo)((function(){return new Set(Object.values(a).reduce((function(e,n){var t=n.transfer.info;return e.concat.apply(e,(0,o.Z)(t))}),[[].concat((0,o.Z)(r),(0,o.Z)(i))]).map((function(e){return JSON.stringify(e)})).reverse())}),[]),u=(0,s.useMemo)((function(){return(0,o.Z)(l).map((function(n,r){var i=JSON.parse(n),o=i.slice(4).map((function(e,n){return(0,$.jsx)("span",{style:{color:i[3]},children:e},n)}));return(0,$.jsx)(C.Z,{onClick:function(){e.onUpdate("theme",i.slice(0,4)),e.onUpdate("name",i.slice(4))},style:{backgroundColor:i[2]},className:t.chipRoot,classes:{label:t.chipLabel},label:o},r)}))}),[]);return(0,$.jsx)(j.Z,{children:(0,$.jsx)(b.Z,{primary:n("colour.recent"),secondary:u,secondaryTypographyProps:{component:"div"},classes:{secondary:t.chipWrapper}})})},O=function(e){var n=(0,c.$)().t,t=(0,s.useState)("other"===e.theme[0]?1:0),o=(0,i.Z)(t,2),a=o[0],l=o[1],u=(0,$.jsxs)(w.Z,{value:a,indicatorColor:"primary",textColor:"primary",onChange:function(e,n){return l(n)},variant:"fullWidth",scrollButtons:"off",children:[(0,$.jsx)(E.Z,{label:n("colour.palette"),style:{minWidth:"unset"}}),(0,$.jsx)(E.Z,{label:n("colour.custom"),style:{minWidth:"unset"}})]}),d=function(n){switch(n){case 0:return(0,$.jsx)(T,(0,r.Z)({},e));case 1:return(0,$.jsx)(W,(0,r.Z)({},e));default:return(0,$.jsx)($.Fragment,{})}}(a);return(0,$.jsxs)($.Fragment,{children:[u,d]})},V=D},4979:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(2791),i=t(1288),o=t(9526),a=t(2067),s=t(4446),c=t(7447),l=t(885),u=t(2020),d=t(8596),h=t(2288),p=t(8096),m=t(1969),f=t(9418),x=t(159),g=t(6513),j=t(9038),Z=t(4212),v=t(8528),y=t(9370),C=t(9505),b=t(3334),w=t(713),E=t(533),N=t(184),S=(0,d.Z)((function(e){return(0,h.Z)({dividerVertical:{margin:e.spacing(0,2)},nestedList:{paddingLeft:e.spacing(5)}})})),k=function(){var e=(0,u.$)().t,n=(0,b.TL)(),t=(0,b.CG)((function(e){return e.param.style})),i=(0,b.CG)((function(e){return e.param.line_name})),o=(0,b.CG)((function(e){return e.param.theme})),a=r.useState(!1),s=(0,l.Z)(a,2),d=s[0],h=s[1];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(p.Z,{button:!0,onClick:function(){return h(!0)},children:[(0,N.jsx)(m.Z,{children:(0,N.jsx)(f.Z,{children:"color_lens"})}),(0,N.jsx)(x.Z,{primary:e("design.theme"),secondary:(0,N.jsx)("span",{style:{backgroundColor:o[2],color:o[3],padding:".1rem .3rem"},children:Object.values(i).join()})}),(0,N.jsx)(f.Z,{color:"action",children:"arrow_right"})]}),(0,N.jsx)(C.Z,{open:d,theme:o,lineName:i,onUpdate:function(e,t){"name"===e&&n((0,E.il)(Object.values(t))),"theme"===e&&n((0,E.Dc)(t))},onClose:function(){return h(!1)}}),(0,N.jsx)(c.Z,{}),(0,N.jsx)(R,{}),(0,N.jsx)(c.Z,{}),t===w.RM.SHMetro?(0,N.jsx)(A,{}):(0,N.jsx)(U,{})]})},R=function(){var e=(0,u.$)().t,n=S(),t=(0,b.TL)(),i=(0,b.CG)((function(e){return e.param.direction}));return r.useMemo((function(){return(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(m.Z,{children:(0,N.jsx)(f.Z,{children:"directions"})}),(0,N.jsx)(x.Z,{primary:e("design.direction.button"),secondary:e("design.direction."+i)}),(0,N.jsx)(c.Z,{orientation:"vertical",flexItem:!0,className:n.dividerVertical}),(0,N.jsx)(g.Z,{variant:"outlined",color:"primary",onClick:function(){t((0,E.mU)(i===w.wA.left?w.wA.right:w.wA.left))},children:e("design.direction.switch")})]})}),[n.dividerVertical,i,e,t])},U=function(){var e=(0,u.$)().t,n=(0,b.TL)(),t=(0,b.CG)((function(e){return e.param.platform_num}));return r.useMemo((function(){return(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(m.Z,{children:(0,N.jsx)(f.Z,{children:"looks_one"})}),(0,N.jsx)(x.Z,{primary:e("design.platform")}),(0,N.jsx)(j.Z,{value:t,onChange:function(e){var t=e.target.value;n((0,E.VY)(t))}})]})}),[t,n,e])},A=function(){var e=(0,u.$)().t,n=S(),t=(0,b.TL)(),i=(0,b.CG)((function(e){return e.param.platform_num}));return(0,r.useMemo)((function(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(m.Z,{children:(0,N.jsx)(f.Z,{children:"looks_one"})}),(0,N.jsx)(x.Z,{primary:e("design.platform")}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(v.Z,{color:"primary",checked:!1!==i,onChange:function(e,n){t(n?(0,E.VY)(""):(0,E.VY)(!1))}})})]}),(0,N.jsx)(y.Z,{in:!1!==i,unmountOnExit:!0,children:(0,N.jsx)(a.Z,{component:"div",disablePadding:!0,className:n.nestedList,children:(0,N.jsx)(p.Z,{children:(0,N.jsx)(j.Z,{placeholder:e("design.platform"),value:i,onChange:function(e){var n=e.target.value;t((0,E.VY)(n))}})})})})]})}),[i,n.nestedList,e,t])},M=r.lazy((function(){return t.e(9728).then(t.bind(t,8553))})),L=r.lazy((function(){return Promise.all([t.e(4076),t.e(1439)]).then(t.bind(t,1032))})),F=r.lazy((function(){return t.e(2908).then(t.bind(t,3887))})),I=function(){var e=(0,b.CG)((function(e){return e.param.style}));return(0,N.jsx)(i.Z,{container:!0,spacing:3,justifyContent:"center",alignItems:"flex-start",children:(0,N.jsx)(i.Z,{item:!0,xs:12,sm:10,md:7,lg:5,children:(0,N.jsx)(o.Z,{children:(0,N.jsxs)(a.Z,{component:"div",disablePadding:!0,children:[(0,N.jsx)(k,{}),e===w.RM.MTR&&(0,N.jsxs)(r.Suspense,{fallback:(0,N.jsx)(s.Z,{}),children:[(0,N.jsx)(c.Z,{}),(0,N.jsx)(M,{})]}),e===w.RM.GZMTR&&(0,N.jsxs)(r.Suspense,{fallback:(0,N.jsx)(s.Z,{}),children:[(0,N.jsx)(c.Z,{}),(0,N.jsx)(L,{})]}),e===w.RM.SHMetro&&(0,N.jsxs)(r.Suspense,{fallback:(0,N.jsx)(s.Z,{}),children:[(0,N.jsx)(c.Z,{}),(0,N.jsx)(F,{})]})]})})})})}},9370:function(e,n,t){var r=t(7462),i=t(885),o=t(5987),a=t(2791),s=t(8182),c=(t(2007),t(8875)),l=t(5936),u=t(812),d=t(6043),h=t(3364),p=t(9806),m=a.forwardRef((function(e,n){var t=e.children,l=e.classes,m=e.className,f=e.collapsedHeight,x=e.collapsedSize,g=void 0===x?"0px":x,j=e.component,Z=void 0===j?"div":j,v=e.disableStrictModeCompat,y=void 0!==v&&v,C=e.in,b=e.onEnter,w=e.onEntered,E=e.onEntering,N=e.onExit,S=e.onExited,k=e.onExiting,R=e.style,U=e.timeout,A=void 0===U?u.x9.standard:U,M=e.TransitionComponent,L=void 0===M?c.ZP:M,F=(0,o.Z)(e,["children","classes","className","collapsedHeight","collapsedSize","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),I=(0,h.Z)(),$=a.useRef(),H=a.useRef(null),T=a.useRef(),W="number"===typeof(f||g)?"".concat(f||g,"px"):f||g;a.useEffect((function(){return function(){clearTimeout($.current)}}),[]);var _=I.unstable_strictMode&&!y,G=a.useRef(null),P=(0,p.Z)(n,_?G:void 0),B=function(e){return function(n,t){if(e){var r=_?[G.current,n]:[n,t],o=(0,i.Z)(r,2),a=o[0],s=o[1];void 0===s?e(a):e(a,s)}}},D=B((function(e,n){e.style.height=W,b&&b(e,n)})),J=B((function(e,n){var t=H.current?H.current.clientHeight:0,r=(0,d.C)({style:R,timeout:A},{mode:"enter"}).duration;if("auto"===A){var i=I.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(i,"ms"),T.current=i}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style.height="".concat(t,"px"),E&&E(e,n)})),z=B((function(e,n){e.style.height="auto",w&&w(e,n)})),O=B((function(e){var n=H.current?H.current.clientHeight:0;e.style.height="".concat(n,"px"),N&&N(e)})),V=B(S),Y=B((function(e){var n=H.current?H.current.clientHeight:0,t=(0,d.C)({style:R,timeout:A},{mode:"exit"}).duration;if("auto"===A){var r=I.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(r,"ms"),T.current=r}else e.style.transitionDuration="string"===typeof t?t:"".concat(t,"ms");e.style.height=W,k&&k(e)}));return a.createElement(L,(0,r.Z)({in:C,onEnter:D,onEntered:z,onEntering:J,onExit:O,onExited:V,onExiting:Y,addEndListener:function(e,n){var t=_?e:n;"auto"===A&&($.current=setTimeout(t,T.current||0))},nodeRef:_?G:void 0,timeout:"auto"===A?null:A},F),(function(e,n){return a.createElement(Z,(0,r.Z)({className:(0,s.Z)(l.root,l.container,m,{entered:l.entered,exited:!C&&"0px"===W&&l.hidden}[e]),style:(0,r.Z)({minHeight:W},R),ref:P},n),a.createElement("div",{className:l.wrapper,ref:H},a.createElement("div",{className:l.wrapperInner},t)))}))}));m.muiSupportAuto=!0,n.Z=(0,l.Z)((function(e){return{root:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(m)}}]);
//# sourceMappingURL=panelDesign.85f40255.chunk.js.map