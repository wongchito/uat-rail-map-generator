"use strict";(self.webpackChunkrail_map_generator=self.webpackChunkrail_map_generator||[]).push([[3863],{5481:function(n,t,e){e.d(t,{K:function(){return u}});var r=e(1413),i=e(5987),a=e(2982),o=e(2791),c=e(6169),s=e(184),l=["stnName","nameDirection"],u=function(n){var t=(0,c.CG)((function(n){return n.param})).stn_list[n.stnId],e="";return e=3===t.services.length?"direct_indoor_sh":2===t.services.length?"express_indoor_sh":[].concat((0,a.Z)(t.transfer.info[0]),(0,a.Z)(t.transfer.info[1]||[])).length>0?"int2_indoor_sh":"stn_indoor_sh",(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{name:t.name,infos:t.transfer.info,nameDirection:n.nameDirection,services:n.services}),(0,s.jsx)("use",{xlinkHref:"#".concat(e),stroke:"var(--rmg-theme-colour)"}),t.services.length>1&&(0,s.jsx)("text",{className:"rmg-name__zh",writingMode:"tb",fontSize:"60%",dy:"-12",children:"\u5927\u7ad9\u8f66".concat(t.services.length>2?" \u76f4\u8fbe\u8f66":"","\u505c\u9760")})]})};t.Z=u;var h=function(n){var t,e,r,i,o=n.name,c=n.infos,l=n.nameDirection,u=n.services,h={upward:60,downward:-30,left:0,right:0}[l];return(0,s.jsxs)("g",{transform:"translate(0,".concat(h,")"),children:["upward"===l||"downward"===l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("line",{x1:-30,x2:30,y1:"upward"===l?-23:-10,y2:"upward"===l?-23:-10,stroke:"black"}),(0,s.jsx)("line",{y1:"upward"===l?-23:-10,y2:"upward"===l?-48:20,stroke:"black"})]}):(0,s.jsx)("line",{x1:"left"===l?-100:15,x2:"left"===l?-15:100,y1:0,y2:0,stroke:"black"}),[].concat((0,a.Z)(c[0]),(0,a.Z)(c[1]||[])).length>0&&(0,s.jsx)(d,{intInfos:[].concat((0,a.Z)(c[0]),(0,a.Z)(c[1]||[])),arrowDirection:l,services:u}),(0,s.jsx)(f,{stnName:o,nameDirection:l,fill:"black"}),(null===(t=c[1])||void 0===t?void 0:t.length)>0&&(0,s.jsx)("g",{transform:"translate(0,".concat("upward"===l?-185:150,")"),children:(0,s.jsx)(m,{osiInfos:c[1]})}),(null===(e=c[2])||void 0===e?void 0:e.length)>0&&(0,s.jsx)("g",{transform:"translate(0,".concat("upward"===l?null!==(r=c[1])&&void 0!==r&&r.length?-210:c[0].length?-180:-100:(null!==(i=c[1])&&void 0!==i&&i.length?190:c[0].length?160:75)+(3===u.length?40:0),")"),children:(0,s.jsx)(g,{osysiInfos:c[2]})})]})},f=o.forwardRef((function(n,t){var e=n.stnName,c=n.nameDirection,u=(0,i.Z)(n,l),h=e[0].split("\\"),f=e[1].split("\\").length,d={upward:0,downward:0,left:-75,right:75}[c],m={upward:-2,downward:-30-12*(f-1),left:-15,right:-15}[c];return(0,s.jsx)("g",(0,r.Z)((0,r.Z)({ref:t},u),{},{textAnchor:"middle",transform:"translate(".concat(d,",").concat(m,")"),children:o.useMemo((function(){return(0,s.jsxs)(s.Fragment,{children:[h.map((function(n,t,e){return(0,s.jsx)("text",{className:"rmg-name__zh",dy:"upward"===c?16*t:-16*(e.length-1-t),children:n},t)})),(0,s.jsx)("g",{fontSize:9.6,children:e[1].split("\\").map((function(n,t){return(0,s.jsx)("text",{className:"rmg-name__en",dy:12*(t+1)+("upward"===c&&h.length>1?7.5*h.length:0),children:n},t)}))})]})}),(0,a.Z)(e))}))})),d=function(n){var t=n.intInfos,e=n.arrowDirection,r=n.services,i=t.map((function(n){return n[2]})).reduce((function(n,t){return n+t}),""),a=[t.filter((function(n){return n[4].match(/^\d+.*$/)})).map((function(n){return n[4].replace(/^(\d+)(.*)$/,"$1")})).join("\uff0c").concat("\u53f7\u7ebf"),t.filter((function(n){return!n[4].match(/^\d+.*$/)})).map((function(n){return n[4]})).join("\uff0c")].filter((function(n){return n&&"\u53f7\u7ebf"!==n})).join("\uff0c"),c=["Line ".concat(t.filter((function(n){return n[5].match(/^L|line$/)})).map((function(n){return n[5].replace("Line","").replace("line","").trim()})).join(",")),t.filter((function(n){return!n[5].match(/^L|line$/)})).map((function(n){return n[5]})).join("\uff0c")].filter((function(n){return n&&"Line "!==n})).join(","),l=3===r.length?80:45,u="upward"===e?-145:125+(3===r.length?40:0);return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{id:"int_indoor_arrow_sh",stroke:"var(--rmg-black)",strokeWidth:1,transform:"translate(0,".concat("upward"===e?-74:44,")rotate(").concat("upward"===e?0:180,")"),fill:1===t.length?t[0][2]:"url(#grad".concat(i,")"),d:"M -7.5,0 v -".concat(l," h -7.5 l 15,-15 l 15,15 h -7.5 v ").concat(l," Z")}),t.length>1&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("linearGradient",{id:"grad".concat(i),y1:"0",y2:"0",x1:"upward"===e?"25%":"75%",x2:"upward"===e?"75%":"25%",children:t.map((function(n,e){return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)("stop",{offset:"".concat(100/t.length*(e+0),"%"),stopColor:n[2]}),(0,s.jsx)("stop",{offset:"".concat(100/t.length*(e+1),"%"),stopColor:n[2]})]},e)}))})}),(0,s.jsxs)("g",{transform:"translate(0,".concat(u,")"),textAnchor:"middle",children:[(0,s.jsx)("text",{className:"rmg-name__zh",dy:-7,children:"\u6362\u4e58".concat(a)}),(0,s.jsx)("text",{className:"rmg-name__en",dy:5,fontSize:9.6,children:"Interchange ".concat(c)})]})]})},m=function(n){return o.useMemo((function(){return(0,s.jsxs)("g",{textAnchor:"middle",fontSize:"50%",children:[(0,s.jsx)("text",{className:"rmg-name__zh",dy:-5,children:"\u6362\u4e58".concat(n.osiInfos.map((function(n){return n[4]})).join("\uff0c"))}),(0,s.jsx)("text",{className:"rmg-name__zh",dy:5,children:"\u4ec5\u9650\u516c\u5171\u4ea4\u901a\u5361"}),(0,s.jsx)("text",{className:"rmg-name__en",dy:12.5,fontSize:"75%",children:"Only for Public Transportation Card"})]})}),[n.osiInfos.toString()])},g=function(n){return o.useMemo((function(){return(0,s.jsxs)("g",{textAnchor:"middle",children:[(0,s.jsx)("text",{className:"rmg-name__zh",dy:-5,children:"\u8f6c\u4e58".concat(n.osysiInfos.map((function(n){return n[4]})).join("\uff0c"))}),(0,s.jsx)("text",{className:"rmg-name__en",dy:7.5,fontSize:9.6,children:"To ".concat(n.osysiInfos.map((function(n){return n[5]})).join(", "))})]})}),[n.osysiInfos.toString()])}},9995:function(n,t,e){var r=e(885),i=e(4942),a=e(1413),o=e(2982),c=(e(2791),e(7250)),s=e(5481),l=e(713),u=e(6169),h=e(184);t.Z=function(n){var t=n.bank_angle,e=(0,u.CG)((function(n){return n.helper})).branches,r=(0,u.CG)((function(n){return n.param})),c=r.current_stn_idx,s=r.svgWidth,l=r.svg_height,m=r.padding,g=r.direction,x=r.loop_info,p=x.left_and_right_factor,j=x.bottom_factor,_=e[0].filter((function(n){return!["linestart","lineend"].includes(n)})),v=function(n,t,e,r){var i=n.length-2*r-e,a=n.findIndex((function(n){return n===t})),c=[].concat((0,o.Z)(n),(0,o.Z)(n),(0,o.Z)(n)),s=n.length+a-Math.floor(i/2)+(i%2===0?1:0),l=n.length+a+Math.floor(i/2);return{top:c.slice(s,l+1),left:c.slice(s-r,s),right:c.slice(l+1,l+1+r),bottom:c.slice(l+1+r,l+1+r+e)}}(_,c,j,p),y=function(n,t){var e=Object.fromEntries(n.map((function(n){return[n,-1]}))),r=Object.fromEntries(n.map((function(n){return[n,-1]})));return t.top.forEach((function(n,i){e[n]=1.8/t.top.length*i-.9+.9/t.top.length,r[n]=-1})),t.right.forEach((function(n,i){e[n]=1,r[n]=1.8/t.right.length*i-.9+.9/t.right.length})),t.bottom.forEach((function(n,i){e[n]=.9-1.8/t.bottom.length*i-.9/t.bottom.length,r[n]=1})),t.left.forEach((function(n,i){e[n]=-1,r[n]=.9-1.8/t.left.length*i-.9/t.left.length})),{x_shares:e,y_shares:r}}(_,v),Z=y.x_shares,w=y.y_shares;_.forEach((function(n){Z[n]=(Z[n]+1)/2,w[n]=(w[n]+1)/2}));var S=[s.railmap*m/100+(t?0:50),s.railmap*(1-m/100)-(t?0:50)],b=Object.keys(Z).reduce((function(n,t){return(0,a.Z)((0,a.Z)({},n),{},(0,i.Z)({},t,S[0]+Z[t]*(S[1]-S[0])))}),{}),k=[175,l-75-(t?0:100)],N=Object.keys(Z).reduce((function(n,t){return(0,a.Z)((0,a.Z)({},n),{},(0,i.Z)({},t,k[0]+w[t]*(k[1]-k[0])))}),{}),z=t?{l:1,r:-1}[g]:0;[].concat((0,o.Z)(v.right),(0,o.Z)(v.left)).forEach((function(n){b[n]-=(N[n]-k[0])*z})),v.bottom.forEach((function(n){b[n]-=(k[1]-k[0])*z}));var I=f(v,b,N,z,k);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("g",{id:"loop",transform:"translate(".concat(150*z,",0)"),children:[(0,h.jsx)("path",{stroke:"var(--rmg-theme-colour)",strokeWidth:12,fill:"none",d:I,strokeLinejoin:"round"}),(0,h.jsx)(d,{bank_angle:t,loop_stns:v,xs:b,ys:N})]})})};var f=function(n,t,e,i,a){var o=(0,r.Z)(a,2),c=o[0],s=o[1],l=function(n,t,e,r,a){return{right:[e+(r-c)*i,t],bottom:[n-(s-t)*i,r],left:[e-(s-r)*i,t],top:[n+(t-c)*i,r]}[a]},u=[];n.top.forEach((function(n){u.push([t[n],e[n]])})),["right","bottom","left"].forEach((function(r){if(n[r].length>0)u.push(l(u.at(-1)[0],u.at(-1)[1],t[n[r][0]],e[n[r][0]],r)),n[r].forEach((function(n){u.push([t[n],e[n]])}));else{var a={right:[u.at(-1)[0]+100,u.at(-1)[1]],bottom:[u.at(-1)[0]+(s-u.at(-1)[1])*-i,u.at(-1)[1]+(s-u.at(-1)[1])],left:[u.at(-1)[0]-100,u.at(-1)[1]]};u.push(a[r])}})),u.push(l(u.at(-1)[0],u.at(-1)[1],t[n.top[0]],e[n.top[0]],"top"));var h=u.slice(1).map((function(n){var t=(0,r.Z)(n,2),e=t[0],i=t[1];return"L".concat(e,",").concat(i)})).join(" ");return"M".concat(u[0][0],",").concat(u[0][1]," ").concat(h," Z")},d=function(n){var t=n.bank_angle,e=n.loop_stns,i=n.xs,a=n.ys,o={top:0,bottom:0,left:-1,right:1},u={left:"r",right:"l",top:void 0,bottom:void 0},f=function(n,t){return{top:t%2===0?"upward":"downward",bottom:t%2===0?"upward":"downward",left:"left",right:"right"}[n]};return(0,h.jsx)("g",{id:"loop_stations",children:t?Object.entries(e).map((function(n){var t=(0,r.Z)(n,2),e=t[0];return t[1].map((function(n){return(0,h.jsx)("g",{transform:"translate(".concat(i[n],",").concat(a[n],")"),children:(0,h.jsx)(c.Z,{stnId:n,stnState:1,bank:o[e],direction:u[e]})},n)}))})):Object.entries(e).map((function(n){var t=(0,r.Z)(n,2),e=t[0];return t[1].map((function(n,t){return(0,h.jsx)("g",{transform:"translate(".concat(i[n],",").concat(a[n],")"),children:(0,h.jsx)(s.K,{stnId:n,nameDirection:f(e,t),services:[l.K9.local]})},n)}))}))})}},7250:function(n,t,e){var r=e(5987),i=e(885),a=e(1413),o=e(2982),c=e(2791),s=e(713),l=e(6169),u=e(184),h=["stnName"],f=["intInfos","direction"];t.Z=function(n){var t=n.stnId,e=n.stnState,r=n.color,i=n.bank,c=n.direction,s=(0,l.CG)((function(n){return n.param})),h=s.direction,f=s.info_panel_type,m=s.stn_list[t],g=null!==c&&void 0!==c?c:h,x=([].concat((0,o.Z)(m.branch.left),(0,o.Z)(m.branch.right)).length?8+12*m.name[1].split("\\").length:0)*("r"===g?-1:1),p="",j={};"sh2020"===f?(p=3===m.services.length?"stn_sh_2020_direct":2===m.services.length?"stn_sh_2020_express":"stn_sh_2020",j.fill=-1===e?"gray":r||"var(--rmg-theme-colour)"):(p=3===m.services.length?"direct_sh":2===m.services.length?"express_sh":[].concat((0,o.Z)(m.transfer.info[0]),(0,o.Z)(m.transfer.info[1]||[])).length>0?"int2_sh":"stn_sh",j.stroke=-1===e?"gray":r||"var(--rmg-theme-colour)");var _=null!==i&&void 0!==i?i:0,v=("l"===g?6:-6)+x+30*_,y=("sh2020"===f?-20:-6)+10*Math.abs(_),Z=_?0:"l"===g?-45:45;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("use",(0,a.Z)((0,a.Z)({xlinkHref:"#".concat(p)},j),{},{transform:"rotate(".concat(90*_*("sh2020"===f?1:-1),")")})),(0,u.jsx)("g",{transform:"translate(".concat(v,",").concat(y,")rotate(").concat(Z,")"),children:(0,u.jsx)(d,{name:m.name,infos:m.transfer.info,stnState:e,direction:g,facility:m.facility})})]})};var d=function(n){var t,e=n.name,r=n.infos,a=n.stnState,l=n.direction,h=n.facility,f=n.name[1].split("\\").length,d=(0,c.useRef)(null),x=c.useState({width:0}),p=(0,i.Z)(x,2),j=p[0],v=p[1];c.useEffect((function(){return v(d.current.getBBox())}),(0,o.Z)(e));var y=j.width+5,Z="l"===l?1:-1,w=h!==s.mV.none?30:0;return(0,u.jsxs)(u.Fragment,{children:[r.flat().length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("line",{x1:w*Z,x2:(w+y)*Z,stroke:-1===a?"gray":"black",strokeWidth:.5}),(0,u.jsx)(g,{intInfos:r,transform:"translate(".concat((w+y)*Z,",-10.75)"),direction:l})]}),h!==s.mV.none&&(0,u.jsx)("use",{xlinkHref:"#"+h,x:10*Z,y:-30}),(0,u.jsxs)("g",{textAnchor:"l"===l?"start":"end",transform:"translate(".concat(w*Z,",").concat(-16.15625-12*(f-1),")"),children:[(0,u.jsx)(m,{ref:d,stnName:e,fill:-1===a?"gray":0===a?"red":"black"}),(null===(t=r[1])||void 0===t?void 0:t.length)>0&&(0,u.jsx)("g",{transform:"translate(".concat((y+15*r.reduce((function(n,t){return n+t.length}),0))*Z,",-30)"),children:(0,u.jsx)(_,{osiInfos:r[1]})})]})]})},m=c.forwardRef((function(n,t){var e=n.stnName,i=(0,r.Z)(n,h);return(0,u.jsx)("g",(0,a.Z)((0,a.Z)({ref:t},i),{},{children:c.useMemo((function(){return(0,u.jsxs)(u.Fragment,{children:[e[0].split("\\").map((function(n,t,e){return(0,u.jsx)("text",{className:"rmg-name__zh",dy:-15*(e.length-1-t),children:n},t)})),(0,u.jsx)("g",{fontSize:9.6,children:e[1].split("\\").map((function(n,t){return(0,u.jsx)("text",{className:"rmg-name__en",dy:12*(t+1),children:n},t)}))})]})}),(0,o.Z)(e))}))})),g=function(n){var t,e=n.intInfos,i=(n.direction,(0,r.Z)(n,f)),c=[].concat((0,o.Z)(e[0]),(0,o.Z)(e[1]||[]),(0,o.Z)((null===(t=e[2])||void 0===t?void 0:t.filter((function(n){return Boolean(n[4].match(/^\u78c1(\u60ac)*\u6d6e/))})))||[])),s=0;return(0,u.jsxs)("g",(0,a.Z)((0,a.Z)({fontSize:14,textAnchor:"middle"},i),{},{children:[c.map((function(t,e){var r=Boolean(t[4].match(/^\d.*$/)),i=Boolean(t[4].match(/^\u78c1(\u60ac)*\u6d6e/));"r"===n.direction&&(s-=(r||i?20:14*t[4].length+12+0)+(0===e?0:5));var a=(0,u.jsx)("g",{});return a=i?(0,u.jsx)("g",{transform:"translate(".concat(s,",-16)scale(0.1428571429)"),children:(0,u.jsx)(x,{info:t})},e):r?(0,u.jsx)("g",{transform:"translate(".concat(s,",0)"),children:(0,u.jsx)(p,{info:t})},e):(0,u.jsx)("g",{transform:"translate(".concat(s,",0)"),children:(0,u.jsx)(j,{info:t})},e),"l"===n.direction&&(s+=r||i?25:14*t[4].length+12+5),a})),(0,o.Z)(e[2]||[]).length>0&&(0,u.jsx)("g",{transform:"translate(".concat(s-("r"===n.direction?5:0),",0)"),children:(0,u.jsx)(v,{osysiInfos:e[2],direction:n.direction})},c.length+1)]}))},x=(0,c.memo)((function(n){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("use",{xlinkHref:"#intbox_maglev",fill:n.info[2],stroke:n.info[2]})})}),(function(n,t){return n.info.toString()===t.info.toString()})),p=(0,c.memo)((function(n){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("use",{xlinkHref:"#intbox_number",fill:n.info[2]}),(0,u.jsx)("text",{x:10,className:"rmg-name__zh",fill:n.info[3],dominantBaseline:"central",children:n.info[4].match(/(\d*)\w+/)[0]})]})}),(function(n,t){return n.info.toString()===t.info.toString()})),j=(0,c.memo)((function(n){var t=n.info[4].split("\\")[0].length;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("rect",{height:22,width:14*t+12,y:-11,fill:n.info[2]}),(0,u.jsx)("text",{x:7*t+6,className:"rmg-name__zh",fill:n.info[3],dominantBaseline:"central",children:n.info[4].split("\\")[0]})]})}),(function(n,t){return n.info.toString()===t.info.toString()})),_=function(n){var t=n.osiInfos.map((function(n){return n[4]})).join("\uff0c");return c.useMemo((function(){return(0,u.jsxs)("g",{textAnchor:"middle",fontSize:"50%",children:[(0,u.jsx)("text",{className:"rmg-name__zh",dy:-5,children:"\u6362\u4e58".concat(t)}),(0,u.jsx)("text",{className:"rmg-name__zh",dy:5,children:"\u4ec5\u9650\u516c\u5171\u4ea4\u901a\u5361"}),(0,u.jsx)("text",{className:"rmg-name__en",dy:12.5,fontSize:"75%",children:"Only for Public Transportation Card"})]})}),[t.toString()])},v=function(n){var t=n.osysiInfos.map((function(n){return n[4]})).join("\uff0c"),e=n.osysiInfos.map((function(n){return n[5]})).join(", ");return c.useMemo((function(){return(0,u.jsxs)("g",{textAnchor:"l"===n.direction?"start":"end",fontSize:"50%",children:[(0,u.jsxs)("text",{className:"rmg-name__zh",dy:3,children:["\u8f6c\u4e58",t]}),(0,u.jsxs)("text",{className:"rmg-name__en",dy:10,fontSize:"75%",children:["To ",e]})]})}),[n.osysiInfos.toString(),n.direction])}},3824:function(n,t,e){e.d(t,{Az:function(){return h},QE:function(){return f},ML:function(){return d},h6:function(){return m},LD:function(){return g},pS:function(){return x}});var r=e(885),i=e(5671),a=e(3144),o=e(2982),c=e(7762),s=e(4942),l=e(1413),u=e(713),h=function(n,t,e){return Object.keys(n).reduce((function(r,i){return(0,l.Z)((0,l.Z)({},r),{},(0,s.Z)({},i,n[i].children.reduce((function(r,a){return(0,l.Z)((0,l.Z)({},r),{},(0,s.Z)({},a,1+t(n,a)+e(n,i)))}),{})))}),{})},f=function n(t,e,r){if(t===e)return{len:0,nodes:[t]};var i=[],a=[];Object.keys(r[t]).forEach((function(o){var c=n(o,e,r);c.len<0||(i.push(r[t][o]+c.len),c.nodes.unshift(t),a.push(c.nodes))}));var o=Math.max.apply(Math,i);return{len:o,nodes:a[i.indexOf(o)]}},d=function(n,t,e){var r=f("linestart","lineend",t);if(r.nodes.includes(n))return f(r.nodes[1],n,t).len;for(var i=e.filter((function(t){return t.includes(n)}))[0],a=n;!r.nodes.includes(a);)a=i[i.indexOf(a)-1];for(var o=n;!r.nodes.includes(o);)o=i[i.indexOf(o)+1];var c="linestart"===a,s=[];return c||"lineend"===o?c?(s[0]=0,s[1]=f(r.nodes[1],o,t).len,s[2]=f(i[1],n,t).len,s[3]=f(n,o,t).len):(s[0]=f(r.nodes[1],a,t).len,s[1]=f(a,r.nodes.slice(-2)[0],t).len,s[2]=f(a,n,t).len,s[3]=f(n,i.slice(-2)[0],t).len):(s[0]=f(r.nodes[1],a,t).len,s[1]=f(a,o,t).len,s[2]=f(a,n,t).len,s[3]=f(n,o,t).len),s[0]+s[2]*s[1]/(s[2]+s[3])},m=function(n,t,e){var r;return console.log("computing stations' states"),(0,o.Z)(new Set((r=[]).concat.apply(r,(0,o.Z)(t)))).reduce((function(r,i){return(0,l.Z)((0,l.Z)({},r),{},(0,s.Z)({},i,i===n?0:(e===u.wA.right?function(n,t,e){var r,i=(0,c.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.indexOf(n),s=a.indexOf(t);if(-1!==o&&o<s)return!0}}catch(l){i.e(l)}finally{i.f()}return!1}(n,i,t):function(n,t,e){var r,i=(0,c.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.indexOf(n),s=a.indexOf(t);if(-1!==s&&s<o)return!0}}catch(l){i.e(l)}finally{i.f()}return!1}(n,i,t))?1:-1))}),{})},g=function(){function n(t){var e=this;(0,i.Z)(this,n),this.yShares={},this.xShares={},this.namePoss={},this.stnList={},this.criticalPath={},this.leftWideFactor=function(n){return 0},this.rightWideFactor=function(n){return 0},this.pathWeight=function(n,t){return e.stnList[n].children.includes(t)?1+e.rightWideFactor(n)+e.leftWideFactor(t):-1/0},this.pathTurnParams=function(n){var t=35-17.5*Math.sqrt(3),e=n-2*t;return{tr:35,dx_a:17.5,dy_a:t,dx_l:e*Math.sqrt(3),dy_l:e}},this.pathTurnSE=function(n){var t=e.pathTurnParams(n),r=t.tr,i=t.dx_a,a=t.dy_a,o=t.dx_l,c=t.dy_l;return"a ".concat(r,",").concat(r," 0 0,1 ").concat(i,",").concat(a," l ").concat(o,",").concat(c," a ").concat(r,",").concat(r," 0 0,0 ").concat(i,",").concat(a)},this.pathTurnNE=function(n){var t=e.pathTurnParams(n),r=t.tr,i=t.dx_a,a=t.dy_a,o=t.dx_l,c=t.dy_l;return"a ".concat(r,",").concat(r," 0 0,0 ").concat(i,",").concat(-a," l ").concat(o,",").concat(-c," a ").concat(r,",").concat(r," 0 0,1 ").concat(i,",").concat(-a)},this.stnList=t.stnList,this.criticalPath=t.criticalPath}return(0,a.Z)(n,[{key:"getYShare",value:function(n,t){if(n in this.yShares)return this.yShares[n];if(["linestart","lineend"].includes(n)||this.stnList[n].parents.length>1||this.stnList[n].children.length>1)return this.yShares[n]=0,0;var e=this.stnList[n].parents[0];if(e){if(1===this.stnList[e].children.length){var r=this.getYShare(e);return this.yShares[n]=r,r}var i=0===this.stnList[e].children.indexOf(n)?1:-1;return this.yShares[n]=i,i}return this.yShares[n]=0,0}},{key:"_linePath",value:function(n,t,e,i,a,o,c,s){var l=this,u=(0,r.Z)([],3),h=u[0],f=u[1],d=u[2],m=[],g=this.pathTurnParams(o),x=g.dx_a+g.dx_l/2,p=(t[1]-t[0])/c.len*2,j=((t[1]-t[0])/c.len-2*x)/2;return j+p<0&&console.warn("SVG width too small! ".concat(j+p)),n.forEach((function(t){var r=i[t],c=a[t];if(!f&&0!==f)return h=t,d=r,f=c,void(1===n.length?m.push("M ".concat(r,",").concat(c)):e[0].includes(t)?e[0].includes(n[1])?m.push("M ".concat(r,",").concat(c)):(i[n[1]]>0&&m.push("M ".concat(r,",").concat(c+s)),a[n[1]]<0&&m.push("M ".concat(r,",").concat(c-s))):m.push("M ".concat(r,",").concat(c)));c>f?(m.push("h ".concat(0===c?r-d-p*l.leftWideFactor(t)-j-2*x:p*l.rightWideFactor(h)+j)),m.push(l.pathTurnSE(o))):c<f&&(m.push("h ".concat(0===c?r-d-p*l.leftWideFactor(t)-j-2*x:p*l.rightWideFactor(h)+j)),m.push(l.pathTurnNE(o))),m.push("H ".concat(r)),h=t,d=r,f=c})),m.join(" ").replace(/( H ([\d.]+))+/g," H $2")}}],[{key:"getYShares",value:function(n,t){console.log("computing y shares");var e=new this({stnList:n});return Object.keys(n).forEach((function(n){["linestart","lineend"].includes(n)||n in e.yShares||e.getYShare(n,t)})),e.yShares}},{key:"drawLine",value:function(n,t,e,r,i,a,o,c){var s=this,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:9.68,u={main:[],pass:[]};return n.forEach((function(h,f){var d=(h=h.filter((function(n){return!["linestart","lineend"].includes(n)}))).filter((function(n){return t[n]>=0})),m=h.filter((function(n){return t[n]<=0}));1===d.length&&(m=h),0===d.filter((function(n){return-1!==m.indexOf(n)})).length&&d.length&&(m[0]===h[0]?m.push(d[0]):d[0]===h[0]&&d[d.length-1]===h[h.length-1]&&m.length?(m=h,d=[]):m.unshift(d[d.length-1])),u.main.push(new s({stnList:e,criticalPath:c})._linePath(d,r,n,i,a,o,c,l)),u.pass.push(new s({stnList:e,criticalPath:c})._linePath(m,r,n,i,a,o,c,l))})),u}}]),n}(),x=function(n,t){var e=(n=n.filter((function(n){return!["linestart","lineend"].includes(n)}))).filter((function(n){return t[n]>=0})),r=n.filter((function(n){return t[n]<=0}));return 1===e.length&&(r=n),0===e.filter((function(n){return-1!==r.indexOf(n)})).length&&e.length&&(r[0]===n[0]?r.push(e[0]):e[0]===n[0]&&e[e.length-1]===n[n.length-1]&&r.length?(r=n,e=[]):r.unshift(e[e.length-1])),{main:e,pass:r}}}}]);
//# sourceMappingURL=3863.1bdffdcc.chunk.js.map