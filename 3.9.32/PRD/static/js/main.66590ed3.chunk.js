(this["webpackJsonprail-map-generator"]=this["webpackJsonprail-map-generator"]||[]).push([[83],[,,function(n,e,t){"use strict";t.d(e,"g",(function(){return a})),t.d(e,"k",(function(){return i})),t.d(e,"c",(function(){return c})),t.d(e,"a",(function(){return j})),t.d(e,"n",(function(){return m})),t.d(e,"d",(function(){return s})),t.d(e,"m",(function(){return u})),t.d(e,"b",(function(){return l})),t.d(e,"h",(function(){return d})),t.d(e,"l",(function(){return h})),t.d(e,"e",(function(){return f})),t.d(e,"i",(function(){return b})),t.d(e,"j",(function(){return g})),t.d(e,"f",(function(){return p}));var r,a,i,c,o=t(4);!function(n){n.init="init",n.loading="loading",n.loaded="loaded",n.failed="failed"}(a||(a={})),function(n){n.MTR="mtr",n.GZMTR="gzmtr",n.SHMetro="shmetro"}(i||(i={})),function(n){n.Destination="destination",n.RunIn="runin",n.RailMap="railmap",n.Indoor="indoor"}(c||(c={}));var s,u,l,d,h,f,b,g,p,j="all",m=(r={},Object(o.a)(r,i.MTR,[c.Destination,c.RailMap]),Object(o.a)(r,i.GZMTR,[c.RunIn,c.RailMap]),Object(o.a)(r,i.SHMetro,[c.Destination,c.RunIn,c.RailMap,c.Indoor]),r);!function(n){n.left="left",n.right="right"}(s||(s={})),function(n){n.left="l",n.right="r"}(u||(u={})),function(n){n.through="through",n.nonThrough="nonthrough"}(l||(l={})),function(n){n.black="#000",n.white="#fff"}(d||(d={})),function(n){n.local="local",n.express="express",n.direct="direct"}(h||(h={})),function(n){n.airport="airport",n.disney="disney",n.hsr="hsr",n.none=""}(f||(f={})),function(n){n.gz1="gz1",n.gz28="gz28",n.gz2otis="gz2otis",n.gz3="gz3",n.gz4="gz4",n.gz5="gz5",n.gz1421="gz1421",n.gz6="gz6",n.gzgf="gzgf"}(b||(b={})),function(n){n.sh="sh",n.sh2020="sh2020"}(g||(g={})),function(n){n.Catalan="ca",n.English="en",n.Spanish="es",n.French="fr",n.Gaelic="ga",n.Japanese="ja",n.Korean="ko",n.Norwegian="no",n.Portuguese="pt",n.Swedish="sv",n.Chinese="zh",n.ChineseCN="zh-CN",n.ChineseSimp="zh-Hans",n.ChineseTrad="zh-Hant",n.ChineseHK="zh-HK",n.ChineseTW="zh-TW"}(p||(p={}))},function(n,e){n.exports=MaterialUI},,function(n,e){n.exports=React},,function(n,e,t){"use strict";t.d(e,"g",(function(){return c})),t.d(e,"r",(function(){return o})),t.d(e,"s",(function(){return s})),t.d(e,"u",(function(){return u})),t.d(e,"a",(function(){return l})),t.d(e,"l",(function(){return d})),t.d(e,"e",(function(){return h})),t.d(e,"f",(function(){return f})),t.d(e,"t",(function(){return b})),t.d(e,"h",(function(){return g})),t.d(e,"d",(function(){return p})),t.d(e,"n",(function(){return j})),t.d(e,"i",(function(){return m})),t.d(e,"o",(function(){return O})),t.d(e,"m",(function(){return v})),t.d(e,"k",(function(){return y})),t.d(e,"j",(function(){return _})),t.d(e,"c",(function(){return S})),t.d(e,"b",(function(){return w})),t.d(e,"p",(function(){return x})),t.d(e,"q",(function(){return T})),t.d(e,"K",(function(){return k})),t.d(e,"S",(function(){return z})),t.d(e,"T",(function(){return N})),t.d(e,"V",(function(){return E})),t.d(e,"F",(function(){return M})),t.d(e,"N",(function(){return R})),t.d(e,"I",(function(){return C})),t.d(e,"J",(function(){return I})),t.d(e,"U",(function(){return H})),t.d(e,"L",(function(){return P})),t.d(e,"H",(function(){return F})),t.d(e,"P",(function(){return B})),t.d(e,"M",(function(){return D})),t.d(e,"Q",(function(){return A})),t.d(e,"O",(function(){return G})),t.d(e,"w",(function(){return L})),t.d(e,"Z",(function(){return K})),t.d(e,"C",(function(){return U})),t.d(e,"W",(function(){return J})),t.d(e,"A",(function(){return X})),t.d(e,"X",(function(){return Y})),t.d(e,"y",(function(){return q})),t.d(e,"G",(function(){return Q})),t.d(e,"R",(function(){return nn})),t.d(e,"E",(function(){return en})),t.d(e,"db",(function(){return tn})),t.d(e,"hb",(function(){return rn})),t.d(e,"eb",(function(){return an})),t.d(e,"v",(function(){return cn})),t.d(e,"B",(function(){return on})),t.d(e,"Y",(function(){return sn})),t.d(e,"fb",(function(){return un})),t.d(e,"ib",(function(){return ln})),t.d(e,"gb",(function(){return dn})),t.d(e,"bb",(function(){return hn})),t.d(e,"ab",(function(){return fn})),t.d(e,"z",(function(){return bn})),t.d(e,"cb",(function(){return gn})),t.d(e,"x",(function(){return pn})),t.d(e,"D",(function(){return jn}));var r=t(4),a=t(1),i=t(13),c="SET_FULL_PARAM",o="SET_SVG_HEIGHT",s="SET_SVG_WIDTH",u="SET_Y_PERCENTAGE",l="SET_BRANCH_SPACING",d="SET_PADDING_PERCENTAGE",h="SET_DIRECTION_INDICATOR_X",f="SET_DIRECTION_INDICATOR_Y",b="SET_THEME",g="SET_LINE_NAME",p="SET_DIRECTION",j="SET_PLATFORM",m="SET_LINE_NUM",O="SET_PSD_NUM",v="SET_PANEL_TYPE",y="SET_NOTES",_="SET_NAME_POSITION",S="SET_CUSTOMISED_MTR_DESTINATION",w="SET_CURRENT_STATION",x="SET_STATION",T="SET_STATIONS_BULK",k=function(n){return function(e){e({type:c,fullParam:n}),e(Object(i.e)())}},z=function(n){return{type:o,svgHeight:n}},N=function(n,e){return{type:s,svgWidth:n,canvas:e}},E=function(n){return{type:u,yPercentage:n}},M=function(n){return{type:l,branchSpacing:n}},R=function(n){return{type:d,paddingPercentage:n}},C=function(n){return{type:h,directionIndicatorX:n}},I=function(n){return{type:f,directionIndicatorY:n}},H=function(n){return{type:b,theme:n}},P=function(n){return{type:g,lineName:n}},F=function(n){return{type:p,direction:n}},B=function(n){return{type:j,platform:n}},D=function(n){return{type:m,lineNum:n}},A=function(n){return{type:O,psdNum:n}},G=function(n){return{type:v,panelType:n}},W=function(n){return{type:y,notes:n}},L=function(){return function(n,e){var t=e().param.notesGZMTR;n(W(t.concat([["","",0,0,!1]])))}},K=function(n,e){return function(t,r){var a=r().param.notesGZMTR;t(W(a.map((function(t,r){return r===n?e:t}))))}},U=function(n){return function(e,t){var r=t().param.notesGZMTR;e(W(r.filter((function(e,t){return t!==n}))))}},Z=function(n){return{type:_,namePosition:n}},J=function(n){return function(e,t){var r=t().param.namePosMTR;e(Z(Object(a.a)(Object(a.a)({},r),{},{isStagger:n})))}},X=function(){return function(n,e){var t=e().param.namePosMTR;n(Z(Object(a.a)(Object(a.a)({},t),{},{isFlip:!t.isFlip})))}},V=function(n){return{type:S,customisedMtrDestination:n}},Y=function(n){return function(e,t){var r=t().param.customiseMTRDest;e(V(Object(a.a)(Object(a.a)({},r),{},{isLegacy:n})))}},q=function(n){return function(e,t){var r=t().param.customiseMTRDest;e(V(Object(a.a)(Object(a.a)({},r),{},{terminal:n})))}},Q=function(n){return{type:w,currentStation:n}},$=function(n,e){return function(t){t({type:x,stationId:n,station:e}),t(Object(i.e)())}},nn=function(n){return function(e){e({type:T,stations:n}),e(Object(i.e)())}},en=function(){return function(n,e){var t=e().param.stn_list,i=Object.keys(t).reduce((function(n,e){return Object(a.a)(Object(a.a)({},n),{},Object(r.a)({},e,function(n){switch(n){case"linestart":return Object(a.a)(Object(a.a)({},t.lineend),{},{parents:[],children:t.lineend.parents.slice().reverse(),branch:{left:[],right:t.lineend.branch.left}});case"lineend":return Object(a.a)(Object(a.a)({},t.linestart),{},{parents:t.linestart.children.slice().reverse(),children:[],branch:{left:t.linestart.branch.right,right:[]}});default:return Object(a.a)(Object(a.a)({},t[n]),{},{parents:t[n].children.map((function(n){return"linestart"===n?"lineend":"lineend"===n?"linestart":n})).reverse(),children:t[n].parents.map((function(n){return"linestart"===n?"lineend":"lineend"===n?"linestart":n})).reverse(),branch:{left:t[n].branch.right,right:t[n].branch.left}})}}(e)))}),{});n(nn(i))}},tn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t($(n,Object(a.a)(Object(a.a)({},i),{},{name:e})))}},rn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t($(n,Object(a.a)(Object(a.a)({},i),{},{secondaryName:e})))}},an=function(n,e){return function(t,r){var i=r().param.stn_list[n];t($(n,Object(a.a)(Object(a.a)({},i),{},{num:e})))}},cn=function(n,e,t){return function(r,i){var c=i().param.stn_list[n],o=c.transfer.info.map((function(n){return n.slice()}));if(o.length>e)o[e].push(t);else{for(var s=o.length;s<e;s++)o[s]=[];o[e]=[t]}r($(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{info:o})})))}},on=function(n,e,t){return function(r,i){var c=i().param.stn_list[n];if(c.transfer.info.length>e&&c.transfer.info[e].length>t){var o=c.transfer.info.map((function(n,r){return r===e?n.filter((function(n,e){return e!==t})):n}));r($(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{info:o})})))}}},sn=function(n,e,t,r){return function(i,c){var o=c().param.stn_list[n];if(o.transfer.info.length>e&&o.transfer.info[e].length>t){var s=o.transfer.info.map((function(n,a){return a===e?n.map((function(n,e){return e===t?[0,1,2,3,4,5].map((function(e){return void 0===r[e]?n[e]:r[e]})):n})):n}));i($(n,Object(a.a)(Object(a.a)({},o),{},{transfer:Object(a.a)(Object(a.a)({},o.transfer),{},{info:s})})))}}},un=function(n,e,t){return function(r,i){var c=i().param.stn_list[n],o=c.transfer.osi_names.map((function(n){return n.slice()}));if(o.length>e)o[e]=t;else{for(var s=o.length;s<e;s++)o[s]=["\u8eca\u7ad9\u540d","Stn Name"];o[e]=t}r($(n,Object(a.a)(Object(a.a)({},c),{},{transfer:Object(a.a)(Object(a.a)({},c.transfer),{},{osi_names:o})})))}},ln=function(n,e){return function(t,r){var i=r().param.stn_list[n];t($(n,Object(a.a)(Object(a.a)({},i),{},{transfer:Object(a.a)(Object(a.a)({},i.transfer),{},{tick_direc:e})})))}},dn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t($(n,Object(a.a)(Object(a.a)({},i),{},{transfer:Object(a.a)(Object(a.a)({},i.transfer),{},{paid_area:e})})))}},hn=function(n,e,t){return function(i,c){var o=c().param.stn_list[n];i($(n,Object(a.a)(Object(a.a)({},o),{},{branch:Object(a.a)(Object(a.a)({},o.branch),{},Object(r.a)({},e,[t,o.branch[e][1]]))})))}},fn=function(n){return function(e,t){var i,c=t().param.stn_list;e(nn(Object(a.a)(Object(a.a)({},c),{},(i={},Object(r.a)(i,n[0].stnId,Object(a.a)(Object(a.a)({},c[n[0].stnId]),{},{branch:Object(a.a)(Object(a.a)({},c[n[0].stnId].branch),{},Object(r.a)({},n[0].direction,[c[n[0].stnId].branch[n[0].direction][0],n[0].first]))})),Object(r.a)(i,n[1].stnId,Object(a.a)(Object(a.a)({},c[n[1].stnId]),{},{branch:Object(a.a)(Object(a.a)({},c[n[1].stnId].branch),{},Object(r.a)({},n[1].direction,[c[n[1].stnId].branch[n[1].direction][0],n[1].first]))})),i))))}},bn=function(n,e){return function(t,i){var c,o=i().param.stn_list;t(nn(Object(a.a)(Object(a.a)({},o),{},(c={},Object(r.a)(c,n,Object(a.a)(Object(a.a)({},o[n]),{},{parents:o[n].parents.slice().reverse()})),Object(r.a)(c,e,Object(a.a)(Object(a.a)({},o[e]),{},{children:o[e].children.slice().reverse()})),c))))}},gn=function(n,e){return function(t,r){var i=r().param.stn_list[n];t($(n,Object(a.a)(Object(a.a)({},i),{},{facility:e})))}},pn=function(n,e){return function(t,r){var i=r().param.stn_list[n];i.services.includes(e)||t($(n,Object(a.a)(Object(a.a)({},i),{},{services:i.services.concat(e)})))}},jn=function(n,e){return function(t,r){var i=r().param.stn_list[n];i.services.includes(e)&&t($(n,Object(a.a)(Object(a.a)({},i),{},{services:i.services.filter((function(n){return n!==e}))})))}}},function(n,e,t){"use strict";t.d(e,"b",(function(){return m})),t.d(e,"c",(function(){return O}));var r=t(21),a=t(31),i=t.n(a),c=t(1),o=t(2),s=t(9),u={rmgStyle:o.k.MTR,canvasScale:1,canvasScaleStatus:o.g.init,canvasToShow:o.a,canvasToShowStatus:o.g.init};var l=t(25),d=t(7),h={svgWidth:{destination:100,runin:100,railmap:100,indoor:100},svg_height:100,y_pc:50,padding:10,branch_spacing:10,direction:o.m.left,platform_num:"1",theme:[l.a.HongKong,"twl","#E2231A",o.h.white],line_name:["\u7dda","line"],current_stn_idx:"",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:o.i.gz1,notesGZMTR:[],direction_gz_x:0,direction_gz_y:0};var f=t(13),b={depsStr:"",branches:[],routes:[],tpo:[]};var g=t(18),p=Object(r.combineReducers)({app:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s.e:n.rmgStyle=e.rmgStyle;break;case s.a:n.canvasScale=e.canvasScale;break;case s.b:n.canvasScaleStatus=e.canvasScaleStatus;break;case s.c:n.canvasToShow=e.canvasToShow;break;case s.d:n.canvasToShowStatus=e.canvasToShowStatus}return Object(c.a)({},n)},param:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d.g:return e.fullParam;case d.r:n.svg_height=e.svgHeight;break;case d.s:n.svgWidth[e.canvas]=e.svgWidth;break;case d.u:n.y_pc=e.yPercentage;break;case d.a:n.branch_spacing=e.branchSpacing;break;case d.l:n.padding=e.paddingPercentage;break;case d.e:n.direction_gz_x=e.directionIndicatorX;break;case d.f:n.direction_gz_y=e.directionIndicatorY;break;case d.t:n.theme=e.theme;break;case d.h:n.line_name=e.lineName;break;case d.d:n.direction=e.direction;break;case d.n:n.platform_num=e.platform;break;case d.i:n.line_num=e.lineNum;break;case d.o:n.psd_num=e.psdNum;break;case d.m:n.info_panel_type=e.panelType;break;case d.k:n.notesGZMTR=e.notes;break;case d.j:n.namePosMTR=e.namePosition;break;case d.c:n.customiseMTRDest=e.customisedMtrDestination;break;case d.b:n.current_stn_idx=e.currentStation;break;case d.p:n.stn_list[e.stationId]=e.station;break;case d.q:n.stn_list=e.stations}return Object(c.a)({},n)},helper:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f.b:n.depsStr=e.depsStr;break;case f.a:n.branches=e.branches;break;case f.c:n.routes=e.routes;break;case f.d:n.tpo=e.tpo}return Object(c.a)({},n)}}),j=Object(r.createStore)(p,Object(r.applyMiddleware)(i.a)),m=(e.a=j,function(){return Object(g.useDispatch)()}),O=g.useSelector},function(n,e,t){"use strict";t.d(e,"e",(function(){return o})),t.d(e,"a",(function(){return s})),t.d(e,"b",(function(){return u})),t.d(e,"c",(function(){return l})),t.d(e,"d",(function(){return d})),t.d(e,"i",(function(){return h})),t.d(e,"g",(function(){return f})),t.d(e,"j",(function(){return g})),t.d(e,"k",(function(){return p})),t.d(e,"h",(function(){return j})),t.d(e,"f",(function(){return O}));var r=t(6),a=t.n(r),i=t(10),c=t(2),o="SET_RMG_STYLE",s="SET_CANVAS_SCALE",u="SET_CANVAS_SCALE_STATUS",l="SET_CANVAS_TO_SHOW",d="SET_CANVAS_TO_SHOW_STATUS",h=function(n){return{type:o,rmgStyle:n}},f=function(n){return{type:s,canvasScale:n}},b=function(n){return{type:u,canvasScaleStatus:n}},g=function(){return function(){var n=Object(i.a)(a.a.mark((function n(e,t){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(b(c.g.loading)),n.prev=1,r=Number((t().app.canvasScale+.1).toFixed(1)),e(f(r)),n.next=6,window.rmgStorage.writeFile("rmgScale",r.toString());case 6:e(b(c.g.loaded)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),e(b(c.g.failed));case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}()},p=function(){return function(){var n=Object(i.a)(a.a.mark((function n(e,t){var r,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(b(c.g.loading)),n.prev=1,r=t().app.canvasScale,i=Number(r.toFixed(1))<=.1?Number(r.toFixed(1)):Number((r-.1).toFixed(1)),e(f(i)),n.next=7,window.rmgStorage.writeFile("rmgScale",i.toString());case 7:e(b(c.g.loaded)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),e(b(c.g.failed));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}()},j=function(n){return{type:l,canvasToShow:n}},m=function(n){return{type:d,canvasToShowStatus:n}},O=function(n){return function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(m(c.g.loading)),e.prev=1,t(j(n)),e.next=5,window.rmgStorage.writeFile("rmgCanvas",n);case 5:t(m(c.g.loaded)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(m(c.g.failed));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}()}},,,,function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"a",(function(){return c})),t.d(e,"c",(function(){return o})),t.d(e,"d",(function(){return s})),t.d(e,"e",(function(){return h}));var r=t(11),a=t(12),i="SET_DEPS_STR",c="SET_BRANCHES",o="SET_ROUTES",s="SET_TPO",u=function(){return function(n,e){var t=e().param.stn_list,a=Object.entries(t).map((function(n){var e=Object(r.a)(n,2),t=e[0],a=e[1];return t+a.parents.toString()+a.children.toString()+JSON.stringify(a.branch)})).join("");return n({type:i,depsStr:a}),a}},l=function(){return function(n,e){console.log("Re-calculating branches...");var t=function(n){for(var e=["linestart"],t=[["linestart"]],r=0;e.length;){var a=e.shift(),i=t[r].slice(-1)[0]||null;for(i&&"linestart"!==a?t[r].push(a):t[r]=[a];"lineend"!==a;){var c=n[i=a].children;if(function(){switch(c.length){case 1:a=c[0];break;case 2:var o=n[i].branch.right[1];"through"===n[i].branch.right[0]?(t.push([a]),e.push(o)):0===r&&(t.push([i]),e.push(o)),a=c.filter((function(n){return n!==o}))[0]}}(),t[r].push(a),i===n[a].branch.left[1])break}r++}return t}(e().param.stn_list);return n({type:c,branches:t}),t}},d=function(){return function(n,e){console.log("Re-calculating routes...");var t,r=e().param.stn_list;n((t=function(n){for(var e=["linestart"],t=[["linestart"]],r=0;e.length;){var a=e.shift(),i=t[r].slice(-1)[0]||null;for(i&&"linestart"!==a?t[r].push(a):t[r]=[a];"lineend"!==a;){var c=n[i=a].children;if(function(){switch(c.length){case 1:a=c[0];break;case 2:var o=n[i].branch.right[1];"through"===n[i].branch.right[0]?(t.push(t[r].slice()),e.push(o)):0===r&&(t.push([i]),e.push(o)),a=c.filter((function(n){return n!==o}))[0]}}(),t[r].push(a),i===n[a].branch.left[1]&&"nonthrough"===n[a].branch.left[0])break}r++}return t}(r),{type:o,routes:t}))}},h=function(){return function(n,e){var t,r;if(e().helper.depsStr!==n(u())){n(d());var i=e().helper.branches,c=n(l());i.toString()!==c.toString()&&(console.log("Re-calculating topology ordering..."),n((t=1===(r=c).length?r[0].slice(1,-1):r.reduce((function(n,e){var t=n.indexOf(e[e.length-1]);return[].concat(Object(a.a)(n.slice(0,t)),Object(a.a)(e.slice(1)),Object(a.a)(n.slice(t+1)))}),["lineend"]).slice(0,-1),{type:s,tpo:t})))}}}},function(n,e){n.exports=ReactI18next},,function(n,e){n.exports=ReactRouterDOM},,function(n,e){n.exports=ReactRedux},,,function(n,e){n.exports=Redux},function(n,e,t){"use strict";t.d(e,"c",(function(){return c})),t.d(e,"b",(function(){return o})),t.d(e,"a",(function(){return s}));var r=t(24),a=t(11),i=t(2),c=function(n){var e;"line_name"in n||(n.line_name=["\u8def\u7dda\u540d","Name of Line"]),"dest_legacy"in n||(n.dest_legacy=!1),delete n.fontZH,delete n.fontEN,delete n.weightZH,delete n.weightEN;for(var t=0,r=Object.entries(n.stn_list);t<r.length;t++){var i=Object(a.a)(r[t],2),c=i[0],o=i[1];"branch"in o||(n.stn_list[c].branch={left:[],right:[]},2===o.children.length?n.stn_list[c].branch.right=["through",o.children[1]]:n.stn_list[c].branch.right=[],2===o.parents.length?n.stn_list[c].branch.left=["through",o.parents[1]]:n.stn_list[c].branch.left=[])}n.psd_num="psd_num"in n?n.psd_num.toString():"1","line_num"in n||(n.line_num="1"),delete n.style,3===n.theme.length&&n.theme.push("#fff");for(var s=0,u=Object.entries(n.stn_list);s<u.length;s++){var l=Object(a.a)(u[s],2),d=l[0],h=l[1];"num"in h||(n.stn_list[d].num="00"),"interchange"in h&&h.interchange.map((function(n){return n.forEach((function(n){5===n.length&&n.splice(3,0,"#fff")}))}))}for(var f=0,b=Object.entries(n.stn_list);f<b.length;f++){var g=Object(a.a)(b[f],2),p=g[0],j=g[1];"osi22_end_p"===j.change_type&&(n.stn_list[p].change_type="osi22_pr"),"osi22_end_u"===j.change_type&&(n.stn_list[p].change_type="osi22_ur")}for(var m=0,O=Object.entries(n.stn_list);m<O.length;m++){var v=Object(a.a)(O[m],2),y=v[0];"interchange"in v[1]||(n.stn_list[y].interchange=[[]])}n.info_panel_type="info_panel_type"in n?function(n){switch(n){case"gz_1":case"panasonic":return"gz28";case"gz_2":return"gz6";case"gz_3":return"gz3";default:return n}}(n.info_panel_type):"gz28","direction_gz_x"in n||(n.direction_gz_x=50),"direction_gz_y"in n||(n.direction_gz_y=70);for(var _=0,S=Object.entries(n.stn_list);_<S.length;_++){var w,x,T,k,z=Object(a.a)(S[_],2),N=z[0],E=z[1];if(!("transfer"in E))n.stn_list[N].transfer={tick_direc:"none"===E.change_type||"int2"===E.change_type?"r":null===(w=E.change_type)||void 0===w?void 0:w.split("_")[1].split("").slice().reverse()[0],paid_area:-1===(null===(x=E.change_type)||void 0===x?void 0:x.indexOf("osi"))||"p"===(null===(T=E.change_type)||void 0===T?void 0:T.split("_")[1][0]),osi_names:-1!==(null===(k=E.change_type)||void 0===k?void 0:k.indexOf("osi"))?[E.interchange[1][0]]:[],info:2===E.interchange.length?[E.interchange[0],E.interchange[1].slice(1)]:E.interchange};delete n.stn_list[N].change_type,delete n.stn_list[N].interchange}for(var M=0,R=Object.entries(n.stn_list);M<R.length;M++){var C=Object(a.a)(R[M],2),I=C[0],H=C[1];"services"in H||(n.stn_list[I].services=["local"]),"facility"in H||(n.stn_list[I].facility="usage"in H?H.usage:""),delete n.stn_list[I].usage}return"customiseMTRDest"in n||(n.customiseMTRDest={isLegacy:n.dest_legacy||!1,terminal:!1}),delete n.dest_legacy,"svgWidth"in n||(n.svgWidth={destination:n.svg_dest_width,runin:n.svg_dest_width,railmap:n.svg_width,indoor:n.svg_width}),"indoor"in n.svgWidth||(n.svgWidth.indoor=n.svgWidth.railmap),delete n.svg_width,delete n.svg_dest_width,"notesGZMTR"in n||(n.notesGZMTR=[]),n.notesGZMTR=null===(e=n.notesGZMTR)||void 0===e?void 0:e.map((function(n){return 4===n.length?n.concat([!1]):n})),delete n.char_form,delete n.show_outer,delete n.strip_pc,delete n.txt_bg_gap,"namePosMTR"in n||(n.namePosMTR={isStagger:!0,isFlip:n.txt_flip}),delete n.txt_flip,Object.keys(n.stn_list).forEach((function(e){"secondaryName"in n.stn_list[e]?!1!==n.stn_list[e].secondaryName&&","===n.stn_list[e].secondaryName.join()&&(n.stn_list[e].secondaryName=!1):n.stn_list[e].secondaryName=!1,"type"in n.stn_list[e].transfer&&delete n.stn_list[e].transfer.type})),n},o=function(n,e){var t,a=Object(r.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(n[c])return n[c]}}catch(o){a.e(o)}finally{a.f()}return n[i.f.English]},s=function(n,e){return(e===i.k.GZMTR?((null===n||void 0===n?void 0:n.num)||"-")+": ":"")+(null===n||void 0===n?void 0:n.name.join().replace("\\"," "))}},function(n,e){n.exports=i18next},,function(n,e,t){"use strict";var r;t.d(e,"a",(function(){return r})),t.d(e,"b",(function(){return a})),function(n){n.Barcelona="barcelona",n.Beijing="beijing",n.Changsha="changsha",n.Chengdu="chengdu",n.Chongqing="chongqing",n.Dongguan="dongguan",n.Edinburgh="edinburgh",n.Foshan="foshan",n.Glasgow="glasgow",n.Guangzhou="guangzhou",n.Hangzhou="hangzhou",n.HongKong="hongkong",n.Kansai="kansai",n.Kaohsiung="kaohsiung",n.London="london",n.Macao="macao",n.Madrid="madrid",n.Nanjing="nanjing",n.NewTaipei="newtaipei",n.Osaka="osaka",n.Oslo="oslo",n.Paris="paris",n.Qingdao="qingdao",n.SanFrancisco="sanfrancisco",n.Seoul="seoul",n.Shanghai="shanghai",n.Shenzhen="shenzhen",n.Singapore="singapore",n.Stockholm="stockholm",n.Taipei="taipei",n.Tianjin="tianjin",n.Tokyo="tokyo",n.Toronto="toronto",n.TyneAndWear="tyneandwear",n.Xian="xian",n.Other="other"}(r||(r={}));var a=[{id:r.Barcelona,country:"ES",name:{en:"Barcelona","zh-Hans":"\u5df4\u585e\u7f57\u90a3","zh-HK":"\u5df4\u585e\u9686\u62ff","zh-TW":"\u5df4\u585e\u9686\u7d0d"}},{id:r.Beijing,country:"CN",name:{en:"Beijing",zh:"\u5317\u4eac"}},{id:r.Changsha,country:"CN",name:{en:"Changsha","zh-Hans":"\u957f\u6c99","zh-Hant":"\u9577\u6c99"}},{id:r.Chengdu,country:"CN",name:{en:"Chengdu",zh:"\u6210\u90fd"}},{id:r.Chongqing,country:"CN",name:{en:"Chongqing","zh-Hans":"\u91cd\u5e86","zh-Hant":"\u91cd\u6176"}},{id:r.Dongguan,country:"CN",name:{en:"Dongguan","zh-Hans":"\u4e1c\u839e","zh-Hant":"\u6771\u839e"}},{id:r.Edinburgh,country:"GBSCT",name:{en:"Edinburgh",ga:"D\xf9n \xc8ideann","zh-Hans":"\u7231\u4e01\u5821","zh-Hant":"\u611b\u4e01\u5821"}},{id:r.Foshan,country:"CN",name:{en:"Foshan",zh:"\u4f5b\u5c71"}},{id:r.Glasgow,country:"GBSCT",name:{en:"Glasgow",ga:"Glaschu",zh:"\u683c\u62c9\u65af\u54e5"}},{id:r.Guangzhou,country:"CN",name:{en:"Guangzhou","zh-Hans":"\u5e7f\u5dde","zh-Hant":"\u5ee3\u5dde"}},{id:r.Hangzhou,country:"CN",name:{en:"Hangzhou",zh:"\u676d\u5dde"}},{id:r.HongKong,country:"HK",name:{en:"Hong Kong",zh:"\u9999\u6e2f"}},{id:r.Kansai,country:"JP",name:{en:"Kansai Area",ja:"\u8fd1\u757f\u5730\u65b9","zh-Hans":"\u8fd1\u757f\u5730\u65b9\uff08\u5173\u897f\u5730\u65b9\uff09","zh-Hant":"\u8fd1\u757f\u5730\u65b9\uff08\u95dc\u897f\u5730\u65b9\uff09"}},{id:r.Kaohsiung,country:"TW",name:{en:"Kaohsiung",zh:"\u9ad8\u96c4"}},{id:r.London,country:"GBENG",name:{en:"London","zh-Hans":"\u4f26\u6566","zh-Hant":"\u502b\u6566"}},{id:r.Macao,country:"MO",name:{en:"Macao",pt:"Macau","zh-Hans":"\u6fb3\u95e8","zh-Hant":"\u6fb3\u9580"}},{id:r.Madrid,country:"ES",name:{en:"Madrid","zh-Hans":"\u9a6c\u5fb7\u91cc","zh-Hant":"\u99ac\u5fb7\u91cc"}},{id:r.Nanjing,country:"CN",name:{en:"Nanjing",zh:"\u5357\u4eac"}},{id:r.NewTaipei,country:"TW",name:{en:"New Taipei",zh:"\u65b0\u5317"}},{id:r.Osaka,country:"JP",name:{en:"Osaka",ja:"\u5927\u962a",zh:"\u5927\u962a"}},{id:r.Oslo,country:"NO",name:{en:"Oslo","zh-Hans":"\u5965\u65af\u9646","zh-Hant":"\u5967\u65af\u9678"}},{id:r.Paris,country:"FR",name:{en:"Paris",zh:"\u5df4\u9ece"}},{id:r.Qingdao,country:"CN",name:{en:"Qingdao","zh-Hans":"\u9752\u5c9b","zh-Hant":"\u9752\u5cf6"}},{id:r.SanFrancisco,country:"US",name:{en:"San Francisco","zh-Hans":"\u65e7\u91d1\u5c71","zh-HK":"\u4e09\u85e9\u5e02","zh-TW":"\u820a\u91d1\u5c71"}},{id:r.Seoul,country:"KR",name:{en:"Seoul (Metropolitan Area)",ko:"\uc11c\uc6b8(\uc218\ub3c4\uad8c)","zh-Hans":"\u9996\u5c14\uff08\u9996\u90fd\u5708\uff09","zh-Hant":"\u9996\u723e\uff08\u9996\u90fd\u5708\uff09"}},{id:r.Shanghai,country:"CN",name:{en:"Shanghai",zh:"\u4e0a\u6d77"}},{id:r.Shenzhen,country:"CN",name:{en:"Shenzhen",zh:"\u6df1\u5733"}},{id:r.Singapore,country:"SG",name:{en:"Singapore",zh:"\u65b0\u52a0\u5761"}},{id:r.Stockholm,country:"SE",name:{en:"Stockholm","zh-Hans":"\u65af\u5fb7\u54e5\u5c14\u6469","zh-Hant":"\u65af\u5fb7\u54e5\u723e\u6469"}},{id:r.Taipei,country:"TW",name:{en:"Taipei",zh:"\u53f0\u5317"}},{id:r.Tianjin,country:"CN",name:{en:"Tianjin",zh:"\u5929\u6d25"}},{id:r.Tokyo,country:"JP",name:{en:"Tokyo (Greater Tokyo Area)",ja:"\u6771\u4eac\uff08\u9996\u90fd\u570f\uff09","zh-Hans":"\u4e1c\u4eac\uff08\u9996\u90fd\u5708\uff09","zh-Hant":"\u6771\u4eac\uff08\u9996\u90fd\u5708\uff09"}},{id:r.Toronto,country:"CA",name:{en:"Toronto","zh-Hans":"\u591a\u4f26\u591a","zh-Hant":"\u591a\u502b\u591a"}},{id:r.TyneAndWear,country:"GBENG",name:{en:"Tyne and Wear","zh-Hans":"\u6cf0\u6069-\u5a01\u5c14","zh-HK":"\u6cf0\u5a01","zh-TW":"\u6cf0\u6069-\u5a01\u723e"}},{id:r.Xian,country:"CN",name:{en:"Xi'an",zh:"\u897f\u5b89"}},{id:r.Other,country:"UN",name:{en:"Customise","zh-Hans":"\u81ea\u5b9a\u4e49","zh-Hant":"\u81ea\u8a02"}}]},,,function(n,e){n.exports=ReactDOM},function(n,e){n.exports=i18nextXHRBackend},function(n,e){n.exports=i18nextBrowserLanguageDetector},function(n,e){n.exports=ReduxThunk},,function(n,e,t){},,function(n,e,t){"use strict";t.r(e);var r=t(6),a=t.n(r),i=t(10),c=t(12),o=t(5),s=t.n(o),u=t(28),l=(t(33),t(23)),d=t.n(l),h=t(14),f=t(29),b=t.n(f),g=t(30),p=t.n(g);d.a.use(b.a).use(p.a).use(h.initReactI18next).init({fallbackLng:{"zh-CN":["zh-Hans","en"],"zh-Hant":["zh-HK","en"],"zh-HK":["zh-Hant","en"],"zh-TW":["zh-HK","zh-Hant"],default:["en"]},backend:{loadPath:"/RailMapGenerator/locale/{{lng}}.json"},interpolation:{escapeValue:!1}}).then((function(n){document.title=n("title"),document.documentElement.setAttribute("lang",d.a.language)}));var j,m,O,v,y=t(16),_=t(11),S=t(3),w=t(2),x=t(8),T=t(9),k=t(0),z=Object(S.makeStyles)((function(n){return Object(S.createStyles)({rootLight:{backgroundColor:n.palette.primary.main},rootDark:{backgroundColor:n.palette.background.paper},title:{flexGrow:1,color:"#fff"},menuButton:{color:"#fff"}})})),N=function(){var n=Object(h.useTranslation)(),e=n.t,t=n.i18n,r=z(),a=Object(S.useMediaQuery)("(prefers-color-scheme: dark)");return s.a.useMemo((function(){return Object(k.jsx)(S.AppBar,{position:"sticky",className:a?r.rootDark:r.rootLight,children:Object(k.jsxs)(S.Toolbar,{variant:"dense",children:[Object(k.jsx)(S.Typography,{variant:"h6",className:r.title,color:"textPrimary",children:"/RailMapGenerator".includes("uat")?e("titleUAT"):e("title")}),Object(k.jsx)(E,{}),Object(k.jsx)(M,{})]})})}),[a,t.language])},E=function(){var n=Object(h.useTranslation)().t,e=z(),t=Object(x.b)(),r=Object(x.c)((function(n){return n.app.rmgStyle})),a=s.a.useState(null),i=Object(_.a)(a,2),c=i[0],o=i[1],u=function(n){return function(){t(Object(T.f)(n)),o(null)}};return s.a.useMemo((function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(S.Tooltip,{title:n("toggle.tooltip"),children:Object(k.jsx)(S.IconButton,{onClick:function(n){return o(n.currentTarget)},className:e.menuButton,children:Object(k.jsx)(S.Icon,{children:"photo_library"})})}),Object(k.jsxs)(S.Menu,{anchorEl:c,open:Boolean(c),onClose:function(){return o(null)},children:[w.n[r].map((function(e){return Object(k.jsx)(S.MenuItem,{onClick:u(e),children:n("toggle."+e)},e)})),Object(k.jsx)(S.Divider,{style:{margin:"6px 0"}}),Object(k.jsx)(S.MenuItem,{onClick:u(w.a),children:n("toggle.all")})]})]})}),[r,c,e.menuButton])},M=function(){var n=Object(h.useTranslation)().t,e=z(),t=Object(x.b)();return s.a.useMemo((function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(S.Tooltip,{title:n("zoom.out"),children:Object(k.jsx)(S.IconButton,{onClick:function(){return t(Object(T.k)())},className:e.menuButton,children:Object(k.jsx)(S.Icon,{children:"zoom_out"})})}),Object(k.jsx)(S.Tooltip,{title:n("zoom.in"),children:Object(k.jsx)(S.IconButton,{onClick:function(){return t(Object(T.j)())},className:e.menuButton,children:Object(k.jsx)(S.Icon,{children:"zoom_in"})})})]})}),[e.menuButton])},R=t(1),C=t(4),I=t(19),H=t(20),P=t(27),F=t(26),B=function(n){Object(P.a)(t,n);var e=Object(F.a)(t);function t(n){var r;return Object(I.a)(this,t),(r=e.call(this,n)).state={hasError:!1},r}return Object(H.a)(t,[{key:"componentDidCatch",value:function(n,e){}},{key:"render",value:function(){return this.state.hasError?Object(k.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0}}}]),t}(s.a.Component),D=Object(S.makeStyles)((function(){return Object(S.createStyles)({root:{display:"flex",flexDirection:"row",overflowX:"scroll","&::before, &::after":{content:'""',margin:"auto"},"& > svg":{flex:"0 0 auto",border:"1px solid black"}}})})),A=function(){var n=D(),e=Object(x.c)((function(n){return n.app.canvasScale})),t=Object(x.c)((function(n){return n.param.svg_height})),r=Object(x.c)((function(n){return n.param.svgWidth})),a=Object(x.c)((function(n){return n.param.theme})),i=Object(o.useCallback)((function(n){var i;return{id:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",height:t*e,viewBox:"0 0 ".concat(r[n]," ").concat(t),colorInterpolationFilters:"sRGB",style:(i={},Object(C.a)(i,"--rmg-svg-width",r[n]+"px"),Object(C.a)(i,"--rmg-svg-height",t+"px"),Object(C.a)(i,"--rmg-theme-colour",a[2]),Object(C.a)(i,"--rmg-theme-fg",a[3]),i)}}),[t,JSON.stringify(r),a,e]);return Object(k.jsx)("div",{className:n.root,children:Object(k.jsxs)(y.Switch,{children:[Object.values(w.k).map((function(n){return Object(k.jsx)(y.Route,{path:"/".concat(n),children:Object(k.jsx)(G,{style:n,canvasAvailable:Y[n],svgProps:i})},n)})),Object(k.jsx)(y.Redirect,{to:"/"+w.k.MTR})]})})},G=Object(o.memo)((function(n){var e=Object(x.b)(),t=Object(x.c)((function(n){return n.app.canvasToShow}));return e(Object(T.i)(n.style)),Object(o.useEffect)((function(){["share"].concat(Object(c.a)(Object.values(w.c))).forEach((function(e){e in n.canvasAvailable||"share"===e?document.getElementById("css_"+e).href="/RailMapGenerator"+"/styles/".concat(e,"_").concat(n.style,".css"):document.getElementById("css_"+e).href=""})),![].concat(Object(c.a)(w.n[n.style]),[w.a]).includes(t)&&e(Object(T.f)(w.a))}),[]),Object(k.jsx)(k.Fragment,{children:Object.keys(n.canvasAvailable).map((function(e){return[w.a,e].includes(t)&&Object(k.jsx)(s.a.Suspense,{fallback:Object(k.jsx)(S.CircularProgress,{}),children:Object(k.jsx)(B,{children:Object(k.jsxs)("svg",Object(R.a)(Object(R.a)({},n.svgProps(e)),{},{children:[Object(k.jsx)("rect",{id:"canvas-bg",fill:"white",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}}),n.canvasAvailable[e],Object(k.jsx)("rect",{id:"canvas-border",fill:"none",strokeWidth:3,stroke:"none",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}})]}))})},e)}))})})),W=Object(o.lazy)((function(){return t.e(102).then(t.bind(null,148))})),L=Object(o.lazy)((function(){return t.e(99).then(t.bind(null,142))})),K=Object(o.lazy)((function(){return t.e(80).then(t.bind(null,128))})),U=Object(o.lazy)((function(){return t.e(100).then(t.bind(null,143))})),Z=Object(o.lazy)((function(){return t.e(81).then(t.bind(null,129))})),J=Object(o.lazy)((function(){return t.e(103).then(t.bind(null,130))})),X=Object(o.lazy)((function(){return t.e(101).then(t.bind(null,144))})),V=Object(o.lazy)((function(){return t.e(82).then(t.bind(null,149))})),Y=(v={},Object(C.a)(v,w.k.GZMTR,(j={},Object(C.a)(j,w.c.RunIn,Object(k.jsx)(W,{})),Object(C.a)(j,w.c.RailMap,Object(k.jsx)(L,{})),j)),Object(C.a)(v,w.k.MTR,(m={},Object(C.a)(m,w.c.Destination,Object(k.jsx)(K,{})),Object(C.a)(m,w.c.RailMap,Object(k.jsx)(U,{})),m)),Object(C.a)(v,w.k.SHMetro,(O={},Object(C.a)(O,w.c.Destination,Object(k.jsx)(Z,{})),Object(C.a)(O,w.c.RunIn,Object(k.jsx)(J,{})),Object(C.a)(O,w.c.RailMap,Object(k.jsx)(X,{})),Object(C.a)(O,w.c.Indoor,Object(k.jsx)(V,{})),O)),v),q=A,Q=o.lazy((function(){return t.e(92).then(t.bind(null,141))})),$=o.lazy((function(){return t.e(89).then(t.bind(null,145))})),nn=o.lazy((function(){return t.e(84).then(t.bind(null,146))})),en=o.lazy((function(){return t.e(94).then(t.bind(null,140))})),tn=o.lazy((function(){return t.e(88).then(t.bind(null,131))})),rn=Object(S.makeStyles)((function(n){var e;return Object(S.createStyles)({root:Object(C.a)({display:"flex",flexDirection:"row",height:"100%"},n.breakpoints.down("xs"),{flexDirection:"column"}),typography:{background:n.palette.background.default},tab:(e={padding:"6px 24px",height:48,"& .MuiTab-wrapper":{flexDirection:"row"}},Object(C.a)(e,n.breakpoints.up("sm"),{"& .MuiTab-wrapper":{justifyContent:"flex-start"}}),Object(C.a)(e,n.breakpoints.down("xs"),{minWidth:"calc(100% / 5)"}),Object(C.a)(e,"&.MuiTab-labelIcon",{minHeight:"unset","& .MuiTab-wrapper":{"& > *:first-child":{marginBottom:0},"& > *:not(first-child)":{paddingLeft:8}}}),e),tabs:{overflow:"auto","&::-webkit-scrollbar":{width:0},scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},tabpanel:{overflow:"auto",flex:1,padding:n.spacing(3),paddingBottom:0,height:"calc(100% - ".concat(n.spacing(3),"px)"),display:"flex",justifyContent:"center",alignItems:"flex-start"}})}));function an(){var n=Object(h.useTranslation)(),e=n.t,t=n.i18n,r=rn(),a=Object(S.useTheme)(),i=Object(S.useMediaQuery)(a.breakpoints.down("xs")),c=o.useState(0),s=Object(_.a)(c,2),u=s[0],l=s[1],d=o.useMemo((function(){return Object(k.jsx)(S.Typography,{className:"".concat(r.typography," ").concat(r.tabs),component:"div",children:Object(k.jsx)(S.Tabs,{value:u,orientation:i?"horizontal":"vertical",indicatorColor:"primary",textColor:"primary",onChange:function(n,e){return l(e)},variant:"scrollable",scrollButtons:"off",children:[["file","insert_drive_file"],["layout","panorama"],["design","brush"],["stations","directions_transit"],["info","info"]].map((function(n,t){return Object(k.jsx)(S.Tab,{label:Object(k.jsx)("span",{children:e("tab."+n[0])}),icon:Object(k.jsx)(S.Icon,{children:n[1]}),className:r.tab},t)}))})})}),[u,t.language,r.tab,i]);return Object(k.jsxs)("div",{className:r.root,children:[d,Object(k.jsx)(S.Typography,{className:"".concat(r.typography," ").concat(r.tabpanel),component:"div",role:"tabpanel",children:Object(k.jsx)(o.Suspense,{fallback:Object(k.jsx)(S.CircularProgress,{}),children:function(n){switch(n){case 0:return Object(k.jsx)(Q,{});case 1:return Object(k.jsx)($,{});case 2:return Object(k.jsx)(nn,{});case 3:return Object(k.jsx)(en,{});case 4:return Object(k.jsx)(tn,{});default:return Object(k.jsx)(Q,{})}}(u)})})]})}function cn(){return Object(k.jsx)(o.Suspense,{fallback:Object(k.jsx)(S.CircularProgress,{}),children:Object(k.jsx)(an,{})})}var on=Object(S.createMuiTheme)({palette:{type:"dark",primary:{main:"#bb86fc"},secondary:{main:"#018786"},error:{main:"#cf6679"}},overrides:{MuiDialog:{paper:{minWidth:280}}}}),sn=Object(S.createMuiTheme)({palette:{primary:{light:"#bb86fc",main:"#6200ee"},secondary:{main:"#018786"},error:{main:"#b00020"}},overrides:{MuiDialog:{paper:{minWidth:280}}}});function un(){var n=Object(S.useMediaQuery)("(prefers-color-scheme: dark)")?on:sn;return Object(k.jsx)(y.BrowserRouter,{basename:"/RailMapGenerator",children:Object(k.jsxs)(S.ThemeProvider,{theme:n,children:[Object(k.jsx)(s.a.Suspense,{fallback:Object(k.jsx)(S.LinearProgress,{}),children:Object(k.jsx)(N,{})}),Object(k.jsx)(ln,{})]})})}var ln=function(){var n=Object(x.c)((function(n){return n.param})),e=JSON.stringify(n);return Object(o.useEffect)((function(){window.rmgStorage.writeFile("rmgParam",e).then()}),[e]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{style:{overflowY:"auto"},children:Object(k.jsx)(q,{})}),Object(k.jsx)("div",{style:{flex:1,overflow:"hidden"},children:Object(k.jsx)(cn,{})}),Object(k.jsx)("canvas",{style:{display:"none"}})]})},dn=t(22);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var hn=function(){function n(){Object(I.a)(this,n),this.currentBusyFilename=void 0,this.currentBusyFilename=!1}return Object(H.a)(n,[{key:"init",value:function(){var n=Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.warn("Using localStorage, please update your browser"),window.localStorage){n.next=4;break}throw alert("Local storage is not available! Please upgrade to a newer browser!"),new Error("LocalStorage unavailable");case 4:n.prev=4,window.localStorage.setItem("storage_test","1"),window.localStorage.removeItem("storage_test"),n.next=13;break;case 9:throw n.prev=9,n.t0=n.catch(4),alert("Local storage is not accessible! Please modify your browser's settings or try with another browser!"),new Error("LocalStorage no write permission");case 13:case"end":return n.stop()}}),n,null,[[4,9]])})));return function(){return n.apply(this,arguments)}}()},{key:"writeFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e,t){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.currentBusyFilename===e&&console.warn("Attempt to write",e,"while write process is not finished!"),this.currentBusyFilename=e,window.localStorage.setItem(e,t),this.currentBusyFilename=!1;case 4:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}()},{key:"readFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e){var t;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.currentBusyFilename===e&&console.warn("Attempt to read",e,"while write process is not finished!"),t=window.localStorage.getItem(e)){n.next=4;break}throw new Error("FILE_NOT_FOUND");case 4:return n.abrupt("return",t);case 5:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var n=Object(i.a)(a.a.mark((function n(e){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.currentBusyFilename===e&&console.warn("Attempt to delete",e,"while write process is not finished!"),this.currentBusyFilename=e,window.localStorage.removeItem(e),this.currentBusyFilename=!1;case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()}]),n}();function fn(){return(fn=Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.indexedDB){n.next=3;break}return console.log("IndexedDB not supported"),n.abrupt("return",new hn);case 3:return n.next=5,new Promise((function(n){try{var e=window.indexedDB.open("indexeddb_feature_detection",1);e.onerror=function(e){console.log("IndexedDB can NOT be accessed:",e),console.log("Fallback to LocalStorage"),n(new hn)},e.onsuccess=function(){console.log("IndexedDB can be accessed"),n(new hn)}}catch(t){console.warn("Error while opening IndexedDB:",t),n(new hn)}}));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var bn,gn=t(18),pn=t(7);"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)})),(bn=document.head).append.apply(bn,Object(c.a)(["share"].concat(Object(c.a)(Object.values(w.c))).map((function(n){var e=document.createElement("link");return e.rel="stylesheet",e.id="css_"+n,e}))));(function(){return fn.apply(this,arguments)})().then(function(){var n=Object(i.a)(a.a.mark((function n(e){var r,i,c,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.init();case 2:return n.prev=2,n.next=5,e.readFile("rmgParam");case 5:return r=n.sent,i=Object(dn.c)(JSON.parse(r)),n.next=9,e.writeFile("rmgParam",JSON.stringify(i));case 9:n.next=20;break;case 11:return n.prev=11,n.t0=n.catch(2),console.warn("Error in reading rmgParam",n.t0),n.next=16,t.e(0).then(t.bind(null,82));case 16:return c=n.sent,o=Object(dn.c)(c.default),n.next=20,e.writeFile("rmgParam",JSON.stringify(o));case 20:return n.prev=20,window.rmgStorage=e,n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[2,11,20,23]])})));return function(e){return n.apply(this,arguments)}}()).then(Object(i.a)(a.a.mark((function n(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.rmgStorage.readFile("rmgParam");case 2:e=n.sent,x.a.dispatch(Object(pn.K)(JSON.parse(e)));case 4:case"end":return n.stop()}}),n)})))).then(Object(i.a)(a.a.mark((function n(){var e,t,r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.rmgStorage.readFile("rmgScale");case 3:e=n.sent,(t=Number(e))>=.1&&x.a.dispatch(Object(T.g)(t)),n.next=15;break;case 8:return n.prev=8,n.t0=n.catch(0),console.warn("Error in reading rmgScale file",n.t0),console.log("Initiating rmgScale as 1"),n.next=14,window.rmgStorage.writeFile("rmgScale","1");case 14:x.a.dispatch(Object(T.g)(1));case 15:return n.prev=15,n.next=18,window.rmgStorage.readFile("rmgCanvas");case 18:r=n.sent,x.a.dispatch(Object(T.h)(r)),n.next=29;break;case 22:return n.prev=22,n.t1=n.catch(15),console.warn("Error in reading rmgCanvas file",n.t1),console.log('Initiating rmgCanvas as "all"'),n.next=28,window.rmgStorage.writeFile("rmgCanvas",w.a);case 28:x.a.dispatch(Object(T.h)(w.a));case 29:window.rmgStore=x.a;case 30:case"end":return n.stop()}}),n,null,[[0,8],[15,22]])})))).then((function(){u.render(Object(k.jsx)(gn.Provider,{store:x.a,children:Object(k.jsx)(un,{})}),document.getElementById("root"))})).then((function(){setInterval(Object(i.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.rmgStorage.writeFile("rmgParamRedux",JSON.stringify(window.rmgStore.getState().param));case 2:console.log("Parameter auto saved!");case 3:case"end":return n.stop()}}),n)}))),6e4)}))}],[[35,104,105]]]);
//# sourceMappingURL=main.66590ed3.chunk.js.map